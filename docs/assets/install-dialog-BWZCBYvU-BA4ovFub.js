const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/esp32-D9Bry5AK-C5_7PDVi.js","assets/rom-B2LvkjpK-f2JiXiqJ.js","assets/esp32c2-C0aHw_np-CofyzCRi.js","assets/esp32c3-1QKN64_Z-BdZBgzxv.js","assets/esp32c6-CgjBrh_Q-D0IyoC3H.js","assets/esp32h2-Bm3EZXXU-DY6-bP1c.js","assets/esp32s3-DkYcGTTD-VnulWZjA.js","assets/esp32s2-DxMNCsFV-CA_Y1HwR.js","assets/esp8266-DEFNY3lv-BiL7g1T8.js"])))=>i.map(i=>d[i]);
import{_ as Dt}from"./index-B1j0KhlT.js";import{t as v,n as tt,B as Xt,l as J,u as E,v as ht,e as Uo,m as W,W as Po,g as qt,f as jr,j as R,c as Fo,d as si,q as L,k as bt,a as Mo,Y as No,b as Ho,i as Vi,V as mt,F as Jt,h as ai,o as Yr,R as ue,P as Xr,I as qo,T as Jr,S as Wt,p as me}from"./styles-ChWDJ3ue-Ndk079rm.js";let sr;function Qr(i,e=Ot){const t=Zi(i,e);return t&&(t.tabIndex=0,t.focus()),t}function to(i,e=Ot){const t=eo(i,e);return t&&(t.tabIndex=0,t.focus()),t}function ye(i,e=Ot){for(let t=0;t<i.length;t++){const r=i[t];if(r.tabIndex===0&&e(r))return{item:r,index:t}}return null}function Zi(i,e=Ot){for(const t of i)if(e(t))return t;return null}function eo(i,e=Ot){for(let t=i.length-1;t>=0;t--){const r=i[t];if(e(r))return r}return null}function ar(i,e,t=Ot){if(e){const r=function(o,s,n=Ot){for(let d=1;d<o.length;d++){const f=o[(d+s)%o.length];if(n(f))return f}return o[s]?o[s]:null}(i,e.index,t);return r&&(r.tabIndex=0,r.focus()),r}return Qr(i,t)}function nr(i,e,t=Ot){if(e){const r=function(o,s,n=Ot){for(let d=1;d<o.length;d++){const f=o[(s-d+o.length)%o.length];if(n(f))return f}return o[s]?o[s]:null}(i,e.index,t);return r&&(r.tabIndex=0,r.focus()),r}return to(i,t)}function Ot(i){return!i.disabled}const rt={ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",Home:"Home",End:"End"};class io{constructor(e){this.handleKeydown=h=>{const p=h.key;if(h.defaultPrevented||!this.isNavigableKey(p))return;const _=this.items;if(!_.length)return;const b=ye(_,this.isActivatable);b&&(b.item.tabIndex=-1),h.preventDefault();const g=this.isRtl();switch(p){case rt.ArrowDown:case(g?rt.ArrowLeft:rt.ArrowRight):ar(_,b,this.isActivatable);break;case rt.ArrowUp:case(g?rt.ArrowRight:rt.ArrowLeft):nr(_,b,this.isActivatable);break;case rt.Home:Qr(_,this.isActivatable);break;case rt.End:to(_,this.isActivatable)}},this.onDeactivateItems=()=>{const h=this.items;for(const p of h)this.deactivateItem(p)},this.onRequestActivation=h=>{this.onDeactivateItems();const p=h.target;this.activateItem(p),p.focus()},this.onSlotchange=()=>{const h=this.items;let p=!1;for(const b of h)!(!b.disabled&&b.tabIndex>-1)||p?b.tabIndex=-1:(p=!0,b.tabIndex=0);if(p)return;const _=Zi(h,this.isActivatable);_&&(_.tabIndex=0)};const{isItem:t,getPossibleItems:r,isRtl:o,deactivateItem:s,activateItem:n,isNavigableKey:d,isActivatable:f}=e;this.isItem=t,this.getPossibleItems=r,this.isRtl=o,this.deactivateItem=s,this.activateItem=n,this.isNavigableKey=d,this.isActivatable=f}get items(){const e=this.getPossibleItems(),t=[];for(const r of e){if(this.isItem(r)){t.push(r);continue}const o=r.item;o&&this.isItem(o)&&t.push(o)}return t}activateNextItem(){const e=this.items,t=ye(e,this.isActivatable);return t&&(t.item.tabIndex=-1),ar(e,t,this.isActivatable)}activatePreviousItem(){const e=this.items,t=ye(e,this.isActivatable);return t&&(t.item.tabIndex=-1),nr(e,t,this.isActivatable)}}const Wo=new Set(Object.values(rt));class ro extends J{get items(){return this.listController.items}constructor(){super(),this.listController=new io({isItem:e=>e.hasAttribute("md-list-item"),getPossibleItems:()=>this.slotItems,isRtl:()=>getComputedStyle(this).direction==="rtl",deactivateItem:e=>{e.tabIndex=-1},activateItem:e=>{e.tabIndex=0},isNavigableKey:e=>Wo.has(e),isActivatable:e=>!e.disabled&&e.type!=="text"}),this.internals=this.attachInternals(),this.internals.role="list",this.addEventListener("keydown",this.listController.handleKeydown)}render(){return R`
      <slot
        @deactivate-items=${this.listController.onDeactivateItems}
        @request-activation=${this.listController.onRequestActivation}
        @slotchange=${this.listController.onSlotchange}>
      </slot>
    `}activateNextItem(){return this.listController.activateNextItem()}activatePreviousItem(){return this.listController.activatePreviousItem()}}v([qt({flatten:!0})],ro.prototype,"slotItems",void 0);const Vo=tt`:host{background:var(--md-list-container-color, var(--md-sys-color-surface, #fef7ff));color:unset;display:flex;flex-direction:column;outline:none;padding:8px 0;position:relative}/*# sourceMappingURL=list-styles.css.map */
`;class lr extends ro{}lr.styles=[Vo],customElements.define("ew-list",lr);class Di extends J{constructor(){super(...arguments),this.multiline=!1}render(){return R`
      <slot name="container"></slot>
      <slot class="non-text" name="start"></slot>
      <div class="text">
        <slot name="overline" @slotchange=${this.handleTextSlotChange}></slot>
        <slot
          class="default-slot"
          @slotchange=${this.handleTextSlotChange}></slot>
        <slot name="headline" @slotchange=${this.handleTextSlotChange}></slot>
        <slot
          name="supporting-text"
          @slotchange=${this.handleTextSlotChange}></slot>
      </div>
      <slot class="non-text" name="trailing-supporting-text"></slot>
      <slot class="non-text" name="end"></slot>
    `}handleTextSlotChange(){let e=!1,t=0;for(const r of this.textSlots)if(Zo(r)&&(t+=1),t>1){e=!0;break}this.multiline=e}}function Zo(i){var e;for(const t of i.assignedNodes({flatten:!0})){const r=t.nodeType===Node.ELEMENT_NODE,o=t.nodeType===Node.TEXT_NODE&&((e=t.textContent)==null?void 0:e.match(/\S/));if(r||o)return!0}return!1}v([E({type:Boolean,reflect:!0})],Di.prototype,"multiline",void 0),v([function(i){return(e,t)=>jr(e,t,{get(){return(this.renderRoot??sr??(sr=document.createDocumentFragment())).querySelectorAll(i)}})}(".text slot")],Di.prototype,"textSlots",void 0);const Go=tt`:host{color:var(--md-sys-color-on-surface, #1d1b20);font-family:var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-body-large-size, 1rem);font-weight:var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400));line-height:var(--md-sys-typescale-body-large-line-height, 1.5rem);align-items:center;box-sizing:border-box;display:flex;gap:16px;min-height:56px;overflow:hidden;padding:12px 16px;position:relative;text-overflow:ellipsis}:host([multiline]){min-height:72px}[name=overline]{color:var(--md-sys-color-on-surface-variant, #49454f);font-family:var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-label-small-size, 0.6875rem);font-weight:var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500));line-height:var(--md-sys-typescale-label-small-line-height, 1rem)}[name=supporting-text]{color:var(--md-sys-color-on-surface-variant, #49454f);font-family:var(--md-sys-typescale-body-medium-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-body-medium-size, 0.875rem);font-weight:var(--md-sys-typescale-body-medium-weight, var(--md-ref-typeface-weight-regular, 400));line-height:var(--md-sys-typescale-body-medium-line-height, 1.25rem)}[name=trailing-supporting-text]{color:var(--md-sys-color-on-surface-variant, #49454f);font-family:var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto));font-size:var(--md-sys-typescale-label-small-size, 0.6875rem);font-weight:var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500));line-height:var(--md-sys-typescale-label-small-line-height, 1rem)}[name=container]::slotted(*){inset:0;position:absolute}.default-slot{display:inline}.default-slot,.text ::slotted(*){overflow:hidden;text-overflow:ellipsis}.text{display:flex;flex:1;flex-direction:column;overflow:hidden}/*# sourceMappingURL=item-styles.css.map */
`;let ui=class extends Di{};ui.styles=[Go],ui=v([si("md-item")],ui);const oo=Symbol.for(""),Ko=i=>{if((i==null?void 0:i.r)===oo)return i==null?void 0:i._$litStatic$},Ft=(i,...e)=>({_$litStatic$:e.reduce((t,r,o)=>t+(s=>{if(s._$litStatic$!==void 0)return s._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${s}. Use 'unsafeStatic' to pass non-literal values, but
            take care to ensure page security.`)})(r)+i[o+1],i[0]),r:oo}),dr=new Map,ni=(i=>(e,...t)=>{const r=t.length;let o,s;const n=[],d=[];let f,h=0,p=!1;for(;h<r;){for(f=e[h];h<r&&(s=t[h],(o=Ko(s))!==void 0);)f+=o+e[++h],p=!0;h!==r&&d.push(s),n.push(f),h++}if(h===r&&n.push(e[r]),p){const _=n.join("$$lit$$");(e=dr.get(_))===void 0&&(n.raw=n,dr.set(_,e=n)),t=d}return i(e,...t)})(R);class It extends J{constructor(){super(...arguments),this.disabled=!1,this.type="text",this.isListItem=!0,this.href="",this.target=""}get isDisabled(){return this.disabled&&this.type!=="link"}willUpdate(e){this.href&&(this.type="link"),super.willUpdate(e)}render(){return this.renderListItem(R`
      <md-item>
        <div slot="container">
          ${this.renderRipple()} ${this.renderFocusRing()}
        </div>
        <slot name="start" slot="start"></slot>
        <slot name="end" slot="end"></slot>
        ${this.renderBody()}
      </md-item>
    `)}renderListItem(e){const t=this.type==="link";let r;switch(this.type){case"link":r=Ft`a`;break;case"button":r=Ft`button`;break;default:r=Ft`li`}const o=this.type!=="text",s=t&&this.target?this.target:L;return ni`
      <${r}
        id="item"
        tabindex="${this.isDisabled||!o?-1:0}"
        ?disabled=${this.isDisabled}
        role="listitem"
        aria-selected=${this.ariaSelected||L}
        aria-checked=${this.ariaChecked||L}
        aria-expanded=${this.ariaExpanded||L}
        aria-haspopup=${this.ariaHasPopup||L}
        class="list-item ${bt(this.getRenderClasses())}"
        href=${this.href||L}
        target=${s}
        @focus=${this.onFocus}
      >${e}</${r}>
    `}renderRipple(){return this.type==="text"?L:R` <md-ripple
      part="ripple"
      for="item"
      ?disabled=${this.isDisabled}></md-ripple>`}renderFocusRing(){return this.type==="text"?L:R` <md-focus-ring
      @visibility-changed=${this.onFocusRingVisibilityChanged}
      part="focus-ring"
      for="item"
      inward></md-focus-ring>`}onFocusRingVisibilityChanged(e){}getRenderClasses(){return{disabled:this.isDisabled}}renderBody(){return R`
      <slot></slot>
      <slot name="overline" slot="overline"></slot>
      <slot name="headline" slot="headline"></slot>
      <slot name="supporting-text" slot="supporting-text"></slot>
      <slot
        name="trailing-supporting-text"
        slot="trailing-supporting-text"></slot>
    `}onFocus(){this.tabIndex===-1&&this.dispatchEvent(new Event("request-activation",{bubbles:!0,composed:!0}))}focus(){var e;(e=this.listItemRoot)==null||e.focus()}}Xt(It),It.shadowRootOptions={...J.shadowRootOptions,delegatesFocus:!0},v([E({type:Boolean,reflect:!0})],It.prototype,"disabled",void 0),v([E({reflect:!0})],It.prototype,"type",void 0),v([E({type:Boolean,attribute:"md-list-item",reflect:!0})],It.prototype,"isListItem",void 0),v([E()],It.prototype,"href",void 0),v([E()],It.prototype,"target",void 0),v([ht(".list-item")],It.prototype,"listItemRoot",void 0);const jo=tt`:host{display:flex;-webkit-tap-highlight-color:rgba(0,0,0,0);--md-ripple-hover-color: var(--md-list-item-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-list-item-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-list-item-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity: var(--md-list-item-pressed-state-layer-opacity, 0.12)}:host(:is([type=button]:not([disabled]),[type=link])){cursor:pointer}md-focus-ring{z-index:1;--md-focus-ring-shape: 8px}a,button,li{background:none;border:none;cursor:inherit;padding:0;margin:0;text-align:unset;text-decoration:none}.list-item{border-radius:inherit;display:flex;flex:1;max-width:inherit;min-width:inherit;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%}.list-item.interactive{cursor:pointer}.list-item.disabled{opacity:var(--md-list-item-disabled-opacity, 0.3);pointer-events:none}[slot=container]{pointer-events:none}md-ripple{border-radius:inherit}md-item{border-radius:inherit;flex:1;height:100%;color:var(--md-list-item-label-text-color, var(--md-sys-color-on-surface, #1d1b20));font-family:var(--md-list-item-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-list-item-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));line-height:var(--md-list-item-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));font-weight:var(--md-list-item-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));min-height:var(--md-list-item-one-line-container-height, 56px);padding-top:var(--md-list-item-top-space, 12px);padding-bottom:var(--md-list-item-bottom-space, 12px);padding-inline-start:var(--md-list-item-leading-space, 16px);padding-inline-end:var(--md-list-item-trailing-space, 16px)}md-item[multiline]{min-height:var(--md-list-item-two-line-container-height, 72px)}[slot=supporting-text]{color:var(--md-list-item-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-list-item-supporting-text-font, var(--md-sys-typescale-body-medium-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-list-item-supporting-text-size, var(--md-sys-typescale-body-medium-size, 0.875rem));line-height:var(--md-list-item-supporting-text-line-height, var(--md-sys-typescale-body-medium-line-height, 1.25rem));font-weight:var(--md-list-item-supporting-text-weight, var(--md-sys-typescale-body-medium-weight, var(--md-ref-typeface-weight-regular, 400)))}[slot=trailing-supporting-text]{color:var(--md-list-item-trailing-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-list-item-trailing-supporting-text-font, var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-list-item-trailing-supporting-text-size, var(--md-sys-typescale-label-small-size, 0.6875rem));line-height:var(--md-list-item-trailing-supporting-text-line-height, var(--md-sys-typescale-label-small-line-height, 1rem));font-weight:var(--md-list-item-trailing-supporting-text-weight, var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500)))}:is([slot=start],[slot=end])::slotted(*){fill:currentColor}[slot=start]{color:var(--md-list-item-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}[slot=end]{color:var(--md-list-item-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}@media(forced-colors: active){.disabled slot{color:GrayText}.list-item.disabled{color:GrayText;opacity:1}}/*# sourceMappingURL=list-item-styles.css.map */
`;class cr extends It{}cr.styles=[jo],customElements.define("ew-list-item",cr);class hr extends Mo{}hr.styles=[Uo],customElements.define("ew-divider",hr);const Re=Symbol("createValidator"),Te=Symbol("getValidityAnchor"),mi=Symbol("privateValidator"),Rt=Symbol("privateSyncValidity"),Ue=Symbol("privateCustomValidationMessage");function Gi(i){var e;class t extends i{constructor(){super(...arguments),this[e]=""}get validity(){return this[Rt](),this[mt].validity}get validationMessage(){return this[Rt](),this[mt].validationMessage}get willValidate(){return this[Rt](),this[mt].willValidate}checkValidity(){return this[Rt](),this[mt].checkValidity()}reportValidity(){return this[Rt](),this[mt].reportValidity()}setCustomValidity(o){this[Ue]=o,this[Rt]()}requestUpdate(o,s,n){super.requestUpdate(o,s,n),this[Rt]()}firstUpdated(o){super.firstUpdated(o),this[Rt]()}[(e=Ue,Rt)](){this[mi]||(this[mi]=this[Re]());const{validity:o,validationMessage:s}=this[mi].getValidity(),n=!!this[Ue],d=this[Ue]||s;this[mt].setValidity({...o,customError:n},d,this[Te]()??void 0)}[Re](){throw new Error("Implement [createValidator]")}[Te](){throw new Error("Implement [getValidityAnchor]")}}return t}const ae=Symbol("getFormValue"),Ui=Symbol("getFormState");function Ki(i){class e extends i{get form(){return this[mt].form}get labels(){return this[mt].labels}get name(){return this.getAttribute("name")??""}set name(r){this.setAttribute("name",r)}get disabled(){return this.hasAttribute("disabled")}set disabled(r){this.toggleAttribute("disabled",r)}attributeChangedCallback(r,o,s){if(r!=="name"&&r!=="disabled")super.attributeChangedCallback(r,o,s);else{const n=r==="disabled"?o!==null:o;this.requestUpdate(r,n)}}requestUpdate(r,o,s){super.requestUpdate(r,o,s),this[mt].setFormValue(this[ae](),this[Ui]())}[ae](){throw new Error("Implement [getFormValue]")}[Ui](){return this[ae]()}formDisabledCallback(r){this.disabled=r}}return e.formAssociated=!0,v([E({noAccessor:!0})],e.prototype,"name",null),v([E({type:Boolean,noAccessor:!0})],e.prototype,"disabled",null),e}class ji{constructor(e){this.getCurrentState=e,this.currentValidity={validity:{},validationMessage:""}}getValidity(){const e=this.getCurrentState();if(!(!this.prevState||!this.equals(this.prevState,e)))return this.currentValidity;const{validity:t,validationMessage:r}=this.computeValidity(e);return this.prevState=this.copy(e),this.currentValidity={validationMessage:r,validity:{badInput:t.badInput,customError:t.customError,patternMismatch:t.patternMismatch,rangeOverflow:t.rangeOverflow,rangeUnderflow:t.rangeUnderflow,stepMismatch:t.stepMismatch,tooLong:t.tooLong,tooShort:t.tooShort,typeMismatch:t.typeMismatch,valueMissing:t.valueMissing}},this.currentValidity}}class Yo extends ji{computeValidity(e){return this.checkboxControl||(this.checkboxControl=document.createElement("input"),this.checkboxControl.type="checkbox"),this.checkboxControl.checked=e.checked,this.checkboxControl.required=e.required,{validity:this.checkboxControl.validity,validationMessage:this.checkboxControl.validationMessage}}equals(e,t){return e.checked===t.checked&&e.required===t.required}copy({checked:e,required:t}){return{checked:e,required:t}}}const Xo=Gi(Ki(ai(J)));class yt extends Xo{constructor(){super(),this.checked=!1,this.indeterminate=!1,this.required=!1,this.value="on",this.prevChecked=!1,this.prevDisabled=!1,this.prevIndeterminate=!1,this.addEventListener("click",e=>{No(e)&&this.input&&(this.focus(),Ho(this.input))})}update(e){(e.has("checked")||e.has("disabled")||e.has("indeterminate"))&&(this.prevChecked=e.get("checked")??this.checked,this.prevDisabled=e.get("disabled")??this.disabled,this.prevIndeterminate=e.get("indeterminate")??this.indeterminate),super.update(e)}render(){const e=!this.prevChecked&&!this.prevIndeterminate,t=this.prevChecked&&!this.prevIndeterminate,r=this.prevIndeterminate,o=this.checked&&!this.indeterminate,s=this.indeterminate,n=bt({disabled:this.disabled,selected:o||s,unselected:!o&&!s,checked:o,indeterminate:s,"prev-unselected":e,"prev-checked":t,"prev-indeterminate":r,"prev-disabled":this.prevDisabled}),{ariaLabel:d,ariaInvalid:f}=this;return R`
      <div class="container ${n}">
        <input
          type="checkbox"
          id="input"
          aria-checked=${s?"mixed":L}
          aria-label=${d||L}
          aria-invalid=${f||L}
          ?disabled=${this.disabled}
          ?required=${this.required}
          .indeterminate=${this.indeterminate}
          .checked=${this.checked}
          @input=${this.handleInput}
          @change=${this.handleChange} />

        <div class="outline"></div>
        <div class="background"></div>
        <md-focus-ring part="focus-ring" for="input"></md-focus-ring>
        <md-ripple for="input" ?disabled=${this.disabled}></md-ripple>
        <svg class="icon" viewBox="0 0 18 18" aria-hidden="true">
          <rect class="mark short" />
          <rect class="mark long" />
        </svg>
      </div>
    `}handleInput(e){const t=e.target;this.checked=t.checked,this.indeterminate=t.indeterminate}handleChange(e){Vi(this,e)}[ae](){return!this.checked||this.indeterminate?null:this.value}[Ui](){return String(this.checked)}formResetCallback(){this.checked=this.hasAttribute("checked")}formStateRestoreCallback(e){this.checked=e==="true"}[Re](){return new Yo(()=>this)}[Te](){return this.input}}Xt(yt),yt.shadowRootOptions={...J.shadowRootOptions,delegatesFocus:!0},v([E({type:Boolean})],yt.prototype,"checked",void 0),v([E({type:Boolean})],yt.prototype,"indeterminate",void 0),v([E({type:Boolean})],yt.prototype,"required",void 0),v([E()],yt.prototype,"value",void 0),v([W()],yt.prototype,"prevChecked",void 0),v([W()],yt.prototype,"prevDisabled",void 0),v([W()],yt.prototype,"prevIndeterminate",void 0),v([ht("input")],yt.prototype,"input",void 0);const Jo=tt`:host{border-start-start-radius:var(--md-checkbox-container-shape-start-start, var(--md-checkbox-container-shape, 2px));border-start-end-radius:var(--md-checkbox-container-shape-start-end, var(--md-checkbox-container-shape, 2px));border-end-end-radius:var(--md-checkbox-container-shape-end-end, var(--md-checkbox-container-shape, 2px));border-end-start-radius:var(--md-checkbox-container-shape-end-start, var(--md-checkbox-container-shape, 2px));display:inline-flex;height:var(--md-checkbox-container-size, 18px);position:relative;vertical-align:top;width:var(--md-checkbox-container-size, 18px);-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer}:host([disabled]){cursor:default}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--md-checkbox-container-size, 18px))/2)}md-focus-ring{height:44px;inset:unset;width:44px}input{appearance:none;height:48px;margin:0;opacity:0;outline:none;position:absolute;width:48px;z-index:1;cursor:inherit}:host([touch-target=none]) input{height:100%;width:100%}.container{border-radius:inherit;display:flex;height:100%;place-content:center;place-items:center;position:relative;width:100%}.outline,.background,.icon{inset:0;position:absolute}.outline,.background{border-radius:inherit}.outline{border-color:var(--md-checkbox-outline-color, var(--md-sys-color-on-surface-variant, #49454f));border-style:solid;border-width:var(--md-checkbox-outline-width, 2px);box-sizing:border-box}.background{background-color:var(--md-checkbox-selected-container-color, var(--md-sys-color-primary, #6750a4))}.background,.icon{opacity:0;transition-duration:150ms,50ms;transition-property:transform,opacity;transition-timing-function:cubic-bezier(0.3, 0, 0.8, 0.15),linear;transform:scale(0.6)}:where(.selected) :is(.background,.icon){opacity:1;transition-duration:350ms,50ms;transition-timing-function:cubic-bezier(0.05, 0.7, 0.1, 1),linear;transform:scale(1)}md-ripple{border-radius:var(--md-checkbox-state-layer-shape, 9999px);height:var(--md-checkbox-state-layer-size, 40px);inset:unset;width:var(--md-checkbox-state-layer-size, 40px);--md-ripple-hover-color: var(--md-checkbox-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-checkbox-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-checkbox-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-pressed-opacity: var(--md-checkbox-pressed-state-layer-opacity, 0.12)}.selected md-ripple{--md-ripple-hover-color: var(--md-checkbox-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--md-ripple-hover-opacity: var(--md-checkbox-selected-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-checkbox-selected-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity: var(--md-checkbox-selected-pressed-state-layer-opacity, 0.12)}.icon{fill:var(--md-checkbox-selected-icon-color, var(--md-sys-color-on-primary, #fff));height:var(--md-checkbox-icon-size, 18px);width:var(--md-checkbox-icon-size, 18px)}.mark.short{height:2px;transition-property:transform,height;width:2px}.mark.long{height:2px;transition-property:transform,width;width:10px}.mark{animation-duration:150ms;animation-timing-function:cubic-bezier(0.3, 0, 0.8, 0.15);transition-duration:150ms;transition-timing-function:cubic-bezier(0.3, 0, 0.8, 0.15)}.selected .mark{animation-duration:350ms;animation-timing-function:cubic-bezier(0.05, 0.7, 0.1, 1);transition-duration:350ms;transition-timing-function:cubic-bezier(0.05, 0.7, 0.1, 1)}.checked .mark,.prev-checked.unselected .mark{transform:scaleY(-1) translate(7px, -14px) rotate(45deg)}.checked .mark.short,.prev-checked.unselected .mark.short{height:5.6568542495px}.checked .mark.long,.prev-checked.unselected .mark.long{width:11.313708499px}.indeterminate .mark,.prev-indeterminate.unselected .mark{transform:scaleY(-1) translate(4px, -10px) rotate(0deg)}.prev-unselected .mark{transition-property:none}.prev-unselected.checked .mark.long{animation-name:prev-unselected-to-checked}@keyframes prev-unselected-to-checked{from{width:0}}:where(:hover) .outline{border-color:var(--md-checkbox-hover-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-hover-outline-width, 2px)}:where(:hover) .background{background:var(--md-checkbox-selected-hover-container-color, var(--md-sys-color-primary, #6750a4))}:where(:hover) .icon{fill:var(--md-checkbox-selected-hover-icon-color, var(--md-sys-color-on-primary, #fff))}:where(:focus-within) .outline{border-color:var(--md-checkbox-focus-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-focus-outline-width, 2px)}:where(:focus-within) .background{background:var(--md-checkbox-selected-focus-container-color, var(--md-sys-color-primary, #6750a4))}:where(:focus-within) .icon{fill:var(--md-checkbox-selected-focus-icon-color, var(--md-sys-color-on-primary, #fff))}:where(:active) .outline{border-color:var(--md-checkbox-pressed-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-pressed-outline-width, 2px)}:where(:active) .background{background:var(--md-checkbox-selected-pressed-container-color, var(--md-sys-color-primary, #6750a4))}:where(:active) .icon{fill:var(--md-checkbox-selected-pressed-icon-color, var(--md-sys-color-on-primary, #fff))}:where(.disabled,.prev-disabled) :is(.background,.icon,.mark){animation-duration:0s;transition-duration:0s}:where(.disabled) .outline{border-color:var(--md-checkbox-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));border-width:var(--md-checkbox-disabled-outline-width, 2px);opacity:var(--md-checkbox-disabled-container-opacity, 0.38)}:where(.selected.disabled) .outline{visibility:hidden}:where(.selected.disabled) .background{background:var(--md-checkbox-selected-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));opacity:var(--md-checkbox-selected-disabled-container-opacity, 0.38)}:where(.disabled) .icon{fill:var(--md-checkbox-selected-disabled-icon-color, var(--md-sys-color-surface, #fef7ff))}@media(forced-colors: active){.background{background-color:CanvasText}.selected.disabled .background{background-color:GrayText;opacity:1}.outline{border-color:CanvasText}.disabled .outline{border-color:GrayText;opacity:1}.icon{fill:Canvas}}/*# sourceMappingURL=checkbox-styles.css.map */
`;class pr extends yt{}pr.styles=[Jo],customElements.define("ew-checkbox",pr);class Qo{constructor(e){this.targetElement=e,this.state={bold:!1,italic:!1,underline:!1,strikethrough:!1,foregroundColor:null,backgroundColor:null,carriageReturn:!1,secret:!1}}logs(){return this.targetElement.innerText}addLine(e){const t=/(?:\033|\\033)(?:\[(.*?)[@-~]|\].*?(?:\007|\033\\))/g;let r=0;this.state.carriageReturn&&(e!==`
`&&this.targetElement.removeChild(this.targetElement.lastChild),this.state.carriageReturn=!1),e.includes("\r")&&(this.state.carriageReturn=!0);const o=document.createElement("span");o.classList.add("line"),this.targetElement.appendChild(o);const s=d=>{if(d==="")return;const f=document.createElement("span");if(this.state.bold&&f.classList.add("log-bold"),this.state.italic&&f.classList.add("log-italic"),this.state.underline&&f.classList.add("log-underline"),this.state.strikethrough&&f.classList.add("log-strikethrough"),this.state.secret&&f.classList.add("log-secret"),this.state.foregroundColor!==null&&f.classList.add(`log-fg-${this.state.foregroundColor}`),this.state.backgroundColor!==null&&f.classList.add(`log-bg-${this.state.backgroundColor}`),f.appendChild(document.createTextNode(d)),o.appendChild(f),this.state.secret){const h=document.createElement("span");h.classList.add("log-secret-redacted"),h.appendChild(document.createTextNode("[redacted]")),o.appendChild(h)}};for(;;){const d=t.exec(e);if(d===null)break;const f=d.index;if(s(e.substring(r,f)),r=f+d[0].length,d[1]!==void 0)for(const h of d[1].split(";"))switch(parseInt(h)){case 0:this.state.bold=!1,this.state.italic=!1,this.state.underline=!1,this.state.strikethrough=!1,this.state.foregroundColor=null,this.state.backgroundColor=null,this.state.secret=!1;break;case 1:this.state.bold=!0;break;case 3:this.state.italic=!0;break;case 4:this.state.underline=!0;break;case 5:this.state.secret=!0;break;case 6:this.state.secret=!1;break;case 9:this.state.strikethrough=!0;break;case 22:this.state.bold=!1;break;case 23:this.state.italic=!1;break;case 24:this.state.underline=!1;break;case 29:this.state.strikethrough=!1;break;case 30:this.state.foregroundColor="black";break;case 31:this.state.foregroundColor="red";break;case 32:this.state.foregroundColor="green";break;case 33:this.state.foregroundColor="yellow";break;case 34:this.state.foregroundColor="blue";break;case 35:this.state.foregroundColor="magenta";break;case 36:this.state.foregroundColor="cyan";break;case 37:this.state.foregroundColor="white";break;case 39:this.state.foregroundColor=null;break;case 41:this.state.backgroundColor="red";break;case 42:this.state.backgroundColor="green";break;case 43:this.state.backgroundColor="yellow";break;case 44:this.state.backgroundColor="blue";break;case 45:this.state.backgroundColor="magenta";break;case 46:this.state.backgroundColor="cyan";break;case 47:this.state.backgroundColor="white";break;case 40:case 49:this.state.backgroundColor=null}}const n=this.targetElement.scrollTop>this.targetElement.scrollHeight-this.targetElement.offsetHeight-50;s(e.substring(r)),n&&(this.targetElement.scrollTop=this.targetElement.scrollHeight)}}const Lt=i=>new Promise(e=>setTimeout(e,i));class ts{constructor(){this.chunks=""}transform(e,t){this.chunks+=e;const r=this.chunks.split(`\r
`);this.chunks=r.pop(),r.forEach(o=>t.enqueue(o+`\r
`))}flush(e){e.enqueue(this.chunks)}}class es extends HTMLElement{constructor(){super(...arguments),this.allowInput=!0}logs(){var e;return((e=this._console)===null||e===void 0?void 0:e.logs())||""}connectedCallback(){if(this._console)return;if(this.attachShadow({mode:"open"}).innerHTML=`
      <style>
        :host, input {
          background-color: #1c1c1c;
          color: #ddd;
          font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier,
            monospace;
          line-height: 1.45;
          display: flex;
          flex-direction: column;
        }
        form {
          display: flex;
          align-items: center;
          padding: 0 8px 0 16px;
        }
        input {
          flex: 1;
          padding: 4px;
          margin: 0 8px;
          border: 0;
          outline: none;
        }
        
  .log {
    flex: 1;
    background-color: #1c1c1c;
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier,
      monospace;
    font-size: 12px;
    padding: 16px;
    overflow: auto;
    line-height: 1.45;
    border-radius: 3px;
    white-space: pre-wrap;
    overflow-wrap: break-word;
    color: #ddd;
  }

  .log-bold {
    font-weight: bold;
  }
  .log-italic {
    font-style: italic;
  }
  .log-underline {
    text-decoration: underline;
  }
  .log-strikethrough {
    text-decoration: line-through;
  }
  .log-underline.log-strikethrough {
    text-decoration: underline line-through;
  }
  .log-secret {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  .log-secret-redacted {
    opacity: 0;
    width: 1px;
    font-size: 1px;
  }
  .log-fg-black {
    color: rgb(128, 128, 128);
  }
  .log-fg-red {
    color: rgb(255, 0, 0);
  }
  .log-fg-green {
    color: rgb(0, 255, 0);
  }
  .log-fg-yellow {
    color: rgb(255, 255, 0);
  }
  .log-fg-blue {
    color: rgb(0, 0, 255);
  }
  .log-fg-magenta {
    color: rgb(255, 0, 255);
  }
  .log-fg-cyan {
    color: rgb(0, 255, 255);
  }
  .log-fg-white {
    color: rgb(187, 187, 187);
  }
  .log-bg-black {
    background-color: rgb(0, 0, 0);
  }
  .log-bg-red {
    background-color: rgb(255, 0, 0);
  }
  .log-bg-green {
    background-color: rgb(0, 255, 0);
  }
  .log-bg-yellow {
    background-color: rgb(255, 255, 0);
  }
  .log-bg-blue {
    background-color: rgb(0, 0, 255);
  }
  .log-bg-magenta {
    background-color: rgb(255, 0, 255);
  }
  .log-bg-cyan {
    background-color: rgb(0, 255, 255);
  }
  .log-bg-white {
    background-color: rgb(255, 255, 255);
  }

      </style>
      <div class="log"></div>
      ${this.allowInput?`<form>
                >
                <input autofocus>
              </form>
            `:""}
    `,this._console=new Qo(this.shadowRoot.querySelector("div")),this.allowInput){const r=this.shadowRoot.querySelector("input");this.addEventListener("click",()=>{var o;((o=getSelection())===null||o===void 0?void 0:o.toString())===""&&r.focus()}),r.addEventListener("keydown",o=>{o.key==="Enter"&&(o.preventDefault(),o.stopPropagation(),this._sendCommand())})}const e=new AbortController,t=this._connect(e.signal);this._cancelConnection=()=>(e.abort(),t)}async _connect(e){this.logger.debug("Starting console read loop");try{await this.port.readable.pipeThrough(new TextDecoderStream,{signal:e}).pipeThrough(new TransformStream(new ts)).pipeTo(new WritableStream({write:t=>{this._console.addLine(t.replace("\r",""))}})),e.aborted||(this._console.addLine(""),this._console.addLine(""),this._console.addLine("Terminal disconnected"))}catch(t){this._console.addLine(""),this._console.addLine(""),this._console.addLine(`Terminal disconnected: ${t}`)}finally{await Lt(100),this.logger.debug("Finished console read loop")}}async _sendCommand(){const e=this.shadowRoot.querySelector("input"),t=e.value,r=new TextEncoder,o=this.port.writable.getWriter();await o.write(r.encode(t+`\r
`)),this._console.addLine(`> ${t}\r
`),e.value="",e.focus();try{o.releaseLock()}catch(s){console.error("Ignoring release lock error",s)}}async disconnect(){this._cancelConnection&&(await this._cancelConnection(),this._cancelConnection=void 0)}async reset(){this.logger.debug("Triggering reset"),await this.port.setSignals({dataTerminalReady:!1,requestToSend:!0}),await Lt(250),await this.port.setSignals({dataTerminalReady:!1,requestToSend:!1}),await Lt(250),await new Promise(e=>setTimeout(e,1e3))}}function fr(i,e=!0){return e&&getComputedStyle(i).getPropertyValue("direction").trim()==="rtl"}customElements.define("ewt-console",es);const is=ai(J);class st extends is{constructor(){super(...arguments),this.disabled=!1,this.flipIconInRtl=!1,this.href="",this.target="",this.ariaLabelSelected="",this.toggle=!1,this.selected=!1,this.type="submit",this.value="",this.flipIcon=fr(this,this.flipIconInRtl)}get name(){return this.getAttribute("name")??""}set name(e){this.setAttribute("name",e)}get form(){return this[mt].form}get labels(){return this[mt].labels}willUpdate(){this.href&&(this.disabled=!1)}render(){const e=this.href?Ft`div`:Ft`button`,{ariaLabel:t,ariaHasPopup:r,ariaExpanded:o}=this,s=t&&this.ariaLabelSelected,n=this.toggle?this.selected:L;let d=L;return this.href||(d=s&&this.selected?this.ariaLabelSelected:t),ni`<${e}
        class="icon-button ${bt(this.getRenderClasses())}"
        id="button"
        aria-label="${d||L}"
        aria-haspopup="${!this.href&&r||L}"
        aria-expanded="${!this.href&&o||L}"
        aria-pressed="${n}"
        ?disabled="${!this.href&&this.disabled}"
        @click="${this.handleClick}">
        ${this.renderFocusRing()}
        ${this.renderRipple()}
        ${this.selected?L:this.renderIcon()}
        ${this.selected?this.renderSelectedIcon():L}
        ${this.renderTouchTarget()}
        ${this.href&&this.renderLink()}
  </${e}>`}renderLink(){const{ariaLabel:e}=this;return R`
      <a
        class="link"
        id="link"
        href="${this.href}"
        target="${this.target||L}"
        aria-label="${e||L}"></a>
    `}getRenderClasses(){return{"flip-icon":this.flipIcon,selected:this.toggle&&this.selected}}renderIcon(){return R`<span class="icon"><slot></slot></span>`}renderSelectedIcon(){return R`<span class="icon icon--selected"
      ><slot name="selected"><slot></slot></slot
    ></span>`}renderTouchTarget(){return R`<span class="touch"></span>`}renderFocusRing(){return R`<md-focus-ring
      part="focus-ring"
      for=${this.href?"link":"button"}></md-focus-ring>`}renderRipple(){return R`<md-ripple
      for=${this.href?"link":L}
      ?disabled="${!this.href&&this.disabled}"></md-ripple>`}connectedCallback(){this.flipIcon=fr(this,this.flipIconInRtl),super.connectedCallback()}async handleClick(e){await 0,!this.toggle||this.disabled||e.defaultPrevented||(this.selected=!this.selected,this.dispatchEvent(new InputEvent("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0})))}}Xt(st),Po(st),st.formAssociated=!0,st.shadowRootOptions={mode:"open",delegatesFocus:!0},v([E({type:Boolean,reflect:!0})],st.prototype,"disabled",void 0),v([E({type:Boolean,attribute:"flip-icon-in-rtl"})],st.prototype,"flipIconInRtl",void 0),v([E()],st.prototype,"href",void 0),v([E()],st.prototype,"target",void 0),v([E({attribute:"aria-label-selected"})],st.prototype,"ariaLabelSelected",void 0),v([E({type:Boolean})],st.prototype,"toggle",void 0),v([E({type:Boolean,reflect:!0})],st.prototype,"selected",void 0),v([E()],st.prototype,"type",void 0),v([E({reflect:!0})],st.prototype,"value",void 0),v([W()],st.prototype,"flipIcon",void 0);const rs=tt`:host{display:inline-flex;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0);height:var(--_container-height);width:var(--_container-width);justify-content:center}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_container-height))/2) max(0px,(48px - var(--_container-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_container-shape-start-start);--md-focus-ring-shape-start-end: var(--_container-shape-start-end);--md-focus-ring-shape-end-end: var(--_container-shape-end-end);--md-focus-ring-shape-end-start: var(--_container-shape-end-start)}:host([disabled]){pointer-events:none}.icon-button{place-items:center;background:none;border:none;box-sizing:border-box;cursor:pointer;display:flex;place-content:center;outline:none;padding:0;position:relative;text-decoration:none;user-select:none;z-index:0;flex:1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.icon ::slotted(*){font-size:var(--_icon-size);height:var(--_icon-size);width:var(--_icon-size);font-weight:inherit}md-ripple{z-index:-1;border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-start-radius:var(--_container-shape-end-start);border-end-end-radius:var(--_container-shape-end-end)}.flip-icon .icon{transform:scaleX(-1)}.icon{display:inline-flex}.link{height:100%;outline:none;position:absolute;width:100%}.touch{position:absolute;height:max(48px,100%);width:max(48px,100%)}:host([touch-target=none]) .touch{display:none}@media(forced-colors: active){:host([disabled]){--_disabled-icon-opacity: 1}}/*# sourceMappingURL=shared-styles.css.map */
`,os=tt`:host{--_disabled-icon-color: var(--md-icon-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-icon-button-disabled-icon-opacity, 0.38);--_icon-size: var(--md-icon-button-icon-size, 24px);--_selected-focus-icon-color: var(--md-icon-button-selected-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-icon-color: var(--md-icon-button-selected-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-color: var(--md-icon-button-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-opacity: var(--md-icon-button-selected-hover-state-layer-opacity, 0.08);--_selected-icon-color: var(--md-icon-button-selected-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-icon-color: var(--md-icon-button-selected-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-color: var(--md-icon-button-selected-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-opacity: var(--md-icon-button-selected-pressed-state-layer-opacity, 0.12);--_state-layer-height: var(--md-icon-button-state-layer-height, 40px);--_state-layer-shape: var(--md-icon-button-state-layer-shape, 9999px);--_state-layer-width: var(--md-icon-button-state-layer-width, 40px);--_focus-icon-color: var(--md-icon-button-focus-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-icon-color: var(--md-icon-button-hover-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-icon-button-hover-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-opacity: var(--md-icon-button-hover-state-layer-opacity, 0.08);--_icon-color: var(--md-icon-button-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-icon-color: var(--md-icon-button-pressed-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-state-layer-color: var(--md-icon-button-pressed-state-layer-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-state-layer-opacity: var(--md-icon-button-pressed-state-layer-opacity, 0.12);--_container-shape-start-start: 0;--_container-shape-start-end: 0;--_container-shape-end-end: 0;--_container-shape-end-start: 0;--_container-height: 0;--_container-width: 0;height:var(--_state-layer-height);width:var(--_state-layer-width)}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_state-layer-height))/2) max(0px,(48px - var(--_state-layer-width))/2)}md-focus-ring{--md-focus-ring-shape-start-start: var(--_state-layer-shape);--md-focus-ring-shape-start-end: var(--_state-layer-shape);--md-focus-ring-shape-end-end: var(--_state-layer-shape);--md-focus-ring-shape-end-start: var(--_state-layer-shape)}.standard{background-color:rgba(0,0,0,0);color:var(--_icon-color);--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity)}.standard:hover{color:var(--_hover-icon-color)}.standard:focus{color:var(--_focus-icon-color)}.standard:active{color:var(--_pressed-icon-color)}.standard:disabled{color:var(--_disabled-icon-color)}md-ripple{border-radius:var(--_state-layer-shape)}.standard:disabled .icon{opacity:var(--_disabled-icon-opacity)}.selected{--md-ripple-hover-color: var(--_selected-hover-state-layer-color);--md-ripple-hover-opacity: var(--_selected-hover-state-layer-opacity);--md-ripple-pressed-color: var(--_selected-pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_selected-pressed-state-layer-opacity)}.selected:not(:disabled){color:var(--_selected-icon-color)}.selected:not(:disabled):hover{color:var(--_selected-hover-icon-color)}.selected:not(:disabled):focus{color:var(--_selected-focus-icon-color)}.selected:not(:disabled):active{color:var(--_selected-pressed-icon-color)}/*# sourceMappingURL=standard-styles.css.map */
`;class ur extends st{}ur.styles=[rs,os],customElements.define("ew-icon-button",ur);const ss=tt`:host{--_leading-space: var(--md-filled-text-field-leading-space, 16px);--_trailing-space: var(--md-filled-text-field-trailing-space, 16px);--_top-space: var(--md-filled-text-field-top-space, 16px);--_bottom-space: var(--md-filled-text-field-bottom-space, 16px);--_input-text-prefix-trailing-space: var(--md-filled-text-field-input-text-prefix-trailing-space, 2px);--_input-text-suffix-leading-space: var(--md-filled-text-field-input-text-suffix-leading-space, 2px);--_with-label-top-space: var(--md-filled-text-field-with-label-top-space, 8px);--_with-label-bottom-space: var(--md-filled-text-field-with-label-bottom-space, 8px);--_focus-caret-color: var(--md-filled-text-field-focus-caret-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-color: var(--md-filled-text-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_active-indicator-height: var(--md-filled-text-field-active-indicator-height, 1px);--_caret-color: var(--md-filled-text-field-caret-color, var(--md-sys-color-primary, #6750a4));--_container-color: var(--md-filled-text-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_container-shape-start-start: var( --md-filled-text-field-container-shape-start-start, var(--md-filled-text-field-container-shape, 4px) );--_container-shape-start-end: var( --md-filled-text-field-container-shape-start-end, var(--md-filled-text-field-container-shape, 4px) );--_container-shape-end-end: var( --md-filled-text-field-container-shape-end-end, var(--md-filled-text-field-container-shape, 0px) );--_container-shape-end-start: var( --md-filled-text-field-container-shape-end-start, var(--md-filled-text-field-container-shape, 0px) );--_disabled-active-indicator-color: var(--md-filled-text-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-active-indicator-height: var(--md-filled-text-field-disabled-active-indicator-height, 1px);--_disabled-active-indicator-opacity: var(--md-filled-text-field-disabled-active-indicator-opacity, 0.38);--_disabled-container-color: var(--md-filled-text-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity: var(--md-filled-text-field-disabled-container-opacity, 0.04);--_disabled-input-text-color: var(--md-filled-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-input-text-opacity: var(--md-filled-text-field-disabled-input-text-opacity, 0.38);--_disabled-label-text-color: var(--md-filled-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-text-field-disabled-label-text-opacity, 0.38);--_disabled-leading-icon-color: var(--md-filled-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-icon-opacity: var(--md-filled-text-field-disabled-leading-icon-opacity, 0.38);--_disabled-supporting-text-color: var(--md-filled-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity: var(--md-filled-text-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-icon-color: var(--md-filled-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-icon-opacity: var(--md-filled-text-field-disabled-trailing-icon-opacity, 0.38);--_error-active-indicator-color: var(--md-filled-text-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-active-indicator-color: var(--md-filled-text-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-caret-color: var(--md-filled-text-field-error-focus-caret-color, var(--md-sys-color-error, #b3261e));--_error-focus-input-text-color: var(--md-filled-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-label-text-color: var(--md-filled-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-icon-color: var(--md-filled-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-supporting-text-color: var(--md-filled-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-icon-color: var(--md-filled-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_error-hover-active-indicator-color: var(--md-filled-text-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-input-text-color: var(--md-filled-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color: var(--md-filled-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-icon-color: var(--md-filled-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-state-layer-color: var(--md-filled-text-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-state-layer-opacity: var(--md-filled-text-field-error-hover-state-layer-opacity, 0.08);--_error-hover-supporting-text-color: var(--md-filled-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-icon-color: var(--md-filled-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_error-input-text-color: var(--md-filled-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_error-label-text-color: var(--md-filled-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-icon-color: var(--md-filled-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-supporting-text-color: var(--md-filled-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-icon-color: var(--md-filled-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_focus-active-indicator-color: var(--md-filled-text-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_focus-active-indicator-height: var(--md-filled-text-field-focus-active-indicator-height, 3px);--_focus-input-text-color: var(--md-filled-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color: var(--md-filled-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-icon-color: var(--md-filled-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-supporting-text-color: var(--md-filled-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-icon-color: var(--md-filled-text-field-focus-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-active-indicator-color: var(--md-filled-text-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-active-indicator-height: var(--md-filled-text-field-hover-active-indicator-height, 1px);--_hover-input-text-color: var(--md-filled-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-filled-text-field-hover-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-leading-icon-color: var(--md-filled-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-filled-text-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-filled-text-field-hover-state-layer-opacity, 0.08);--_hover-supporting-text-color: var(--md-filled-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-icon-color: var(--md-filled-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-color: var(--md-filled-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_input-text-font: var(--md-filled-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_input-text-line-height: var(--md-filled-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_input-text-placeholder-color: var(--md-filled-text-field-input-text-placeholder-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-prefix-color: var(--md-filled-text-field-input-text-prefix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-size: var(--md-filled-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_input-text-suffix-color: var(--md-filled-text-field-input-text-suffix-color, var(--md-sys-color-on-surface-variant, #49454f));--_input-text-weight: var(--md-filled-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_label-text-color: var(--md-filled-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font: var(--md-filled-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-filled-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height: var(--md-filled-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size: var(--md-filled-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size: var(--md-filled-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight: var(--md-filled-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-icon-color: var(--md-filled-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-icon-size: var(--md-filled-text-field-leading-icon-size, 24px);--_supporting-text-color: var(--md-filled-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font: var(--md-filled-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-line-height: var(--md-filled-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size: var(--md-filled-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-weight: var(--md-filled-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_trailing-icon-color: var(--md-filled-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-icon-size: var(--md-filled-text-field-trailing-icon-size, 24px);--md-filled-field-active-indicator-color: var(--_active-indicator-color);--md-filled-field-active-indicator-height: var(--_active-indicator-height);--md-filled-field-bottom-space: var(--_bottom-space);--md-filled-field-container-color: var(--_container-color);--md-filled-field-container-shape-end-end: var(--_container-shape-end-end);--md-filled-field-container-shape-end-start: var(--_container-shape-end-start);--md-filled-field-container-shape-start-end: var(--_container-shape-start-end);--md-filled-field-container-shape-start-start: var(--_container-shape-start-start);--md-filled-field-content-color: var(--_input-text-color);--md-filled-field-content-font: var(--_input-text-font);--md-filled-field-content-line-height: var(--_input-text-line-height);--md-filled-field-content-size: var(--_input-text-size);--md-filled-field-content-weight: var(--_input-text-weight);--md-filled-field-disabled-active-indicator-color: var(--_disabled-active-indicator-color);--md-filled-field-disabled-active-indicator-height: var(--_disabled-active-indicator-height);--md-filled-field-disabled-active-indicator-opacity: var(--_disabled-active-indicator-opacity);--md-filled-field-disabled-container-color: var(--_disabled-container-color);--md-filled-field-disabled-container-opacity: var(--_disabled-container-opacity);--md-filled-field-disabled-content-color: var(--_disabled-input-text-color);--md-filled-field-disabled-content-opacity: var(--_disabled-input-text-opacity);--md-filled-field-disabled-label-text-color: var(--_disabled-label-text-color);--md-filled-field-disabled-label-text-opacity: var(--_disabled-label-text-opacity);--md-filled-field-disabled-leading-content-color: var(--_disabled-leading-icon-color);--md-filled-field-disabled-leading-content-opacity: var(--_disabled-leading-icon-opacity);--md-filled-field-disabled-supporting-text-color: var(--_disabled-supporting-text-color);--md-filled-field-disabled-supporting-text-opacity: var(--_disabled-supporting-text-opacity);--md-filled-field-disabled-trailing-content-color: var(--_disabled-trailing-icon-color);--md-filled-field-disabled-trailing-content-opacity: var(--_disabled-trailing-icon-opacity);--md-filled-field-error-active-indicator-color: var(--_error-active-indicator-color);--md-filled-field-error-content-color: var(--_error-input-text-color);--md-filled-field-error-focus-active-indicator-color: var(--_error-focus-active-indicator-color);--md-filled-field-error-focus-content-color: var(--_error-focus-input-text-color);--md-filled-field-error-focus-label-text-color: var(--_error-focus-label-text-color);--md-filled-field-error-focus-leading-content-color: var(--_error-focus-leading-icon-color);--md-filled-field-error-focus-supporting-text-color: var(--_error-focus-supporting-text-color);--md-filled-field-error-focus-trailing-content-color: var(--_error-focus-trailing-icon-color);--md-filled-field-error-hover-active-indicator-color: var(--_error-hover-active-indicator-color);--md-filled-field-error-hover-content-color: var(--_error-hover-input-text-color);--md-filled-field-error-hover-label-text-color: var(--_error-hover-label-text-color);--md-filled-field-error-hover-leading-content-color: var(--_error-hover-leading-icon-color);--md-filled-field-error-hover-state-layer-color: var(--_error-hover-state-layer-color);--md-filled-field-error-hover-state-layer-opacity: var(--_error-hover-state-layer-opacity);--md-filled-field-error-hover-supporting-text-color: var(--_error-hover-supporting-text-color);--md-filled-field-error-hover-trailing-content-color: var(--_error-hover-trailing-icon-color);--md-filled-field-error-label-text-color: var(--_error-label-text-color);--md-filled-field-error-leading-content-color: var(--_error-leading-icon-color);--md-filled-field-error-supporting-text-color: var(--_error-supporting-text-color);--md-filled-field-error-trailing-content-color: var(--_error-trailing-icon-color);--md-filled-field-focus-active-indicator-color: var(--_focus-active-indicator-color);--md-filled-field-focus-active-indicator-height: var(--_focus-active-indicator-height);--md-filled-field-focus-content-color: var(--_focus-input-text-color);--md-filled-field-focus-label-text-color: var(--_focus-label-text-color);--md-filled-field-focus-leading-content-color: var(--_focus-leading-icon-color);--md-filled-field-focus-supporting-text-color: var(--_focus-supporting-text-color);--md-filled-field-focus-trailing-content-color: var(--_focus-trailing-icon-color);--md-filled-field-hover-active-indicator-color: var(--_hover-active-indicator-color);--md-filled-field-hover-active-indicator-height: var(--_hover-active-indicator-height);--md-filled-field-hover-content-color: var(--_hover-input-text-color);--md-filled-field-hover-label-text-color: var(--_hover-label-text-color);--md-filled-field-hover-leading-content-color: var(--_hover-leading-icon-color);--md-filled-field-hover-state-layer-color: var(--_hover-state-layer-color);--md-filled-field-hover-state-layer-opacity: var(--_hover-state-layer-opacity);--md-filled-field-hover-supporting-text-color: var(--_hover-supporting-text-color);--md-filled-field-hover-trailing-content-color: var(--_hover-trailing-icon-color);--md-filled-field-label-text-color: var(--_label-text-color);--md-filled-field-label-text-font: var(--_label-text-font);--md-filled-field-label-text-line-height: var(--_label-text-line-height);--md-filled-field-label-text-populated-line-height: var(--_label-text-populated-line-height);--md-filled-field-label-text-populated-size: var(--_label-text-populated-size);--md-filled-field-label-text-size: var(--_label-text-size);--md-filled-field-label-text-weight: var(--_label-text-weight);--md-filled-field-leading-content-color: var(--_leading-icon-color);--md-filled-field-leading-space: var(--_leading-space);--md-filled-field-supporting-text-color: var(--_supporting-text-color);--md-filled-field-supporting-text-font: var(--_supporting-text-font);--md-filled-field-supporting-text-line-height: var(--_supporting-text-line-height);--md-filled-field-supporting-text-size: var(--_supporting-text-size);--md-filled-field-supporting-text-weight: var(--_supporting-text-weight);--md-filled-field-top-space: var(--_top-space);--md-filled-field-trailing-content-color: var(--_trailing-icon-color);--md-filled-field-trailing-space: var(--_trailing-space);--md-filled-field-with-label-bottom-space: var(--_with-label-bottom-space);--md-filled-field-with-label-top-space: var(--_with-label-top-space)}/*# sourceMappingURL=filled-styles.css.map */
`;class Y extends J{constructor(){super(...arguments),this.disabled=!1,this.error=!1,this.focused=!1,this.label="",this.populated=!1,this.required=!1,this.resizable=!1,this.supportingText="",this.errorText="",this.count=-1,this.max=-1,this.hasStart=!1,this.hasEnd=!1,this.isAnimating=!1,this.refreshErrorAlert=!1,this.disableTransitions=!1}get counterText(){const e=this.count??-1,t=this.max??-1;return e<0||t<=0?"":`${e} / ${t}`}get supportingOrErrorText(){return this.error&&this.errorText?this.errorText:this.supportingText}reannounceError(){this.refreshErrorAlert=!0}update(e){e.has("disabled")&&e.get("disabled")!==void 0&&(this.disableTransitions=!0),this.disabled&&this.focused&&(e.set("focused",!0),this.focused=!1),this.animateLabelIfNeeded({wasFocused:e.get("focused"),wasPopulated:e.get("populated")}),super.update(e)}render(){var s,n,d;const e=this.renderLabel(!0),t=this.renderLabel(!1),r=(s=this.renderOutline)==null?void 0:s.call(this,e),o={disabled:this.disabled,"disable-transitions":this.disableTransitions,error:this.error&&!this.disabled,focused:this.focused,"with-start":this.hasStart,"with-end":this.hasEnd,populated:this.populated,resizable:this.resizable,required:this.required,"no-label":!this.label};return R`
      <div class="field ${bt(o)}">
        <div class="container-overflow">
          ${(n=this.renderBackground)==null?void 0:n.call(this)} ${(d=this.renderIndicator)==null?void 0:d.call(this)} ${r}
          <div class="container">
            <div class="start">
              <slot name="start"></slot>
            </div>
            <div class="middle">
              <div class="label-wrapper">
                ${t} ${r?L:e}
              </div>
              <div class="content">
                <slot></slot>
              </div>
            </div>
            <div class="end">
              <slot name="end"></slot>
            </div>
          </div>
        </div>
        ${this.renderSupportingText()}
      </div>
    `}updated(e){(e.has("supportingText")||e.has("errorText")||e.has("count")||e.has("max"))&&this.updateSlottedAriaDescribedBy(),this.refreshErrorAlert&&requestAnimationFrame(()=>{this.refreshErrorAlert=!1}),this.disableTransitions&&requestAnimationFrame(()=>{this.disableTransitions=!1})}renderSupportingText(){const{supportingOrErrorText:e,counterText:t}=this;if(!e&&!t)return L;const r=R`<span>${e}</span>`,o=t?R`<span class="counter">${t}</span>`:L,s=this.error&&this.errorText&&!this.refreshErrorAlert;return R`
      <div class="supporting-text" role=${s?"alert":L}>${r}${o}</div>
      <slot
        name="aria-describedby"
        @slotchange=${this.updateSlottedAriaDescribedBy}></slot>
    `}updateSlottedAriaDescribedBy(){for(const e of this.slottedAriaDescribedBy)Yr(R`${this.supportingOrErrorText} ${this.counterText}`,e),e.setAttribute("hidden","")}renderLabel(e){if(!this.label)return L;let t;t=e?this.focused||this.populated||this.isAnimating:!this.focused&&!this.populated&&!this.isAnimating;const r={hidden:!t,floating:e,resting:!e},o=`${this.label}${this.required?"*":""}`;return R`
      <span class="label ${bt(r)}" aria-hidden=${!t}
        >${o}</span
      >
    `}animateLabelIfNeeded({wasFocused:e,wasPopulated:t}){var r,o,s;this.label&&(e??(e=this.focused),t??(t=this.populated),(e||t)!==(this.focused||this.populated)&&(this.isAnimating=!0,(r=this.labelAnimation)==null||r.cancel(),this.labelAnimation=(o=this.floatingLabelEl)==null?void 0:o.animate(this.getLabelKeyframes(),{duration:150,easing:ue.STANDARD}),(s=this.labelAnimation)==null||s.addEventListener("finish",()=>{this.isAnimating=!1})))}getLabelKeyframes(){const{floatingLabelEl:e,restingLabelEl:t}=this;if(!e||!t)return[];const{x:r,y:o,height:s}=e.getBoundingClientRect(),{x:n,y:d,height:f}=t.getBoundingClientRect(),h=e.scrollWidth,p=t.scrollWidth,_=p/h,b=`translateX(${n-r}px) translateY(${d-o+Math.round((f-s*_)/2)}px) scale(${_})`,g="translateX(0) translateY(0) scale(1)",B=t.clientWidth,k=p>B?B/_+"px":"";return this.focused||this.populated?[{transform:b,width:k},{transform:g,width:k}]:[{transform:g,width:k},{transform:b,width:k}]}getSurfacePositionClientRect(){return this.containerEl.getBoundingClientRect()}}v([E({type:Boolean})],Y.prototype,"disabled",void 0),v([E({type:Boolean})],Y.prototype,"error",void 0),v([E({type:Boolean})],Y.prototype,"focused",void 0),v([E()],Y.prototype,"label",void 0),v([E({type:Boolean})],Y.prototype,"populated",void 0),v([E({type:Boolean})],Y.prototype,"required",void 0),v([E({type:Boolean})],Y.prototype,"resizable",void 0),v([E({attribute:"supporting-text"})],Y.prototype,"supportingText",void 0),v([E({attribute:"error-text"})],Y.prototype,"errorText",void 0),v([E({type:Number})],Y.prototype,"count",void 0),v([E({type:Number})],Y.prototype,"max",void 0),v([E({type:Boolean,attribute:"has-start"})],Y.prototype,"hasStart",void 0),v([E({type:Boolean,attribute:"has-end"})],Y.prototype,"hasEnd",void 0),v([qt({slot:"aria-describedby"})],Y.prototype,"slottedAriaDescribedBy",void 0),v([W()],Y.prototype,"isAnimating",void 0),v([W()],Y.prototype,"refreshErrorAlert",void 0),v([W()],Y.prototype,"disableTransitions",void 0),v([ht(".label.floating")],Y.prototype,"floatingLabelEl",void 0),v([ht(".label.resting")],Y.prototype,"restingLabelEl",void 0),v([ht(".container")],Y.prototype,"containerEl",void 0);class as extends Y{renderBackground(){return R`
      <div class="background"></div>
      <div class="state-layer"></div>
    `}renderIndicator(){return R`<div class="active-indicator"></div>`}}const ns=tt`@layer styles{:host{--_active-indicator-color: var(--md-filled-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_active-indicator-height: var(--md-filled-field-active-indicator-height, 1px);--_bottom-space: var(--md-filled-field-bottom-space, 16px);--_container-color: var(--md-filled-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_container-shape-start-start: var( --md-filled-field-container-shape-start-start, var(--md-filled-field-container-shape, 4px) );--_container-shape-start-end: var( --md-filled-field-container-shape-start-end, var(--md-filled-field-container-shape, 4px) );--_container-shape-end-end: var( --md-filled-field-container-shape-end-end, var(--md-filled-field-container-shape, 0px) );--_container-shape-end-start: var( --md-filled-field-container-shape-end-start, var(--md-filled-field-container-shape, 0px) );--_content-color: var(--md-filled-field-content-color, var(--md-sys-color-on-surface, #1d1b20));--_content-font: var(--md-filled-field-content-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_content-line-height: var(--md-filled-field-content-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_content-size: var(--md-filled-field-content-size, var(--md-sys-typescale-body-large-size, 1rem));--_content-weight: var(--md-filled-field-content-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_disabled-active-indicator-color: var(--md-filled-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-active-indicator-height: var(--md-filled-field-disabled-active-indicator-height, 1px);--_disabled-active-indicator-opacity: var(--md-filled-field-disabled-active-indicator-opacity, 0.38);--_disabled-container-color: var(--md-filled-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-opacity: var(--md-filled-field-disabled-container-opacity, 0.04);--_disabled-content-color: var(--md-filled-field-disabled-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-content-opacity: var(--md-filled-field-disabled-content-opacity, 0.38);--_disabled-label-text-color: var(--md-filled-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-field-disabled-label-text-opacity, 0.38);--_disabled-leading-content-color: var(--md-filled-field-disabled-leading-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-content-opacity: var(--md-filled-field-disabled-leading-content-opacity, 0.38);--_disabled-supporting-text-color: var(--md-filled-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-supporting-text-opacity: var(--md-filled-field-disabled-supporting-text-opacity, 0.38);--_disabled-trailing-content-color: var(--md-filled-field-disabled-trailing-content-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-trailing-content-opacity: var(--md-filled-field-disabled-trailing-content-opacity, 0.38);--_error-active-indicator-color: var(--md-filled-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-content-color: var(--md-filled-field-error-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-focus-active-indicator-color: var(--md-filled-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_error-focus-content-color: var(--md-filled-field-error-focus-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-label-text-color: var(--md-filled-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-leading-content-color: var(--md-filled-field-error-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-focus-supporting-text-color: var(--md-filled-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-focus-trailing-content-color: var(--md-filled-field-error-focus-trailing-content-color, var(--md-sys-color-error, #b3261e));--_error-hover-active-indicator-color: var(--md-filled-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-content-color: var(--md-filled-field-error-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-label-text-color: var(--md-filled-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_error-hover-leading-content-color: var(--md-filled-field-error-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-hover-state-layer-color: var(--md-filled-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_error-hover-state-layer-opacity: var(--md-filled-field-error-hover-state-layer-opacity, 0.08);--_error-hover-supporting-text-color: var(--md-filled-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-hover-trailing-content-color: var(--md-filled-field-error-hover-trailing-content-color, var(--md-sys-color-on-error-container, #410e0b));--_error-label-text-color: var(--md-filled-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_error-leading-content-color: var(--md-filled-field-error-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_error-supporting-text-color: var(--md-filled-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_error-trailing-content-color: var(--md-filled-field-error-trailing-content-color, var(--md-sys-color-error, #b3261e));--_focus-active-indicator-color: var(--md-filled-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_focus-active-indicator-height: var(--md-filled-field-focus-active-indicator-height, 3px);--_focus-content-color: var(--md-filled-field-focus-content-color, var(--md-sys-color-on-surface, #1d1b20));--_focus-label-text-color: var(--md-filled-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_focus-leading-content-color: var(--md-filled-field-focus-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-supporting-text-color: var(--md-filled-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_focus-trailing-content-color: var(--md-filled-field-focus-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-active-indicator-color: var(--md-filled-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-active-indicator-height: var(--md-filled-field-hover-active-indicator-height, 1px);--_hover-content-color: var(--md-filled-field-hover-content-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-filled-field-hover-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-leading-content-color: var(--md-filled-field-hover-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-state-layer-color: var(--md-filled-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-filled-field-hover-state-layer-opacity, 0.08);--_hover-supporting-text-color: var(--md-filled-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_hover-trailing-content-color: var(--md-filled-field-hover-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-color: var(--md-filled-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_label-text-font: var(--md-filled-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-filled-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_label-text-populated-line-height: var(--md-filled-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_label-text-populated-size: var(--md-filled-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_label-text-size: var(--md-filled-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_label-text-weight: var(--md-filled-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_leading-content-color: var(--md-filled-field-leading-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_leading-space: var(--md-filled-field-leading-space, 16px);--_supporting-text-color: var(--md-filled-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_supporting-text-font: var(--md-filled-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_supporting-text-leading-space: var(--md-filled-field-supporting-text-leading-space, 16px);--_supporting-text-line-height: var(--md-filled-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_supporting-text-size: var(--md-filled-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_supporting-text-top-space: var(--md-filled-field-supporting-text-top-space, 4px);--_supporting-text-trailing-space: var(--md-filled-field-supporting-text-trailing-space, 16px);--_supporting-text-weight: var(--md-filled-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_top-space: var(--md-filled-field-top-space, 16px);--_trailing-content-color: var(--md-filled-field-trailing-content-color, var(--md-sys-color-on-surface-variant, #49454f));--_trailing-space: var(--md-filled-field-trailing-space, 16px);--_with-label-bottom-space: var(--md-filled-field-with-label-bottom-space, 8px);--_with-label-top-space: var(--md-filled-field-with-label-top-space, 8px)}.background,.state-layer{border-radius:inherit;inset:0;pointer-events:none;position:absolute}.background{background:var(--_container-color)}.state-layer{visibility:hidden}.field:not(.disabled):hover .state-layer{visibility:visible}.label.floating{position:absolute;top:var(--_with-label-top-space)}.field:not(.with-start) .label-wrapper{margin-inline-start:var(--_leading-space)}.field:not(.with-end) .label-wrapper{margin-inline-end:var(--_trailing-space)}.active-indicator{inset:auto 0 0 0;pointer-events:none;position:absolute;width:100%;z-index:1}.active-indicator::before,.active-indicator::after{border-bottom:var(--_active-indicator-height) solid var(--_active-indicator-color);inset:auto 0 0 0;content:"";position:absolute;width:100%}.active-indicator::after{opacity:0;transition:opacity 150ms cubic-bezier(0.2, 0, 0, 1)}.focused .active-indicator::after{opacity:1}.field:not(.with-start) .content ::slotted(*){padding-inline-start:var(--_leading-space)}.field:not(.with-end) .content ::slotted(*){padding-inline-end:var(--_trailing-space)}.field:not(.no-label) .content ::slotted(:not(textarea)){padding-bottom:var(--_with-label-bottom-space);padding-top:calc(var(--_with-label-top-space) + var(--_label-text-populated-line-height))}.field:not(.no-label) .content ::slotted(textarea){margin-bottom:var(--_with-label-bottom-space);margin-top:calc(var(--_with-label-top-space) + var(--_label-text-populated-line-height))}:hover .active-indicator::before{border-bottom-color:var(--_hover-active-indicator-color);border-bottom-width:var(--_hover-active-indicator-height)}.active-indicator::after{border-bottom-color:var(--_focus-active-indicator-color);border-bottom-width:var(--_focus-active-indicator-height)}:hover .state-layer{background:var(--_hover-state-layer-color);opacity:var(--_hover-state-layer-opacity)}.disabled .active-indicator::before{border-bottom-color:var(--_disabled-active-indicator-color);border-bottom-width:var(--_disabled-active-indicator-height);opacity:var(--_disabled-active-indicator-opacity)}.disabled .background{background:var(--_disabled-container-color);opacity:var(--_disabled-container-opacity)}.error .active-indicator::before{border-bottom-color:var(--_error-active-indicator-color)}.error:hover .active-indicator::before{border-bottom-color:var(--_error-hover-active-indicator-color)}.error:hover .state-layer{background:var(--_error-hover-state-layer-color);opacity:var(--_error-hover-state-layer-opacity)}.error .active-indicator::after{border-bottom-color:var(--_error-focus-active-indicator-color)}.resizable .container{bottom:var(--_focus-active-indicator-height);clip-path:inset(var(--_focus-active-indicator-height) 0 0 0)}.resizable .container>*{top:var(--_focus-active-indicator-height)}}@layer hcm{@media(forced-colors: active){.disabled .active-indicator::before{border-color:GrayText;opacity:1}}}/*# sourceMappingURL=filled-styles.css.map */
`,ls=tt`:host{display:inline-flex;resize:both}.field{display:flex;flex:1;flex-direction:column;writing-mode:horizontal-tb;max-width:100%}.container-overflow{border-start-start-radius:var(--_container-shape-start-start);border-start-end-radius:var(--_container-shape-start-end);border-end-end-radius:var(--_container-shape-end-end);border-end-start-radius:var(--_container-shape-end-start);display:flex;height:100%;position:relative}.container{align-items:center;border-radius:inherit;display:flex;flex:1;max-height:100%;min-height:100%;min-width:min-content;position:relative}.field,.container-overflow{resize:inherit}.resizable:not(.disabled) .container{resize:inherit;overflow:hidden}.disabled{pointer-events:none}@layer styles{.start,.middle,.end{display:flex;box-sizing:border-box;height:100%;position:relative}.start{color:var(--_leading-content-color)}.end{color:var(--_trailing-content-color)}.start,.end{align-items:center;justify-content:center}.with-start .start,.with-end .end{min-width:48px}.with-start .start{margin-inline-end:4px}.with-end .end{margin-inline-start:4px}.middle{align-items:stretch;align-self:baseline;flex:1}.content{color:var(--_content-color);display:flex;flex:1;opacity:0;transition:opacity 83ms cubic-bezier(0.2, 0, 0, 1)}.no-label .content,.focused .content,.populated .content{opacity:1;transition-delay:67ms}:is(.disabled,.disable-transitions) .content{transition:none}.content ::slotted(*){all:unset;color:currentColor;font-family:var(--_content-font);font-size:var(--_content-size);line-height:var(--_content-line-height);font-weight:var(--_content-weight);width:100%;overflow-wrap:revert;white-space:revert}.content ::slotted(:not(textarea)){padding-top:var(--_top-space);padding-bottom:var(--_bottom-space)}.content ::slotted(textarea){margin-top:var(--_top-space);margin-bottom:var(--_bottom-space)}:hover .content{color:var(--_hover-content-color)}:hover .start{color:var(--_hover-leading-content-color)}:hover .end{color:var(--_hover-trailing-content-color)}.focused .content{color:var(--_focus-content-color)}.focused .start{color:var(--_focus-leading-content-color)}.focused .end{color:var(--_focus-trailing-content-color)}.disabled .content{color:var(--_disabled-content-color)}.disabled.no-label .content,.disabled.focused .content,.disabled.populated .content{opacity:var(--_disabled-content-opacity)}.disabled .start{color:var(--_disabled-leading-content-color);opacity:var(--_disabled-leading-content-opacity)}.disabled .end{color:var(--_disabled-trailing-content-color);opacity:var(--_disabled-trailing-content-opacity)}.error .content{color:var(--_error-content-color)}.error .start{color:var(--_error-leading-content-color)}.error .end{color:var(--_error-trailing-content-color)}.error:hover .content{color:var(--_error-hover-content-color)}.error:hover .start{color:var(--_error-hover-leading-content-color)}.error:hover .end{color:var(--_error-hover-trailing-content-color)}.error.focused .content{color:var(--_error-focus-content-color)}.error.focused .start{color:var(--_error-focus-leading-content-color)}.error.focused .end{color:var(--_error-focus-trailing-content-color)}}@layer hcm{@media(forced-colors: active){.disabled :is(.start,.content,.end){color:GrayText;opacity:1}}}@layer styles{.label{box-sizing:border-box;color:var(--_label-text-color);overflow:hidden;max-width:100%;text-overflow:ellipsis;white-space:nowrap;z-index:1;font-family:var(--_label-text-font);font-size:var(--_label-text-size);line-height:var(--_label-text-line-height);font-weight:var(--_label-text-weight);width:min-content}.label-wrapper{inset:0;pointer-events:none;position:absolute}.label.resting{position:absolute;top:var(--_top-space)}.label.floating{font-size:var(--_label-text-populated-size);line-height:var(--_label-text-populated-line-height);transform-origin:top left}.label.hidden{opacity:0}.no-label .label{display:none}.label-wrapper{inset:0;position:absolute;text-align:initial}:hover .label{color:var(--_hover-label-text-color)}.focused .label{color:var(--_focus-label-text-color)}.disabled .label{color:var(--_disabled-label-text-color)}.disabled .label:not(.hidden){opacity:var(--_disabled-label-text-opacity)}.error .label{color:var(--_error-label-text-color)}.error:hover .label{color:var(--_error-hover-label-text-color)}.error.focused .label{color:var(--_error-focus-label-text-color)}}@layer hcm{@media(forced-colors: active){.disabled .label:not(.hidden){color:GrayText;opacity:1}}}@layer styles{.supporting-text{color:var(--_supporting-text-color);display:flex;font-family:var(--_supporting-text-font);font-size:var(--_supporting-text-size);line-height:var(--_supporting-text-line-height);font-weight:var(--_supporting-text-weight);gap:16px;justify-content:space-between;padding-inline-start:var(--_supporting-text-leading-space);padding-inline-end:var(--_supporting-text-trailing-space);padding-top:var(--_supporting-text-top-space)}.supporting-text :nth-child(2){flex-shrink:0}:hover .supporting-text{color:var(--_hover-supporting-text-color)}.focus .supporting-text{color:var(--_focus-supporting-text-color)}.disabled .supporting-text{color:var(--_disabled-supporting-text-color);opacity:var(--_disabled-supporting-text-opacity)}.error .supporting-text{color:var(--_error-supporting-text-color)}.error:hover .supporting-text{color:var(--_error-hover-supporting-text-color)}.error.focus .supporting-text{color:var(--_error-focus-supporting-text-color)}}@layer hcm{@media(forced-colors: active){.disabled .supporting-text{color:GrayText;opacity:1}}}/*# sourceMappingURL=shared-styles.css.map */
`;let vi=class extends as{};vi.styles=[ls,ns],vi=v([si("md-filled-field")],vi);const ds={},mr=Xr(class extends Jr{constructor(i){if(super(i),i.type!==Wt.PROPERTY&&i.type!==Wt.ATTRIBUTE&&i.type!==Wt.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!(e=>e.strings===void 0)(i))throw Error("`live` bindings can only contain a single expression")}render(i){return i}update(i,[e]){if(e===me||e===L)return e;const t=i.element,r=i.name;if(i.type===Wt.PROPERTY){if(e===t[r])return me}else if(i.type===Wt.BOOLEAN_ATTRIBUTE){if(!!e===t.hasAttribute(r))return me}else if(i.type===Wt.ATTRIBUTE&&t.getAttribute(r)===e+"")return me;return((o,s=ds)=>{o._$AH=s})(i),e}}),so="important",cs=" !"+so,ti=Xr(class extends Jr{constructor(i){var e;if(super(i),i.type!==Wt.ATTRIBUTE||i.name!=="style"||((e=i.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(i){return Object.keys(i).reduce((e,t)=>{const r=i[t];return r==null?e:e+`${t=t.includes("-")?t:t.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(i,[e]){const{style:t}=i.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?t.removeProperty(r):t[r]=null);for(const r in e){const o=e[r];if(o!=null){this.ft.add(r);const s=typeof o=="string"&&o.endsWith(cs);r.includes("-")||s?t.setProperty(r,s?o.slice(0,-11):o,s?so:""):t[r]=o}}return me}}),hs={fromAttribute:i=>i??"",toAttribute:i=>i||null},ei=Symbol("onReportValidity"),Pe=Symbol("privateCleanupFormListeners"),Fe=Symbol("privateDoNotReportInvalid"),Me=Symbol("privateIsSelfReportingValidity"),Ne=Symbol("privateCallOnReportValidity");function ao(i){var e,t,r;class o extends i{constructor(...n){super(...n),this[e]=new AbortController,this[t]=!1,this[r]=!1,this.addEventListener("invalid",d=>{!this[Fe]&&d.isTrusted&&this.addEventListener("invalid",()=>{this[Ne](d)},{once:!0})},{capture:!0})}checkValidity(){this[Fe]=!0;const n=super.checkValidity();return this[Fe]=!1,n}reportValidity(){this[Me]=!0;const n=super.reportValidity();return n&&this[Ne](null),this[Me]=!1,n}[(e=Pe,t=Fe,r=Me,Ne)](n){const d=n==null?void 0:n.defaultPrevented;d||(this[ei](n),!d&&(n!=null&&n.defaultPrevented)&&(this[Me]||function(f,h){if(!f)return!0;let p;for(const _ of f.elements)if(_.matches(":invalid")){p=_;break}return p===h}(this[mt].form,this))&&this.focus())}[ei](n){throw new Error("Implement [onReportValidity]")}formAssociatedCallback(n){super.formAssociatedCallback&&super.formAssociatedCallback(n),this[Pe].abort(),n&&(this[Pe]=new AbortController,function(d,f,h,p){const _=function(k){if(!gi.has(k)){const x=new EventTarget;gi.set(k,x);for(const I of["reportValidity","requestSubmit"]){const T=k[I];k[I]=function(){x.dispatchEvent(new Event("before"));const w=Reflect.apply(T,this,arguments);return x.dispatchEvent(new Event("after")),w}}}return gi.get(k)}(f);let b,g=!1,B=!1;_.addEventListener("before",()=>{B=!0,b=new AbortController,g=!1,d.addEventListener("invalid",()=>{g=!0},{signal:b.signal})},{signal:p}),_.addEventListener("after",()=>{B=!1,b==null||b.abort(),g||h()},{signal:p}),f.addEventListener("submit",()=>{B||h()},{signal:p})}(this,n,()=>{this[Ne](null)},this[Pe].signal))}}return o}const gi=new WeakMap;class ps extends ji{computeValidity({state:e,renderedControl:t}){let r=t;pe(e)&&!r?(r=this.inputControl||document.createElement("input"),this.inputControl=r):r||(r=this.textAreaControl||document.createElement("textarea"),this.textAreaControl=r);const o=pe(e)?r:null;if(o&&(o.type=e.type),r.value!==e.value&&(r.value=e.value),r.required=e.required,o){const s=e;s.pattern?o.pattern=s.pattern:o.removeAttribute("pattern"),s.min?o.min=s.min:o.removeAttribute("min"),s.max?o.max=s.max:o.removeAttribute("max"),s.step?o.step=s.step:o.removeAttribute("step")}return(e.minLength??-1)>-1?r.setAttribute("minlength",String(e.minLength)):r.removeAttribute("minlength"),(e.maxLength??-1)>-1?r.setAttribute("maxlength",String(e.maxLength)):r.removeAttribute("maxlength"),{validity:r.validity,validationMessage:r.validationMessage}}equals({state:e},{state:t}){const r=e.type===t.type&&e.value===t.value&&e.required===t.required&&e.minLength===t.minLength&&e.maxLength===t.maxLength;return pe(e)&&pe(t)?r&&e.pattern===t.pattern&&e.min===t.min&&e.max===t.max&&e.step===t.step:r}copy({state:e}){return{state:pe(e)?this.copyInput(e):this.copyTextArea(e),renderedControl:null}}copyInput(e){const{type:t,pattern:r,min:o,max:s,step:n}=e;return{...this.copySharedState(e),type:t,pattern:r,min:o,max:s,step:n}}copyTextArea(e){return{...this.copySharedState(e),type:e.type}}copySharedState({value:e,required:t,minLength:r,maxLength:o}){return{value:e,required:t,minLength:r,maxLength:o}}}function pe(i){return i.type!=="textarea"}const fs=ao(Gi(Ki(ai(J))));class F extends fs{constructor(){super(...arguments),this.error=!1,this.errorText="",this.label="",this.required=!1,this.value="",this.prefixText="",this.suffixText="",this.hasLeadingIcon=!1,this.hasTrailingIcon=!1,this.supportingText="",this.textDirection="",this.rows=2,this.cols=20,this.inputMode="",this.max="",this.maxLength=-1,this.min="",this.minLength=-1,this.noSpinner=!1,this.pattern="",this.placeholder="",this.readOnly=!1,this.multiple=!1,this.step="",this.type="text",this.autocomplete="",this.dirty=!1,this.focused=!1,this.nativeError=!1,this.nativeErrorText=""}get selectionDirection(){return this.getInputOrTextarea().selectionDirection}set selectionDirection(e){this.getInputOrTextarea().selectionDirection=e}get selectionEnd(){return this.getInputOrTextarea().selectionEnd}set selectionEnd(e){this.getInputOrTextarea().selectionEnd=e}get selectionStart(){return this.getInputOrTextarea().selectionStart}set selectionStart(e){this.getInputOrTextarea().selectionStart=e}get valueAsNumber(){const e=this.getInput();return e?e.valueAsNumber:NaN}set valueAsNumber(e){const t=this.getInput();t&&(t.valueAsNumber=e,this.value=t.value)}get valueAsDate(){const e=this.getInput();return e?e.valueAsDate:null}set valueAsDate(e){const t=this.getInput();t&&(t.valueAsDate=e,this.value=t.value)}get hasError(){return this.error||this.nativeError}select(){this.getInputOrTextarea().select()}setRangeText(...e){this.getInputOrTextarea().setRangeText(...e),this.value=this.getInputOrTextarea().value}setSelectionRange(e,t,r){this.getInputOrTextarea().setSelectionRange(e,t,r)}stepDown(e){const t=this.getInput();t&&(t.stepDown(e),this.value=t.value)}stepUp(e){const t=this.getInput();t&&(t.stepUp(e),this.value=t.value)}reset(){this.dirty=!1,this.value=this.getAttribute("value")??"",this.nativeError=!1,this.nativeErrorText=""}attributeChangedCallback(e,t,r){e==="value"&&this.dirty||super.attributeChangedCallback(e,t,r)}render(){const e={disabled:this.disabled,error:!this.disabled&&this.hasError,textarea:this.type==="textarea","no-spinner":this.noSpinner};return R`
      <span class="text-field ${bt(e)}">
        ${this.renderField()}
      </span>
    `}updated(e){const t=this.getInputOrTextarea().value;this.value!==t&&(this.value=t)}renderField(){return ni`<${this.fieldTag}
      class="field"
      count=${this.value.length}
      ?disabled=${this.disabled}
      ?error=${this.hasError}
      error-text=${this.getErrorText()}
      ?focused=${this.focused}
      ?has-end=${this.hasTrailingIcon}
      ?has-start=${this.hasLeadingIcon}
      label=${this.label}
      max=${this.maxLength}
      ?populated=${!!this.value}
      ?required=${this.required}
      ?resizable=${this.type==="textarea"}
      supporting-text=${this.supportingText}
    >
      ${this.renderLeadingIcon()}
      ${this.renderInputOrTextarea()}
      ${this.renderTrailingIcon()}
      <div id="description" slot="aria-describedby"></div>
    </${this.fieldTag}>`}renderLeadingIcon(){return R`
      <span class="icon leading" slot="start">
        <slot name="leading-icon" @slotchange=${this.handleIconChange}></slot>
      </span>
    `}renderTrailingIcon(){return R`
      <span class="icon trailing" slot="end">
        <slot name="trailing-icon" @slotchange=${this.handleIconChange}></slot>
      </span>
    `}renderInputOrTextarea(){const e={direction:this.textDirection},t=this.ariaLabel||this.label||L,r=this.autocomplete,o=(this.maxLength??-1)>-1,s=(this.minLength??-1)>-1;if(this.type==="textarea")return R`
        <textarea
          class="input"
          style=${ti(e)}
          aria-describedby="description"
          aria-invalid=${this.hasError}
          aria-label=${t}
          autocomplete=${r||L}
          ?disabled=${this.disabled}
          maxlength=${o?this.maxLength:L}
          minlength=${s?this.minLength:L}
          placeholder=${this.placeholder||L}
          ?readonly=${this.readOnly}
          ?required=${this.required}
          rows=${this.rows}
          cols=${this.cols}
          .value=${mr(this.value)}
          @change=${this.redispatchEvent}
          @focus=${this.handleFocusChange}
          @blur=${this.handleFocusChange}
          @input=${this.handleInput}
          @select=${this.redispatchEvent}></textarea>
      `;const n=this.renderPrefix(),d=this.renderSuffix(),f=this.inputMode;return R`
      <div class="input-wrapper">
        ${n}
        <input
          class="input"
          style=${ti(e)}
          aria-describedby="description"
          aria-invalid=${this.hasError}
          aria-label=${t}
          autocomplete=${r||L}
          ?disabled=${this.disabled}
          inputmode=${f||L}
          max=${this.max||L}
          maxlength=${o?this.maxLength:L}
          min=${this.min||L}
          minlength=${s?this.minLength:L}
          pattern=${this.pattern||L}
          placeholder=${this.placeholder||L}
          ?readonly=${this.readOnly}
          ?required=${this.required}
          ?multiple=${this.multiple}
          step=${this.step||L}
          type=${this.type}
          .value=${mr(this.value)}
          @change=${this.redispatchEvent}
          @focus=${this.handleFocusChange}
          @blur=${this.handleFocusChange}
          @input=${this.handleInput}
          @select=${this.redispatchEvent} />
        ${d}
      </div>
    `}renderPrefix(){return this.renderAffix(this.prefixText,!1)}renderSuffix(){return this.renderAffix(this.suffixText,!0)}renderAffix(e,t){return e?R`<span class="${bt({suffix:t,prefix:!t})}">${e}</span>`:L}getErrorText(){return this.error?this.errorText:this.nativeErrorText}handleFocusChange(){var e;this.focused=((e=this.inputOrTextarea)==null?void 0:e.matches(":focus"))??!1}handleInput(e){this.dirty=!0,this.value=e.target.value}redispatchEvent(e){Vi(this,e)}getInputOrTextarea(){return this.inputOrTextarea||(this.connectedCallback(),this.scheduleUpdate()),this.isUpdatePending&&this.scheduleUpdate(),this.inputOrTextarea}getInput(){return this.type==="textarea"?null:this.getInputOrTextarea()}handleIconChange(){this.hasLeadingIcon=this.leadingIcons.length>0,this.hasTrailingIcon=this.trailingIcons.length>0}[ae](){return this.value}formResetCallback(){this.reset()}formStateRestoreCallback(e){this.value=e}focus(){this.getInputOrTextarea().focus()}[Re](){return new ps(()=>({state:this,renderedControl:this.inputOrTextarea}))}[Te](){return this.inputOrTextarea}[ei](e){var r;e==null||e.preventDefault();const t=this.getErrorText();this.nativeError=!!e,this.nativeErrorText=this.validationMessage,t===this.getErrorText()&&((r=this.field)==null||r.reannounceError())}}Xt(F),F.shadowRootOptions={...J.shadowRootOptions,delegatesFocus:!0},v([E({type:Boolean,reflect:!0})],F.prototype,"error",void 0),v([E({attribute:"error-text"})],F.prototype,"errorText",void 0),v([E()],F.prototype,"label",void 0),v([E({type:Boolean,reflect:!0})],F.prototype,"required",void 0),v([E()],F.prototype,"value",void 0),v([E({attribute:"prefix-text"})],F.prototype,"prefixText",void 0),v([E({attribute:"suffix-text"})],F.prototype,"suffixText",void 0),v([E({type:Boolean,attribute:"has-leading-icon"})],F.prototype,"hasLeadingIcon",void 0),v([E({type:Boolean,attribute:"has-trailing-icon"})],F.prototype,"hasTrailingIcon",void 0),v([E({attribute:"supporting-text"})],F.prototype,"supportingText",void 0),v([E({attribute:"text-direction"})],F.prototype,"textDirection",void 0),v([E({type:Number})],F.prototype,"rows",void 0),v([E({type:Number})],F.prototype,"cols",void 0),v([E({reflect:!0})],F.prototype,"inputMode",void 0),v([E()],F.prototype,"max",void 0),v([E({type:Number})],F.prototype,"maxLength",void 0),v([E()],F.prototype,"min",void 0),v([E({type:Number})],F.prototype,"minLength",void 0),v([E({type:Boolean,attribute:"no-spinner"})],F.prototype,"noSpinner",void 0),v([E()],F.prototype,"pattern",void 0),v([E({reflect:!0,converter:hs})],F.prototype,"placeholder",void 0),v([E({type:Boolean,reflect:!0})],F.prototype,"readOnly",void 0),v([E({type:Boolean,reflect:!0})],F.prototype,"multiple",void 0),v([E()],F.prototype,"step",void 0),v([E({reflect:!0})],F.prototype,"type",void 0),v([E({reflect:!0})],F.prototype,"autocomplete",void 0),v([W()],F.prototype,"dirty",void 0),v([W()],F.prototype,"focused",void 0),v([W()],F.prototype,"nativeError",void 0),v([W()],F.prototype,"nativeErrorText",void 0),v([ht(".input")],F.prototype,"inputOrTextarea",void 0),v([ht(".field")],F.prototype,"field",void 0),v([qt({slot:"leading-icon"})],F.prototype,"leadingIcons",void 0),v([qt({slot:"trailing-icon"})],F.prototype,"trailingIcons",void 0);class us extends F{constructor(){super(...arguments),this.fieldTag=Ft`md-filled-field`}}const ms=tt`:host{display:inline-flex;outline:none;resize:both;-webkit-tap-highlight-color:rgba(0,0,0,0)}.text-field,.field{width:100%}.text-field{display:inline-flex}.field{cursor:text}.disabled .field{cursor:default}.text-field,.textarea .field{resize:inherit}.icon{color:currentColor;display:flex;fill:currentColor}.icon ::slotted(*){display:flex}[hasstart] .icon.leading{font-size:var(--_leading-icon-size);height:var(--_leading-icon-size);width:var(--_leading-icon-size)}[hasend] .icon.trailing{font-size:var(--_trailing-icon-size);height:var(--_trailing-icon-size);width:var(--_trailing-icon-size)}.input-wrapper{display:flex}.input-wrapper>*{all:inherit;padding:0}.input{caret-color:var(--_caret-color);overflow-x:hidden;text-align:inherit}.input::placeholder{color:currentColor;opacity:1}.input::-webkit-calendar-picker-indicator{display:none}.input::-webkit-search-decoration,.input::-webkit-search-cancel-button{display:none}@media(forced-colors: active){.input{background:none}}.no-spinner .input::-webkit-inner-spin-button,.no-spinner .input::-webkit-outer-spin-button{display:none}.no-spinner .input[type=number]{-moz-appearance:textfield}:focus-within .input{caret-color:var(--_focus-caret-color)}.error:focus-within .input{caret-color:var(--_error-focus-caret-color)}.text-field:not(.disabled) .prefix{color:var(--_input-text-prefix-color)}.text-field:not(.disabled) .suffix{color:var(--_input-text-suffix-color)}.text-field:not(.disabled) .input::placeholder{color:var(--_input-text-placeholder-color)}.prefix,.suffix{text-wrap:nowrap;width:min-content}.prefix{padding-inline-end:var(--_input-text-prefix-trailing-space)}.suffix{padding-inline-start:var(--_input-text-suffix-leading-space)}/*# sourceMappingURL=shared-styles.css.map */
`;class vr extends us{constructor(){super(...arguments),this.fieldTag=Ft`md-filled-field`}}vr.styles=[ms,ss],customElements.define("ew-filled-text-field",vr);class vs extends J{connectedCallback(){super.connectedCallback(),this.setAttribute("aria-hidden","true")}render(){return R`<span class="shadow"></span>`}}const gs=tt`:host{display:flex;pointer-events:none}:host,.shadow,.shadow::before,.shadow::after{border-radius:inherit;inset:0;position:absolute;transition-duration:inherit;transition-property:inherit;transition-timing-function:inherit}.shadow::before,.shadow::after{content:"";transition-property:box-shadow,opacity;--_level: var(--md-elevation-level, 0);--_shadow-color: var(--md-elevation-shadow-color, var(--md-sys-color-shadow, #000))}.shadow::before{box-shadow:0px calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 3,1) + 2*clamp(0,var(--_level) - 4,1))) calc(1px*(2*clamp(0,var(--_level),1) + clamp(0,var(--_level) - 2,1) + clamp(0,var(--_level) - 4,1))) 0px var(--_shadow-color);opacity:.3}.shadow::after{box-shadow:0px calc(1px*(clamp(0,var(--_level),1) + clamp(0,var(--_level) - 1,1) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(3*clamp(0,var(--_level),2) + 2*clamp(0,var(--_level) - 2,3))) calc(1px*(clamp(0,var(--_level),4) + 2*clamp(0,var(--_level) - 4,1))) var(--_shadow-color);opacity:.15}/*# sourceMappingURL=elevation-styles.css.map */
`;let yi=class extends vs{};yi.styles=[gs],yi=v([si("md-elevation")],yi);const gr=function(i,e){return new CustomEvent("close-menu",{bubbles:!0,composed:!0,detail:{initiator:i,reason:e,itemPath:[i]}})},Pi={SPACE:"Space",ENTER:"Enter"},ys="click-selection",bs="keydown",_s={ESCAPE:"Escape",SPACE:Pi.SPACE,ENTER:Pi.ENTER};function no(i){return Object.values(_s).some(e=>e===i)}function Fi(i,e){const t=new Event("md-contains",{bubbles:!0,composed:!0});let r=[];const o=s=>{r=s.composedPath()};return e.addEventListener("md-contains",o),i.dispatchEvent(t),e.removeEventListener("md-contains",o),r.length>0}const Xe="none",xs="list-root",Mi="first-item",lo="last-item",ws="end-start",Es="start-start";class ks{constructor(e,t){this.host=e,this.getProperties=t,this.surfaceStylesInternal={display:"none"},this.lastValues={isOpen:!1},this.host.addController(this)}get surfaceStyles(){return this.surfaceStylesInternal}async position(){const{surfaceEl:e,anchorEl:t,anchorCorner:r,surfaceCorner:o,positioning:s,xOffset:n,yOffset:d,repositionStrategy:f}=this.getProperties(),h=r.toLowerCase().trim(),p=o.toLowerCase().trim();if(!e||!t)return;const _=window.innerWidth,b=window.innerHeight,g=document.createElement("div");g.style.opacity="0",g.style.position="fixed",g.style.display="block",g.style.inset="0",document.body.appendChild(g);const B=g.getBoundingClientRect();g.remove();const k=window.innerHeight-B.bottom,x=window.innerWidth-B.right;this.surfaceStylesInternal={display:"block",opacity:"0"},this.host.requestUpdate(),await this.host.updateComplete,e.popover&&e.isConnected&&e.showPopover();const I=e.getSurfacePositionClientRect?e.getSurfacePositionClientRect():e.getBoundingClientRect(),T=t.getSurfacePositionClientRect?t.getSurfacePositionClientRect():t.getBoundingClientRect(),[w,C]=p.split("-"),[z,S]=h.split("-"),P=getComputedStyle(e).direction==="ltr";let{blockInset:O,blockOutOfBoundsCorrection:$,surfaceBlockProperty:D}=this.calculateBlock({surfaceRect:I,anchorRect:T,anchorBlock:z,surfaceBlock:w,yOffset:d,positioning:s,windowInnerHeight:b,blockScrollbarHeight:k});if($){const q=w==="start"?"end":"start",G=z==="start"?"end":"start",pt=this.calculateBlock({surfaceRect:I,anchorRect:T,anchorBlock:G,surfaceBlock:q,yOffset:d,positioning:s,windowInnerHeight:b,blockScrollbarHeight:k});$>pt.blockOutOfBoundsCorrection&&(O=pt.blockInset,$=pt.blockOutOfBoundsCorrection,D=pt.surfaceBlockProperty)}let{inlineInset:K,inlineOutOfBoundsCorrection:at,surfaceInlineProperty:St}=this.calculateInline({surfaceRect:I,anchorRect:T,anchorInline:S,surfaceInline:C,xOffset:n,positioning:s,isLTR:P,windowInnerWidth:_,inlineScrollbarWidth:x});if(at){const q=C==="start"?"end":"start",G=S==="start"?"end":"start",pt=this.calculateInline({surfaceRect:I,anchorRect:T,anchorInline:G,surfaceInline:q,xOffset:n,positioning:s,isLTR:P,windowInnerWidth:_,inlineScrollbarWidth:x});Math.abs(at)>Math.abs(pt.inlineOutOfBoundsCorrection)&&(K=pt.inlineInset,at=pt.inlineOutOfBoundsCorrection,St=pt.surfaceInlineProperty)}f==="move"&&(O-=$,K-=at),this.surfaceStylesInternal={display:"block",opacity:"1",[D]:`${O}px`,[St]:`${K}px`},f==="resize"&&($&&(this.surfaceStylesInternal.height=I.height-$+"px"),at&&(this.surfaceStylesInternal.width=I.width-at+"px")),this.host.requestUpdate()}calculateBlock(e){const{surfaceRect:t,anchorRect:r,anchorBlock:o,surfaceBlock:s,yOffset:n,positioning:d,windowInnerHeight:f,blockScrollbarHeight:h}=e,p=d==="fixed"||d==="document"?1:0,_=d==="document"?1:0,b=s==="start"?1:0,g=s==="end"?1:0,B=(o!==s?1:0)*r.height+n,k=b*r.top+g*(f-r.bottom-h);return{blockInset:p*k+_*(b*window.scrollY-g*window.scrollY)+B,blockOutOfBoundsCorrection:Math.abs(Math.min(0,f-k-B-t.height)),surfaceBlockProperty:s==="start"?"inset-block-start":"inset-block-end"}}calculateInline(e){const{isLTR:t,surfaceInline:r,anchorInline:o,anchorRect:s,surfaceRect:n,xOffset:d,positioning:f,windowInnerWidth:h,inlineScrollbarWidth:p}=e,_=f==="fixed"||f==="document"?1:0,b=f==="document"?1:0,g=t?1:0,B=t?0:1,k=r==="start"?1:0,x=r==="end"?1:0,I=(o!==r?1:0)*s.width+d,T=g*(k*s.left+x*(h-s.right-p))+B*(k*(h-s.right-p)+x*s.left);let w=r==="start"?"inset-inline-start":"inset-inline-end";return f!=="document"&&f!=="fixed"||(w=r==="start"&&t||r==="end"&&!t?"left":"right"),{inlineInset:_*T+I+b*(g*(k*window.scrollX-x*window.scrollX)+B*(x*window.scrollX-k*window.scrollX)),inlineOutOfBoundsCorrection:Math.abs(Math.min(0,h-T-I-n.width)),surfaceInlineProperty:w}}hostUpdate(){this.onUpdate()}hostUpdated(){this.onUpdate()}async onUpdate(){const e=this.getProperties();let t=!1;for(const[n,d]of Object.entries(e))if(t=t||d!==this.lastValues[n],t)break;const r=this.lastValues.isOpen!==e.isOpen,o=!!e.anchorEl,s=!!e.surfaceEl;t&&o&&s&&(this.lastValues.isOpen=e.isOpen,e.isOpen?(this.lastValues=e,await this.position(),e.onOpen()):r&&(await e.beforeClose(),this.close(),e.onClose()))}close(){this.surfaceStylesInternal={display:"none"},this.host.requestUpdate();const e=this.getProperties().surfaceEl;e!=null&&e.popover&&(e!=null&&e.isConnected)&&e.hidePopover()}}const yr=0,Ct=1,As=2;class Ss{constructor(e){this.getProperties=e,this.typeaheadRecords=[],this.typaheadBuffer="",this.cancelTypeaheadTimeout=0,this.isTypingAhead=!1,this.lastActiveRecord=null,this.onKeydown=t=>{this.isTypingAhead?this.typeahead(t):this.beginTypeahead(t)},this.endTypeahead=()=>{this.isTypingAhead=!1,this.typaheadBuffer="",this.typeaheadRecords=[]}}get items(){return this.getProperties().getItems()}get active(){return this.getProperties().active}beginTypeahead(e){this.active&&(e.code==="Space"||e.code==="Enter"||e.code.startsWith("Arrow")||e.code==="Escape"||(this.isTypingAhead=!0,this.typeaheadRecords=this.items.map((t,r)=>[r,t,t.typeaheadText.trim().toLowerCase()]),this.lastActiveRecord=this.typeaheadRecords.find(t=>t[Ct].tabIndex===0)??null,this.lastActiveRecord&&(this.lastActiveRecord[Ct].tabIndex=-1),this.typeahead(e)))}typeahead(e){if(e.defaultPrevented)return;if(clearTimeout(this.cancelTypeaheadTimeout),e.code==="Enter"||e.code.startsWith("Arrow")||e.code==="Escape")return this.endTypeahead(),void(this.lastActiveRecord&&(this.lastActiveRecord[Ct].tabIndex=-1));e.code==="Space"&&e.preventDefault(),this.cancelTypeaheadTimeout=setTimeout(this.endTypeahead,this.getProperties().typeaheadBufferTime),this.typaheadBuffer+=e.key.toLowerCase();const t=this.lastActiveRecord?this.lastActiveRecord[yr]:-1,r=this.typeaheadRecords.length,o=f=>(f[yr]+r-t)%r,s=this.typeaheadRecords.filter(f=>!f[Ct].disabled&&f[As].startsWith(this.typaheadBuffer)).sort((f,h)=>o(f)-o(h));if(s.length===0)return clearTimeout(this.cancelTypeaheadTimeout),this.lastActiveRecord&&(this.lastActiveRecord[Ct].tabIndex=-1),void this.endTypeahead();const n=this.typaheadBuffer.length===1;let d;d=this.lastActiveRecord===s[0]&&n?s[1]??s[0]:s[0],this.lastActiveRecord&&(this.lastActiveRecord[Ct].tabIndex=-1),this.lastActiveRecord=d,d[Ct].tabIndex=0,d[Ct].focus()}}const co=new Set([rt.ArrowDown,rt.ArrowUp,rt.Home,rt.End]),Rs=new Set([rt.ArrowLeft,rt.ArrowRight,...co]);class Q extends J{get openDirection(){return this.menuCorner.split("-")[0]==="start"?"DOWN":"UP"}get anchorElement(){return this.anchor?this.getRootNode().querySelector(`#${this.anchor}`):this.currentAnchorElement}set anchorElement(e){this.currentAnchorElement=e,this.requestUpdate("anchorElement")}constructor(){super(),this.anchor="",this.positioning="absolute",this.quick=!1,this.hasOverflow=!1,this.open=!1,this.xOffset=0,this.yOffset=0,this.typeaheadDelay=200,this.anchorCorner=ws,this.menuCorner=Es,this.stayOpenOnOutsideClick=!1,this.stayOpenOnFocusout=!1,this.skipRestoreFocus=!1,this.defaultFocus=Mi,this.typeaheadActive=!0,this.isSubmenu=!1,this.pointerPath=[],this.isRepositioning=!1,this.openCloseAnimationSignal=qo(),this.listController=new io({isItem:e=>e.hasAttribute("md-menu-item"),getPossibleItems:()=>this.slotItems,isRtl:()=>getComputedStyle(this).direction==="rtl",deactivateItem:e=>{e.selected=!1,e.tabIndex=-1},activateItem:e=>{e.selected=!0,e.tabIndex=0},isNavigableKey:e=>this.isSubmenu?e===(getComputedStyle(this).direction==="rtl"?rt.ArrowLeft:rt.ArrowRight)||co.has(e):Rs.has(e)}),this.lastFocusedElement=null,this.typeaheadController=new Ss(()=>({getItems:()=>this.items,typeaheadBufferTime:this.typeaheadDelay,active:this.typeaheadActive})),this.currentAnchorElement=null,this.internals=this.attachInternals(),this.menuPositionController=new ks(this,()=>({anchorCorner:this.anchorCorner,surfaceCorner:this.menuCorner,surfaceEl:this.surfaceEl,anchorEl:this.anchorElement,positioning:this.positioning==="popover"?"document":this.positioning,isOpen:this.open,xOffset:this.xOffset,yOffset:this.yOffset,onOpen:this.onOpened,beforeClose:this.beforeClose,onClose:this.onClosed,repositionStrategy:this.hasOverflow&&this.positioning!=="popover"?"move":"resize"})),this.onWindowResize=()=>{this.isRepositioning||this.positioning!=="document"&&this.positioning!=="fixed"&&this.positioning!=="popover"||(this.isRepositioning=!0,this.reposition(),this.isRepositioning=!1)},this.handleFocusout=async e=>{const t=this.anchorElement;if(this.stayOpenOnFocusout||!this.open||this.pointerPath.includes(t))return;if(e.relatedTarget){if(Fi(e.relatedTarget,this)||this.pointerPath.length!==0&&Fi(e.relatedTarget,t))return}else if(this.pointerPath.includes(this))return;const r=this.skipRestoreFocus;this.skipRestoreFocus=!0,this.close(),await this.updateComplete,this.skipRestoreFocus=r},this.onOpened=async()=>{this.lastFocusedElement=function(o=document){var n;let s=o.activeElement;for(;s&&((n=s==null?void 0:s.shadowRoot)!=null&&n.activeElement);)s=s.shadowRoot.activeElement;return s}();const e=this.items,t=ye(e);t&&this.defaultFocus!==Xe&&(t.item.tabIndex=-1);let r=!this.quick;switch(this.quick?this.dispatchEvent(new Event("opening")):r=!!await this.animateOpen(),this.defaultFocus){case Mi:const o=Zi(e);o&&(o.tabIndex=0,o.focus(),await o.updateComplete);break;case lo:const s=eo(e);s&&(s.tabIndex=0,s.focus(),await s.updateComplete);break;case xs:this.focus()}r||this.dispatchEvent(new Event("opened"))},this.beforeClose=async()=>{var e,t;this.open=!1,this.skipRestoreFocus||((t=(e=this.lastFocusedElement)==null?void 0:e.focus)==null||t.call(e)),this.quick||await this.animateClose()},this.onClosed=()=>{this.quick&&(this.dispatchEvent(new Event("closing")),this.dispatchEvent(new Event("closed")))},this.onWindowPointerdown=e=>{this.pointerPath=e.composedPath()},this.onDocumentClick=e=>{if(!this.open)return;const t=e.composedPath();this.stayOpenOnOutsideClick||t.includes(this)||t.includes(this.anchorElement)||(this.open=!1)},this.internals.role="menu",this.addEventListener("keydown",this.handleKeydown),this.addEventListener("keydown",this.captureKeydown,{capture:!0}),this.addEventListener("focusout",this.handleFocusout)}get items(){return this.listController.items}willUpdate(e){e.has("open")&&(this.open?this.removeAttribute("aria-hidden"):this.setAttribute("aria-hidden","true"))}update(e){e.has("open")&&(this.open?this.setUpGlobalEventListeners():this.cleanUpGlobalEventListeners()),e.has("positioning")&&this.positioning==="popover"&&!this.showPopover&&(this.positioning="fixed"),super.update(e)}connectedCallback(){super.connectedCallback(),this.open&&this.setUpGlobalEventListeners()}disconnectedCallback(){super.disconnectedCallback(),this.cleanUpGlobalEventListeners()}render(){return this.renderSurface()}renderSurface(){return R`
      <div
        class="menu ${bt(this.getSurfaceClasses())}"
        style=${ti(this.menuPositionController.surfaceStyles)}
        popover=${this.positioning==="popover"?"manual":L}>
        ${this.renderElevation()}
        <div class="items">
          <div class="item-padding"> ${this.renderMenuItems()} </div>
        </div>
      </div>
    `}renderMenuItems(){return R`<slot
      @close-menu=${this.onCloseMenu}
      @deactivate-items=${this.onDeactivateItems}
      @request-activation=${this.onRequestActivation}
      @deactivate-typeahead=${this.handleDeactivateTypeahead}
      @activate-typeahead=${this.handleActivateTypeahead}
      @stay-open-on-focusout=${this.handleStayOpenOnFocusout}
      @close-on-focusout=${this.handleCloseOnFocusout}
      @slotchange=${this.listController.onSlotchange}></slot>`}renderElevation(){return R`<md-elevation part="elevation"></md-elevation>`}getSurfaceClasses(){return{open:this.open,fixed:this.positioning==="fixed","has-overflow":this.hasOverflow}}captureKeydown(e){e.target===this&&!e.defaultPrevented&&no(e.code)&&(e.preventDefault(),this.close()),this.typeaheadController.onKeydown(e)}async animateOpen(){const e=this.surfaceEl,t=this.slotEl;if(!e||!t)return!0;const r=this.openDirection;this.dispatchEvent(new Event("opening")),e.classList.toggle("animating",!0);const o=this.openCloseAnimationSignal.start(),s=e.offsetHeight,n=r==="UP",d=this.items,f=250/d.length,h=e.animate([{height:"0px"},{height:`${s}px`}],{duration:500,easing:ue.EMPHASIZED}),p=t.animate([{transform:n?`translateY(-${s}px)`:""},{transform:""}],{duration:500,easing:ue.EMPHASIZED}),_=e.animate([{opacity:0},{opacity:1}],50),b=[];for(let k=0;k<d.length;k++){const x=d[n?d.length-1-k:k],I=x.animate([{opacity:0},{opacity:1}],{duration:250,delay:f*k});x.classList.toggle("md-menu-hidden",!0),I.addEventListener("finish",()=>{x.classList.toggle("md-menu-hidden",!1)}),b.push([x,I])}let g=k=>{};const B=new Promise(k=>{g=k});return o.addEventListener("abort",()=>{h.cancel(),p.cancel(),_.cancel(),b.forEach(([k,x])=>{k.classList.toggle("md-menu-hidden",!1),x.cancel()}),g(!0)}),h.addEventListener("finish",()=>{e.classList.toggle("animating",!1),this.openCloseAnimationSignal.finish(),g(!1)}),await B}animateClose(){let e,t;const r=new Promise((x,I)=>{e=x,t=I}),o=this.surfaceEl,s=this.slotEl;if(!o||!s)return t(),r;const n=this.openDirection==="UP";this.dispatchEvent(new Event("closing")),o.classList.toggle("animating",!0);const d=this.openCloseAnimationSignal.start(),f=o.offsetHeight,h=this.items,p=150,_=50/h.length,b=o.animate([{height:`${f}px`},{height:.35*f+"px"}],{duration:p,easing:ue.EMPHASIZED_ACCELERATE}),g=s.animate([{transform:""},{transform:n?`translateY(-${.65*f}px)`:""}],{duration:p,easing:ue.EMPHASIZED_ACCELERATE}),B=o.animate([{opacity:1},{opacity:0}],{duration:50,delay:100}),k=[];for(let x=0;x<h.length;x++){const I=h[n?x:h.length-1-x],T=I.animate([{opacity:1},{opacity:0}],{duration:50,delay:50+_*x});T.addEventListener("finish",()=>{I.classList.toggle("md-menu-hidden",!0)}),k.push([I,T])}return d.addEventListener("abort",()=>{b.cancel(),g.cancel(),B.cancel(),k.forEach(([x,I])=>{I.cancel(),x.classList.toggle("md-menu-hidden",!1)}),t()}),b.addEventListener("finish",()=>{o.classList.toggle("animating",!1),k.forEach(([x])=>{x.classList.toggle("md-menu-hidden",!1)}),this.openCloseAnimationSignal.finish(),this.dispatchEvent(new Event("closed")),e(!0)}),r}handleKeydown(e){this.pointerPath=[],this.listController.handleKeydown(e)}setUpGlobalEventListeners(){document.addEventListener("click",this.onDocumentClick,{capture:!0}),window.addEventListener("pointerdown",this.onWindowPointerdown),document.addEventListener("resize",this.onWindowResize,{passive:!0}),window.addEventListener("resize",this.onWindowResize,{passive:!0})}cleanUpGlobalEventListeners(){document.removeEventListener("click",this.onDocumentClick,{capture:!0}),window.removeEventListener("pointerdown",this.onWindowPointerdown),document.removeEventListener("resize",this.onWindowResize),window.removeEventListener("resize",this.onWindowResize)}onCloseMenu(){this.close()}onDeactivateItems(e){e.stopPropagation(),this.listController.onDeactivateItems()}onRequestActivation(e){e.stopPropagation(),this.listController.onRequestActivation(e)}handleDeactivateTypeahead(e){e.stopPropagation(),this.typeaheadActive=!1}handleActivateTypeahead(e){e.stopPropagation(),this.typeaheadActive=!0}handleStayOpenOnFocusout(e){e.stopPropagation(),this.stayOpenOnFocusout=!0}handleCloseOnFocusout(e){e.stopPropagation(),this.stayOpenOnFocusout=!1}close(){this.open=!1,this.slotItems.forEach(e=>{var t;(t=e.close)==null||t.call(e)})}show(){this.open=!0}activateNextItem(){return this.listController.activateNextItem()??null}activatePreviousItem(){return this.listController.activatePreviousItem()??null}reposition(){this.open&&this.menuPositionController.position()}}v([ht(".menu")],Q.prototype,"surfaceEl",void 0),v([ht("slot")],Q.prototype,"slotEl",void 0),v([E()],Q.prototype,"anchor",void 0),v([E()],Q.prototype,"positioning",void 0),v([E({type:Boolean})],Q.prototype,"quick",void 0),v([E({type:Boolean,attribute:"has-overflow"})],Q.prototype,"hasOverflow",void 0),v([E({type:Boolean,reflect:!0})],Q.prototype,"open",void 0),v([E({type:Number,attribute:"x-offset"})],Q.prototype,"xOffset",void 0),v([E({type:Number,attribute:"y-offset"})],Q.prototype,"yOffset",void 0),v([E({type:Number,attribute:"typeahead-delay"})],Q.prototype,"typeaheadDelay",void 0),v([E({attribute:"anchor-corner"})],Q.prototype,"anchorCorner",void 0),v([E({attribute:"menu-corner"})],Q.prototype,"menuCorner",void 0),v([E({type:Boolean,attribute:"stay-open-on-outside-click"})],Q.prototype,"stayOpenOnOutsideClick",void 0),v([E({type:Boolean,attribute:"stay-open-on-focusout"})],Q.prototype,"stayOpenOnFocusout",void 0),v([E({type:Boolean,attribute:"skip-restore-focus"})],Q.prototype,"skipRestoreFocus",void 0),v([E({attribute:"default-focus"})],Q.prototype,"defaultFocus",void 0),v([qt({flatten:!0})],Q.prototype,"slotItems",void 0),v([W()],Q.prototype,"typeaheadActive",void 0);const Ts=tt`:host{--md-elevation-level: var(--md-menu-container-elevation, 2);--md-elevation-shadow-color: var(--md-menu-container-shadow-color, var(--md-sys-color-shadow, #000));min-width:112px;color:unset;display:contents}md-focus-ring{--md-focus-ring-shape: var(--md-menu-container-shape, 4px)}.menu{border-radius:var(--md-menu-container-shape, 4px);display:none;inset:auto;border:none;padding:0px;overflow:visible;background-color:rgba(0,0,0,0);color:inherit;opacity:0;z-index:20;position:absolute;user-select:none;max-height:inherit;height:inherit;min-width:inherit;max-width:inherit}.menu::backdrop{display:none}.fixed{position:fixed}.items{display:block;list-style-type:none;margin:0;outline:none;box-sizing:border-box;background-color:var(--md-menu-container-color, var(--md-sys-color-surface-container, #f3edf7));height:inherit;max-height:inherit;overflow:auto;min-width:inherit;max-width:inherit;border-radius:inherit}.item-padding{padding-block:8px}.has-overflow:not([popover]) .items{overflow:visible}.has-overflow.animating .items,.animating .items{overflow:hidden}.has-overflow.animating .items{pointer-events:none}.animating ::slotted(.md-menu-hidden){opacity:0}slot{display:block;height:inherit;max-height:inherit}::slotted(:is(md-divider,[role=separator])){margin:8px 0}@media(forced-colors: active){.menu{border-style:solid;border-color:CanvasText;border-width:1px}}/*# sourceMappingURL=menu-styles.css.map */
`;let bi=class extends Q{};bi.styles=[Ts],bi=v([si("md-menu")],bi);class Is extends ji{computeValidity(e){return this.selectControl||(this.selectControl=document.createElement("select")),Yr(R`<option value=${e.value}></option>`,this.selectControl),this.selectControl.value=e.value,this.selectControl.required=e.required,{validity:this.selectControl.validity,validationMessage:this.selectControl.validationMessage}}equals(e,t){return e.value===t.value&&e.required===t.required}copy({value:e,required:t}){return{value:e,required:t}}}var br;const He=Symbol("value"),Cs=ao(Gi(Ki(ai(J))));class V extends Cs{get value(){return this[He]}set value(e){this.lastUserSetValue=e,this.select(e)}get options(){var e;return((e=this.menu)==null?void 0:e.items)??[]}get selectedIndex(){const[e,t]=(this.getSelectedOptions()??[])[0]??[];return t??-1}set selectedIndex(e){this.lastUserSetSelectedIndex=e,this.selectIndex(e)}get selectedOptions(){return(this.getSelectedOptions()??[]).map(([e])=>e)}get hasError(){return this.error||this.nativeError}constructor(){super(),this.quick=!1,this.required=!1,this.errorText="",this.label="",this.supportingText="",this.error=!1,this.menuPositioning="popover",this.clampMenuWidth=!1,this.typeaheadDelay=200,this.hasLeadingIcon=!1,this.displayText="",this.menuAlign="start",this[br]="",this.lastUserSetValue=null,this.lastUserSetSelectedIndex=null,this.lastSelectedOption=null,this.lastSelectedOptionRecords=[],this.nativeError=!1,this.nativeErrorText="",this.focused=!1,this.open=!1,this.defaultFocus=Xe,this.prevOpen=this.open,this.selectWidth=0,this.addEventListener("focus",this.handleFocus.bind(this)),this.addEventListener("blur",this.handleBlur.bind(this))}select(e){const t=this.options.find(r=>r.value===e);t&&this.selectItem(t)}selectIndex(e){const t=this.options[e];t&&this.selectItem(t)}reset(){for(const e of this.options)e.selected=e.hasAttribute("selected");this.updateValueAndDisplayText(),this.nativeError=!1,this.nativeErrorText=""}[(br=He,ei)](e){var r;e==null||e.preventDefault();const t=this.getErrorText();this.nativeError=!!e,this.nativeErrorText=this.validationMessage,t===this.getErrorText()&&((r=this.field)==null||r.reannounceError())}update(e){if(this.hasUpdated||this.initUserSelection(),this.prevOpen!==this.open&&this.open){const t=this.getBoundingClientRect();this.selectWidth=t.width}this.prevOpen=this.open,super.update(e)}render(){return R`
      <span
        class="select ${bt(this.getRenderClasses())}"
        @focusout=${this.handleFocusout}>
        ${this.renderField()} ${this.renderMenu()}
      </span>
    `}async firstUpdated(e){var t;await((t=this.menu)==null?void 0:t.updateComplete),this.lastSelectedOptionRecords.length||this.initUserSelection(),this.lastSelectedOptionRecords.length||this.options.length||setTimeout(()=>{this.updateValueAndDisplayText()}),super.firstUpdated(e)}getRenderClasses(){return{disabled:this.disabled,error:this.error,open:this.open}}renderField(){return ni`
      <${this.fieldTag}
          aria-haspopup="listbox"
          role="combobox"
          part="field"
          id="field"
          tabindex=${this.disabled?"-1":"0"}
          aria-label=${this.ariaLabel||L}
          aria-describedby="description"
          aria-expanded=${this.open?"true":"false"}
          aria-controls="listbox"
          class="field"
          label=${this.label}
          .focused=${this.focused||this.open}
          .populated=${!!this.displayText}
          .disabled=${this.disabled}
          .required=${this.required}
          .error=${this.hasError}
          ?has-start=${this.hasLeadingIcon}
          has-end
          supporting-text=${this.supportingText}
          error-text=${this.getErrorText()}
          @keydown=${this.handleKeydown}
          @click=${this.handleClick}>
         ${this.renderFieldContent()}
         <div id="description" slot="aria-describedby"></div>
      </${this.fieldTag}>`}renderFieldContent(){return[this.renderLeadingIcon(),this.renderLabel(),this.renderTrailingIcon()]}renderLeadingIcon(){return R`
      <span class="icon leading" slot="start">
        <slot name="leading-icon" @slotchange=${this.handleIconChange}></slot>
      </span>
    `}renderTrailingIcon(){return R`
      <span class="icon trailing" slot="end">
        <slot name="trailing-icon" @slotchange=${this.handleIconChange}>
          <svg height="5" viewBox="7 10 10 5" focusable="false">
            <polygon
              class="down"
              stroke="none"
              fill-rule="evenodd"
              points="7 10 12 15 17 10"></polygon>
            <polygon
              class="up"
              stroke="none"
              fill-rule="evenodd"
              points="7 15 12 10 17 15"></polygon>
          </svg>
        </slot>
      </span>
    `}renderLabel(){return R`<div id="label">${this.displayText||R`&nbsp;`}</div>`}renderMenu(){const e=this.label||this.ariaLabel;return R`<div class="menu-wrapper">
      <md-menu
        id="listbox"
        .defaultFocus=${this.defaultFocus}
        role="listbox"
        tabindex="-1"
        aria-label=${e||L}
        stay-open-on-focusout
        part="menu"
        exportparts="focus-ring: menu-focus-ring"
        anchor="field"
        style=${ti({"--__menu-min-width":`${this.selectWidth}px`,"--__menu-max-width":this.clampMenuWidth?`${this.selectWidth}px`:void 0})}
        .open=${this.open}
        .quick=${this.quick}
        .positioning=${this.menuPositioning}
        .typeaheadDelay=${this.typeaheadDelay}
        .anchorCorner=${this.menuAlign==="start"?"end-start":"end-end"}
        .menuCorner=${this.menuAlign==="start"?"start-start":"start-end"}
        @opening=${this.handleOpening}
        @opened=${this.redispatchEvent}
        @closing=${this.redispatchEvent}
        @closed=${this.handleClosed}
        @close-menu=${this.handleCloseMenu}
        @request-selection=${this.handleRequestSelection}
        @request-deselection=${this.handleRequestDeselection}>
        ${this.renderMenuContent()}
      </md-menu>
    </div>`}renderMenuContent(){return R`<slot></slot>`}handleKeydown(e){var o,s;if(this.open||this.disabled||!this.menu)return;const t=this.menu.typeaheadController,r=e.code==="Space"||e.code==="ArrowDown"||e.code==="ArrowUp"||e.code==="End"||e.code==="Home"||e.code==="Enter";if(!t.isTypingAhead&&r){switch(e.preventDefault(),this.open=!0,e.code){case"Space":case"ArrowDown":case"Enter":this.defaultFocus=Xe;break;case"End":this.defaultFocus=lo;break;case"ArrowUp":case"Home":this.defaultFocus=Mi}return}if(e.key.length===1){t.onKeydown(e),e.preventDefault();const{lastActiveRecord:n}=t;if(!n)return;(s=(o=this.labelEl)==null?void 0:o.setAttribute)==null||s.call(o,"aria-live","polite"),this.selectItem(n[Ct])&&this.dispatchInteractionEvents()}}handleClick(){this.open=!this.open}handleFocus(){this.focused=!0}handleBlur(){this.focused=!1}handleFocusout(e){e.relatedTarget&&Fi(e.relatedTarget,this)||(this.open=!1)}getSelectedOptions(){if(!this.menu)return this.lastSelectedOptionRecords=[],null;const e=this.menu.items;return this.lastSelectedOptionRecords=function(t){const r=[];for(let o=0;o<t.length;o++){const s=t[o];s.selected&&r.push([s,o])}return r}(e),this.lastSelectedOptionRecords}async getUpdateComplete(){var e;return await((e=this.menu)==null?void 0:e.updateComplete),super.getUpdateComplete()}updateValueAndDisplayText(){const e=this.getSelectedOptions()??[];let t=!1;if(e.length){const[r]=e[0];t=this.lastSelectedOption!==r,this.lastSelectedOption=r,this[He]=r.value,this.displayText=r.displayText}else t=this.lastSelectedOption!==null,this.lastSelectedOption=null,this[He]="",this.displayText="";return t}async handleOpening(e){var s,n,d;if((n=(s=this.labelEl)==null?void 0:s.removeAttribute)==null||n.call(s,"aria-live"),this.redispatchEvent(e),this.defaultFocus!==Xe)return;const t=this.menu.items,r=(d=ye(t))==null?void 0:d.item;let[o]=this.lastSelectedOptionRecords[0]??[null];r&&r!==o&&(r.tabIndex=-1),o=o??t[0],o&&(o.tabIndex=0,o.focus())}redispatchEvent(e){Vi(this,e)}handleClosed(e){this.open=!1,this.redispatchEvent(e)}handleCloseMenu(e){const t=e.detail.reason,r=e.detail.itemPath[0];this.open=!1;let o=!1;t.kind==="click-selection"||t.kind==="keydown"&&function(s){return Object.values(Pi).some(n=>n===s)}(t.key)?o=this.selectItem(r):(r.tabIndex=-1,r.blur()),o&&this.dispatchInteractionEvents()}selectItem(e){return(this.getSelectedOptions()??[]).forEach(([t])=>{e!==t&&(t.selected=!1)}),e.selected=!0,this.updateValueAndDisplayText()}handleRequestSelection(e){const t=e.target;this.lastSelectedOptionRecords.some(([r])=>r===t)||this.selectItem(t)}handleRequestDeselection(e){const t=e.target;this.lastSelectedOptionRecords.some(([r])=>r===t)&&this.updateValueAndDisplayText()}initUserSelection(){this.lastUserSetValue&&!this.lastSelectedOptionRecords.length?this.select(this.lastUserSetValue):this.lastUserSetSelectedIndex===null||this.lastSelectedOptionRecords.length?this.updateValueAndDisplayText():this.selectIndex(this.lastUserSetSelectedIndex)}handleIconChange(){this.hasLeadingIcon=this.leadingIcons.length>0}dispatchInteractionEvents(){this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0}))}getErrorText(){return this.error?this.errorText:this.nativeErrorText}[ae](){return this.value}formResetCallback(){this.reset()}formStateRestoreCallback(e){this.value=e}[Re](){return new Is(()=>this)}[Te](){return this.field}}Xt(V),V.shadowRootOptions={...J.shadowRootOptions,delegatesFocus:!0},v([E({type:Boolean})],V.prototype,"quick",void 0),v([E({type:Boolean})],V.prototype,"required",void 0),v([E({type:String,attribute:"error-text"})],V.prototype,"errorText",void 0),v([E()],V.prototype,"label",void 0),v([E({type:String,attribute:"supporting-text"})],V.prototype,"supportingText",void 0),v([E({type:Boolean,reflect:!0})],V.prototype,"error",void 0),v([E({attribute:"menu-positioning"})],V.prototype,"menuPositioning",void 0),v([E({type:Boolean,attribute:"clamp-menu-width"})],V.prototype,"clampMenuWidth",void 0),v([E({type:Number,attribute:"typeahead-delay"})],V.prototype,"typeaheadDelay",void 0),v([E({type:Boolean,attribute:"has-leading-icon"})],V.prototype,"hasLeadingIcon",void 0),v([E({attribute:"display-text"})],V.prototype,"displayText",void 0),v([E({attribute:"menu-align"})],V.prototype,"menuAlign",void 0),v([E()],V.prototype,"value",null),v([E({type:Number,attribute:"selected-index"})],V.prototype,"selectedIndex",null),v([W()],V.prototype,"nativeError",void 0),v([W()],V.prototype,"nativeErrorText",void 0),v([W()],V.prototype,"focused",void 0),v([W()],V.prototype,"open",void 0),v([W()],V.prototype,"defaultFocus",void 0),v([ht(".field")],V.prototype,"field",void 0),v([ht("md-menu")],V.prototype,"menu",void 0),v([ht("#label")],V.prototype,"labelEl",void 0),v([qt({slot:"leading-icon",flatten:!0})],V.prototype,"leadingIcons",void 0);class $s extends V{constructor(){super(...arguments),this.fieldTag=Ft`md-filled-field`}}const Bs=tt`:host{--_text-field-active-indicator-color: var(--md-filled-select-text-field-active-indicator-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-active-indicator-height: var(--md-filled-select-text-field-active-indicator-height, 1px);--_text-field-container-color: var(--md-filled-select-text-field-container-color, var(--md-sys-color-surface-container-highest, #e6e0e9));--_text-field-container-shape-start-start: var( --md-filled-select-text-field-container-shape-start-start, var( --md-filled-select-text-field-container-shape, 4px ) );--_text-field-container-shape-start-end: var( --md-filled-select-text-field-container-shape-start-end, var( --md-filled-select-text-field-container-shape, 4px ) );--_text-field-container-shape-end-end: var( --md-filled-select-text-field-container-shape-end-end, var( --md-filled-select-text-field-container-shape, 0px ) );--_text-field-container-shape-end-start: var( --md-filled-select-text-field-container-shape-end-start, var( --md-filled-select-text-field-container-shape, 0px ) );--_text-field-disabled-active-indicator-color: var(--md-filled-select-text-field-disabled-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-active-indicator-height: var(--md-filled-select-text-field-disabled-active-indicator-height, 1px);--_text-field-disabled-active-indicator-opacity: var(--md-filled-select-text-field-disabled-active-indicator-opacity, 0.38);--_text-field-disabled-container-color: var(--md-filled-select-text-field-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-container-opacity: var(--md-filled-select-text-field-disabled-container-opacity, 0.04);--_text-field-disabled-input-text-color: var(--md-filled-select-text-field-disabled-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-input-text-opacity: var(--md-filled-select-text-field-disabled-input-text-opacity, 0.38);--_text-field-disabled-label-text-color: var(--md-filled-select-text-field-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-label-text-opacity: var(--md-filled-select-text-field-disabled-label-text-opacity, 0.38);--_text-field-disabled-leading-icon-color: var(--md-filled-select-text-field-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-leading-icon-opacity: var(--md-filled-select-text-field-disabled-leading-icon-opacity, 0.38);--_text-field-disabled-supporting-text-color: var(--md-filled-select-text-field-disabled-supporting-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-supporting-text-opacity: var(--md-filled-select-text-field-disabled-supporting-text-opacity, 0.38);--_text-field-disabled-trailing-icon-color: var(--md-filled-select-text-field-disabled-trailing-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-disabled-trailing-icon-opacity: var(--md-filled-select-text-field-disabled-trailing-icon-opacity, 0.38);--_text-field-error-active-indicator-color: var(--md-filled-select-text-field-error-active-indicator-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-active-indicator-color: var(--md-filled-select-text-field-error-focus-active-indicator-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-input-text-color: var(--md-filled-select-text-field-error-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-focus-label-text-color: var(--md-filled-select-text-field-error-focus-label-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-leading-icon-color: var(--md-filled-select-text-field-error-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-focus-supporting-text-color: var(--md-filled-select-text-field-error-focus-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-focus-trailing-icon-color: var(--md-filled-select-text-field-error-focus-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_text-field-error-hover-active-indicator-color: var(--md-filled-select-text-field-error-hover-active-indicator-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-hover-input-text-color: var(--md-filled-select-text-field-error-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-hover-label-text-color: var(--md-filled-select-text-field-error-hover-label-text-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-hover-leading-icon-color: var(--md-filled-select-text-field-error-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-hover-state-layer-color: var(--md-filled-select-text-field-error-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-hover-state-layer-opacity: var(--md-filled-select-text-field-error-hover-state-layer-opacity, 0.08);--_text-field-error-hover-supporting-text-color: var(--md-filled-select-text-field-error-hover-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-hover-trailing-icon-color: var(--md-filled-select-text-field-error-hover-trailing-icon-color, var(--md-sys-color-on-error-container, #410e0b));--_text-field-error-input-text-color: var(--md-filled-select-text-field-error-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-error-label-text-color: var(--md-filled-select-text-field-error-label-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-leading-icon-color: var(--md-filled-select-text-field-error-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-error-supporting-text-color: var(--md-filled-select-text-field-error-supporting-text-color, var(--md-sys-color-error, #b3261e));--_text-field-error-trailing-icon-color: var(--md-filled-select-text-field-error-trailing-icon-color, var(--md-sys-color-error, #b3261e));--_text-field-focus-active-indicator-color: var(--md-filled-select-text-field-focus-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_text-field-focus-active-indicator-height: var(--md-filled-select-text-field-focus-active-indicator-height, 3px);--_text-field-focus-input-text-color: var(--md-filled-select-text-field-focus-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-focus-label-text-color: var(--md-filled-select-text-field-focus-label-text-color, var(--md-sys-color-primary, #6750a4));--_text-field-focus-leading-icon-color: var(--md-filled-select-text-field-focus-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-focus-supporting-text-color: var(--md-filled-select-text-field-focus-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-focus-trailing-icon-color: var(--md-filled-select-text-field-focus-trailing-icon-color, var(--md-sys-color-primary, #6750a4));--_text-field-hover-active-indicator-color: var(--md-filled-select-text-field-hover-active-indicator-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-active-indicator-height: var(--md-filled-select-text-field-hover-active-indicator-height, 1px);--_text-field-hover-input-text-color: var(--md-filled-select-text-field-hover-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-label-text-color: var(--md-filled-select-text-field-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-leading-icon-color: var(--md-filled-select-text-field-hover-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-hover-state-layer-color: var(--md-filled-select-text-field-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-hover-state-layer-opacity: var(--md-filled-select-text-field-hover-state-layer-opacity, 0.08);--_text-field-hover-supporting-text-color: var(--md-filled-select-text-field-hover-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-hover-trailing-icon-color: var(--md-filled-select-text-field-hover-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-input-text-color: var(--md-filled-select-text-field-input-text-color, var(--md-sys-color-on-surface, #1d1b20));--_text-field-input-text-font: var(--md-filled-select-text-field-input-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-input-text-line-height: var(--md-filled-select-text-field-input-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_text-field-input-text-size: var(--md-filled-select-text-field-input-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_text-field-input-text-weight: var(--md-filled-select-text-field-input-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-label-text-color: var(--md-filled-select-text-field-label-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-label-text-font: var(--md-filled-select-text-field-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-label-text-line-height: var(--md-filled-select-text-field-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));--_text-field-label-text-populated-line-height: var(--md-filled-select-text-field-label-text-populated-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_text-field-label-text-populated-size: var(--md-filled-select-text-field-label-text-populated-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_text-field-label-text-size: var(--md-filled-select-text-field-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));--_text-field-label-text-weight: var(--md-filled-select-text-field-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-leading-icon-color: var(--md-filled-select-text-field-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-leading-icon-size: var(--md-filled-select-text-field-leading-icon-size, 24px);--_text-field-supporting-text-color: var(--md-filled-select-text-field-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-supporting-text-font: var(--md-filled-select-text-field-supporting-text-font, var(--md-sys-typescale-body-small-font, var(--md-ref-typeface-plain, Roboto)));--_text-field-supporting-text-line-height: var(--md-filled-select-text-field-supporting-text-line-height, var(--md-sys-typescale-body-small-line-height, 1rem));--_text-field-supporting-text-size: var(--md-filled-select-text-field-supporting-text-size, var(--md-sys-typescale-body-small-size, 0.75rem));--_text-field-supporting-text-weight: var(--md-filled-select-text-field-supporting-text-weight, var(--md-sys-typescale-body-small-weight, var(--md-ref-typeface-weight-regular, 400)));--_text-field-trailing-icon-color: var(--md-filled-select-text-field-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_text-field-trailing-icon-size: var(--md-filled-select-text-field-trailing-icon-size, 24px);--md-filled-field-active-indicator-color: var(--_text-field-active-indicator-color);--md-filled-field-active-indicator-height: var(--_text-field-active-indicator-height);--md-filled-field-container-color: var(--_text-field-container-color);--md-filled-field-container-shape-end-end: var(--_text-field-container-shape-end-end);--md-filled-field-container-shape-end-start: var(--_text-field-container-shape-end-start);--md-filled-field-container-shape-start-end: var(--_text-field-container-shape-start-end);--md-filled-field-container-shape-start-start: var(--_text-field-container-shape-start-start);--md-filled-field-content-color: var(--_text-field-input-text-color);--md-filled-field-content-font: var(--_text-field-input-text-font);--md-filled-field-content-line-height: var(--_text-field-input-text-line-height);--md-filled-field-content-size: var(--_text-field-input-text-size);--md-filled-field-content-weight: var(--_text-field-input-text-weight);--md-filled-field-disabled-active-indicator-color: var(--_text-field-disabled-active-indicator-color);--md-filled-field-disabled-active-indicator-height: var(--_text-field-disabled-active-indicator-height);--md-filled-field-disabled-active-indicator-opacity: var(--_text-field-disabled-active-indicator-opacity);--md-filled-field-disabled-container-color: var(--_text-field-disabled-container-color);--md-filled-field-disabled-container-opacity: var(--_text-field-disabled-container-opacity);--md-filled-field-disabled-content-color: var(--_text-field-disabled-input-text-color);--md-filled-field-disabled-content-opacity: var(--_text-field-disabled-input-text-opacity);--md-filled-field-disabled-label-text-color: var(--_text-field-disabled-label-text-color);--md-filled-field-disabled-label-text-opacity: var(--_text-field-disabled-label-text-opacity);--md-filled-field-disabled-leading-content-color: var(--_text-field-disabled-leading-icon-color);--md-filled-field-disabled-leading-content-opacity: var(--_text-field-disabled-leading-icon-opacity);--md-filled-field-disabled-supporting-text-color: var(--_text-field-disabled-supporting-text-color);--md-filled-field-disabled-supporting-text-opacity: var(--_text-field-disabled-supporting-text-opacity);--md-filled-field-disabled-trailing-content-color: var(--_text-field-disabled-trailing-icon-color);--md-filled-field-disabled-trailing-content-opacity: var(--_text-field-disabled-trailing-icon-opacity);--md-filled-field-error-active-indicator-color: var(--_text-field-error-active-indicator-color);--md-filled-field-error-content-color: var(--_text-field-error-input-text-color);--md-filled-field-error-focus-active-indicator-color: var(--_text-field-error-focus-active-indicator-color);--md-filled-field-error-focus-content-color: var(--_text-field-error-focus-input-text-color);--md-filled-field-error-focus-label-text-color: var(--_text-field-error-focus-label-text-color);--md-filled-field-error-focus-leading-content-color: var(--_text-field-error-focus-leading-icon-color);--md-filled-field-error-focus-supporting-text-color: var(--_text-field-error-focus-supporting-text-color);--md-filled-field-error-focus-trailing-content-color: var(--_text-field-error-focus-trailing-icon-color);--md-filled-field-error-hover-active-indicator-color: var(--_text-field-error-hover-active-indicator-color);--md-filled-field-error-hover-content-color: var(--_text-field-error-hover-input-text-color);--md-filled-field-error-hover-label-text-color: var(--_text-field-error-hover-label-text-color);--md-filled-field-error-hover-leading-content-color: var(--_text-field-error-hover-leading-icon-color);--md-filled-field-error-hover-state-layer-color: var(--_text-field-error-hover-state-layer-color);--md-filled-field-error-hover-state-layer-opacity: var(--_text-field-error-hover-state-layer-opacity);--md-filled-field-error-hover-supporting-text-color: var(--_text-field-error-hover-supporting-text-color);--md-filled-field-error-hover-trailing-content-color: var(--_text-field-error-hover-trailing-icon-color);--md-filled-field-error-label-text-color: var(--_text-field-error-label-text-color);--md-filled-field-error-leading-content-color: var(--_text-field-error-leading-icon-color);--md-filled-field-error-supporting-text-color: var(--_text-field-error-supporting-text-color);--md-filled-field-error-trailing-content-color: var(--_text-field-error-trailing-icon-color);--md-filled-field-focus-active-indicator-color: var(--_text-field-focus-active-indicator-color);--md-filled-field-focus-active-indicator-height: var(--_text-field-focus-active-indicator-height);--md-filled-field-focus-content-color: var(--_text-field-focus-input-text-color);--md-filled-field-focus-label-text-color: var(--_text-field-focus-label-text-color);--md-filled-field-focus-leading-content-color: var(--_text-field-focus-leading-icon-color);--md-filled-field-focus-supporting-text-color: var(--_text-field-focus-supporting-text-color);--md-filled-field-focus-trailing-content-color: var(--_text-field-focus-trailing-icon-color);--md-filled-field-hover-active-indicator-color: var(--_text-field-hover-active-indicator-color);--md-filled-field-hover-active-indicator-height: var(--_text-field-hover-active-indicator-height);--md-filled-field-hover-content-color: var(--_text-field-hover-input-text-color);--md-filled-field-hover-label-text-color: var(--_text-field-hover-label-text-color);--md-filled-field-hover-leading-content-color: var(--_text-field-hover-leading-icon-color);--md-filled-field-hover-state-layer-color: var(--_text-field-hover-state-layer-color);--md-filled-field-hover-state-layer-opacity: var(--_text-field-hover-state-layer-opacity);--md-filled-field-hover-supporting-text-color: var(--_text-field-hover-supporting-text-color);--md-filled-field-hover-trailing-content-color: var(--_text-field-hover-trailing-icon-color);--md-filled-field-label-text-color: var(--_text-field-label-text-color);--md-filled-field-label-text-font: var(--_text-field-label-text-font);--md-filled-field-label-text-line-height: var(--_text-field-label-text-line-height);--md-filled-field-label-text-populated-line-height: var(--_text-field-label-text-populated-line-height);--md-filled-field-label-text-populated-size: var(--_text-field-label-text-populated-size);--md-filled-field-label-text-size: var(--_text-field-label-text-size);--md-filled-field-label-text-weight: var(--_text-field-label-text-weight);--md-filled-field-leading-content-color: var(--_text-field-leading-icon-color);--md-filled-field-supporting-text-color: var(--_text-field-supporting-text-color);--md-filled-field-supporting-text-font: var(--_text-field-supporting-text-font);--md-filled-field-supporting-text-line-height: var(--_text-field-supporting-text-line-height);--md-filled-field-supporting-text-size: var(--_text-field-supporting-text-size);--md-filled-field-supporting-text-weight: var(--_text-field-supporting-text-weight);--md-filled-field-trailing-content-color: var(--_text-field-trailing-icon-color)}[has-start] .icon.leading{font-size:var(--_text-field-leading-icon-size);height:var(--_text-field-leading-icon-size);width:var(--_text-field-leading-icon-size)}.icon.trailing{font-size:var(--_text-field-trailing-icon-size);height:var(--_text-field-trailing-icon-size);width:var(--_text-field-trailing-icon-size)}/*# sourceMappingURL=filled-select-styles.css.map */
`,Ls=tt`:host{color:unset;min-width:210px;display:flex}.field{cursor:default;outline:none}.select{position:relative;flex-direction:column}.icon.trailing svg,.icon ::slotted(*){fill:currentColor}.icon ::slotted(*){width:inherit;height:inherit;font-size:inherit}.icon slot{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.icon.trailing :is(.up,.down){opacity:0;transition:opacity 75ms linear 75ms}.select:not(.open) .down,.select.open .up{opacity:1}.field,.select,md-menu{min-width:inherit;width:inherit;max-width:inherit;display:flex}md-menu{min-width:var(--__menu-min-width);max-width:var(--__menu-max-width, inherit)}.menu-wrapper{width:0px;height:0px;max-width:inherit}md-menu ::slotted(:not[disabled]){cursor:pointer}.field,.select{width:100%}:host{display:inline-flex}:host([disabled]){pointer-events:none}/*# sourceMappingURL=shared-styles.css.map */
`;class _r extends $s{}_r.styles=[Ls,Bs],customElements.define("ew-filled-select",_r);const Os=tt`:host{display:flex;--md-ripple-hover-color: var(--md-menu-item-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-hover-opacity: var(--md-menu-item-hover-state-layer-opacity, 0.08);--md-ripple-pressed-color: var(--md-menu-item-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--md-ripple-pressed-opacity: var(--md-menu-item-pressed-state-layer-opacity, 0.12)}:host([disabled]){opacity:var(--md-menu-item-disabled-opacity, 0.3);pointer-events:none}md-focus-ring{z-index:1;--md-focus-ring-shape: 8px}a,button,li{background:none;border:none;padding:0;margin:0;text-align:unset;text-decoration:none}.list-item{border-radius:inherit;display:flex;flex:1;max-width:inherit;min-width:inherit;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.list-item:not(.disabled){cursor:pointer}[slot=container]{pointer-events:none}md-ripple{border-radius:inherit}md-item{border-radius:inherit;flex:1;color:var(--md-menu-item-label-text-color, var(--md-sys-color-on-surface, #1d1b20));font-family:var(--md-menu-item-label-text-font, var(--md-sys-typescale-body-large-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-menu-item-label-text-size, var(--md-sys-typescale-body-large-size, 1rem));line-height:var(--md-menu-item-label-text-line-height, var(--md-sys-typescale-body-large-line-height, 1.5rem));font-weight:var(--md-menu-item-label-text-weight, var(--md-sys-typescale-body-large-weight, var(--md-ref-typeface-weight-regular, 400)));min-height:var(--md-menu-item-one-line-container-height, 56px);padding-top:var(--md-menu-item-top-space, 12px);padding-bottom:var(--md-menu-item-bottom-space, 12px);padding-inline-start:var(--md-menu-item-leading-space, 16px);padding-inline-end:var(--md-menu-item-trailing-space, 16px)}md-item[multiline]{min-height:var(--md-menu-item-two-line-container-height, 72px)}[slot=supporting-text]{color:var(--md-menu-item-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-menu-item-supporting-text-font, var(--md-sys-typescale-body-medium-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-menu-item-supporting-text-size, var(--md-sys-typescale-body-medium-size, 0.875rem));line-height:var(--md-menu-item-supporting-text-line-height, var(--md-sys-typescale-body-medium-line-height, 1.25rem));font-weight:var(--md-menu-item-supporting-text-weight, var(--md-sys-typescale-body-medium-weight, var(--md-ref-typeface-weight-regular, 400)))}[slot=trailing-supporting-text]{color:var(--md-menu-item-trailing-supporting-text-color, var(--md-sys-color-on-surface-variant, #49454f));font-family:var(--md-menu-item-trailing-supporting-text-font, var(--md-sys-typescale-label-small-font, var(--md-ref-typeface-plain, Roboto)));font-size:var(--md-menu-item-trailing-supporting-text-size, var(--md-sys-typescale-label-small-size, 0.6875rem));line-height:var(--md-menu-item-trailing-supporting-text-line-height, var(--md-sys-typescale-label-small-line-height, 1rem));font-weight:var(--md-menu-item-trailing-supporting-text-weight, var(--md-sys-typescale-label-small-weight, var(--md-ref-typeface-weight-medium, 500)))}:is([slot=start],[slot=end])::slotted(*){fill:currentColor}[slot=start]{color:var(--md-menu-item-leading-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}[slot=end]{color:var(--md-menu-item-trailing-icon-color, var(--md-sys-color-on-surface-variant, #49454f))}.list-item{background-color:var(--md-menu-item-container-color, transparent)}.list-item.selected{background-color:var(--md-menu-item-selected-container-color, var(--md-sys-color-secondary-container, #e8def8))}.selected:not(.disabled) ::slotted(*){color:var(--md-menu-item-selected-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b))}@media(forced-colors: active){:host([disabled]),:host([disabled]) slot{color:GrayText;opacity:1}.list-item{position:relative}.list-item.selected::before{content:"";position:absolute;inset:0;box-sizing:border-box;border-radius:inherit;pointer-events:none;border:3px double CanvasText}}/*# sourceMappingURL=menu-item-styles.css.map */
`;class zs{constructor(e,t){this.host=e,this.internalTypeaheadText=null,this.onClick=()=>{this.host.keepOpen||this.host.dispatchEvent(gr(this.host,{kind:ys}))},this.onKeydown=r=>{if(this.host.href&&r.code==="Enter"){const s=this.getInteractiveElement();s instanceof HTMLAnchorElement&&s.click()}if(r.defaultPrevented)return;const o=r.code;this.host.keepOpen&&o!=="Escape"||no(o)&&(r.preventDefault(),this.host.dispatchEvent(gr(this.host,{kind:bs,key:o})))},this.getHeadlineElements=t.getHeadlineElements,this.getSupportingTextElements=t.getSupportingTextElements,this.getDefaultElements=t.getDefaultElements,this.getInteractiveElement=t.getInteractiveElement,this.host.addController(this)}get typeaheadText(){if(this.internalTypeaheadText!==null)return this.internalTypeaheadText;const e=this.getHeadlineElements(),t=[];return e.forEach(r=>{r.textContent&&r.textContent.trim()&&t.push(r.textContent.trim())}),t.length===0&&this.getDefaultElements().forEach(r=>{r.textContent&&r.textContent.trim()&&t.push(r.textContent.trim())}),t.length===0&&this.getSupportingTextElements().forEach(r=>{r.textContent&&r.textContent.trim()&&t.push(r.textContent.trim())}),t.join(" ")}get tagName(){switch(this.host.type){case"link":return"a";case"button":return"button";default:return"li"}}get role(){return this.host.type==="option"?"option":"menuitem"}hostConnected(){this.host.toggleAttribute("md-menu-item",!0)}hostUpdate(){this.host.href&&(this.host.type="link")}setTypeaheadText(e){this.internalTypeaheadText=e}}class Ds{get role(){return this.menuItemController.role}get typeaheadText(){return this.menuItemController.typeaheadText}setTypeaheadText(e){this.menuItemController.setTypeaheadText(e)}get displayText(){return this.internalDisplayText!==null?this.internalDisplayText:this.menuItemController.typeaheadText}setDisplayText(e){this.internalDisplayText=e}constructor(e,t){this.host=e,this.internalDisplayText=null,this.lastSelected=this.host.selected,this.firstUpdate=!0,this.onClick=()=>{this.menuItemController.onClick()},this.onKeydown=r=>{this.menuItemController.onKeydown(r)},this.menuItemController=new zs(e,t),e.addController(this)}hostUpdate(){this.lastSelected!==this.host.selected&&(this.host.ariaSelected=this.host.selected?"true":"false")}hostUpdated(){this.lastSelected===this.host.selected||this.firstUpdate||(this.host.selected?this.host.dispatchEvent(new Event("request-selection",{bubbles:!0,composed:!0})):this.host.dispatchEvent(new Event("request-deselection",{bubbles:!0,composed:!0}))),this.lastSelected=this.host.selected,this.firstUpdate=!1}}class lt extends J{constructor(){super(...arguments),this.disabled=!1,this.isMenuItem=!0,this.selected=!1,this.value="",this.type="option",this.selectOptionController=new Ds(this,{getHeadlineElements:()=>this.headlineElements,getSupportingTextElements:()=>this.supportingTextElements,getDefaultElements:()=>this.defaultElements,getInteractiveElement:()=>this.listItemRoot})}get typeaheadText(){return this.selectOptionController.typeaheadText}set typeaheadText(e){this.selectOptionController.setTypeaheadText(e)}get displayText(){return this.selectOptionController.displayText}set displayText(e){this.selectOptionController.setDisplayText(e)}render(){return this.renderListItem(R`
      <md-item>
        <div slot="container">
          ${this.renderRipple()} ${this.renderFocusRing()}
        </div>
        <slot name="start" slot="start"></slot>
        <slot name="end" slot="end"></slot>
        ${this.renderBody()}
      </md-item>
    `)}renderListItem(e){return R`
      <li
        id="item"
        tabindex=${this.disabled?-1:0}
        role=${this.selectOptionController.role}
        aria-label=${this.ariaLabel||L}
        aria-selected=${this.ariaSelected||L}
        aria-checked=${this.ariaChecked||L}
        aria-expanded=${this.ariaExpanded||L}
        aria-haspopup=${this.ariaHasPopup||L}
        class="list-item ${bt(this.getRenderClasses())}"
        @click=${this.selectOptionController.onClick}
        @keydown=${this.selectOptionController.onKeydown}
        >${e}</li
      >
    `}renderRipple(){return R` <md-ripple
      part="ripple"
      for="item"
      ?disabled=${this.disabled}></md-ripple>`}renderFocusRing(){return R` <md-focus-ring
      part="focus-ring"
      for="item"
      inward></md-focus-ring>`}getRenderClasses(){return{disabled:this.disabled,selected:this.selected}}renderBody(){return R`
      <slot></slot>
      <slot name="overline" slot="overline"></slot>
      <slot name="headline" slot="headline"></slot>
      <slot name="supporting-text" slot="supporting-text"></slot>
      <slot
        name="trailing-supporting-text"
        slot="trailing-supporting-text"></slot>
    `}focus(){var e;(e=this.listItemRoot)==null||e.focus()}}Xt(lt),lt.shadowRootOptions={...J.shadowRootOptions,delegatesFocus:!0},v([E({type:Boolean,reflect:!0})],lt.prototype,"disabled",void 0),v([E({type:Boolean,attribute:"md-menu-item",reflect:!0})],lt.prototype,"isMenuItem",void 0),v([E({type:Boolean})],lt.prototype,"selected",void 0),v([E()],lt.prototype,"value",void 0),v([ht(".list-item")],lt.prototype,"listItemRoot",void 0),v([qt({slot:"headline"})],lt.prototype,"headlineElements",void 0),v([qt({slot:"supporting-text"})],lt.prototype,"supportingTextElements",void 0),v([function(i){return(e,t)=>{const{slot:r}=i??{},o="slot"+(r?`[name=${r}]`:":not([name])");return jr(e,t,{get(){var n;const s=(n=this.renderRoot)==null?void 0:n.querySelector(o);return(s==null?void 0:s.assignedNodes(i))??[]}})}}({slot:""})],lt.prototype,"defaultElements",void 0),v([E({attribute:"typeahead-text"})],lt.prototype,"typeaheadText",null),v([E({attribute:"display-text"})],lt.prototype,"displayText",null);class xr extends lt{}xr.styles=[Os],customElements.define("ew-select-option",xr);class oe extends J{constructor(){super(...arguments),this.value=0,this.max=1,this.indeterminate=!1,this.fourColor=!1}render(){const{ariaLabel:e}=this;return R`
      <div
        class="progress ${bt(this.getRenderClasses())}"
        role="progressbar"
        aria-label="${e||L}"
        aria-valuemin="0"
        aria-valuemax=${this.max}
        aria-valuenow=${this.indeterminate?L:this.value}
        >${this.renderIndicator()}</div
      >
    `}getRenderClasses(){return{indeterminate:this.indeterminate,"four-color":this.fourColor}}}Xt(oe),v([E({type:Number})],oe.prototype,"value",void 0),v([E({type:Number})],oe.prototype,"max",void 0),v([E({type:Boolean})],oe.prototype,"indeterminate",void 0),v([E({type:Boolean,attribute:"four-color"})],oe.prototype,"fourColor",void 0);class Us extends oe{renderIndicator(){return this.indeterminate?this.renderIndeterminateContainer():this.renderDeterminateContainer()}renderDeterminateContainer(){const e=100*(1-this.value/this.max);return R`
      <svg viewBox="0 0 4800 4800">
        <circle class="track" pathLength="100"></circle>
        <circle
          class="active-track"
          pathLength="100"
          stroke-dashoffset=${e}></circle>
      </svg>
    `}renderIndeterminateContainer(){return R` <div class="spinner">
      <div class="left">
        <div class="circle"></div>
      </div>
      <div class="right">
        <div class="circle"></div>
      </div>
    </div>`}}const Ps=tt`:host{--_active-indicator-color: var(--md-circular-progress-active-indicator-color, var(--md-sys-color-primary, #6750a4));--_active-indicator-width: var(--md-circular-progress-active-indicator-width, 10);--_four-color-active-indicator-four-color: var(--md-circular-progress-four-color-active-indicator-four-color, var(--md-sys-color-tertiary-container, #ffd8e4));--_four-color-active-indicator-one-color: var(--md-circular-progress-four-color-active-indicator-one-color, var(--md-sys-color-primary, #6750a4));--_four-color-active-indicator-three-color: var(--md-circular-progress-four-color-active-indicator-three-color, var(--md-sys-color-tertiary, #7d5260));--_four-color-active-indicator-two-color: var(--md-circular-progress-four-color-active-indicator-two-color, var(--md-sys-color-primary-container, #eaddff));--_size: var(--md-circular-progress-size, 48px);display:inline-flex;vertical-align:middle;width:var(--_size);height:var(--_size);position:relative;align-items:center;justify-content:center;contain:strict;content-visibility:auto}.progress{flex:1;align-self:stretch;margin:4px}.progress,.spinner,.left,.right,.circle,svg,.track,.active-track{position:absolute;inset:0}svg{transform:rotate(-90deg)}circle{cx:50%;cy:50%;r:calc(50%*(1 - var(--_active-indicator-width)/100));stroke-width:calc(var(--_active-indicator-width)*1%);stroke-dasharray:100;fill:rgba(0,0,0,0)}.active-track{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1);stroke:var(--_active-indicator-color)}.track{stroke:rgba(0,0,0,0)}.progress.indeterminate{animation:linear infinite linear-rotate;animation-duration:1568.2352941176ms}.spinner{animation:infinite both rotate-arc;animation-duration:5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.left{overflow:hidden;inset:0 50% 0 0}.right{overflow:hidden;inset:0 0 0 50%}.circle{box-sizing:border-box;border-radius:50%;border:solid calc(var(--_active-indicator-width)/100*(var(--_size) - 8px));border-color:var(--_active-indicator-color) var(--_active-indicator-color) rgba(0,0,0,0) rgba(0,0,0,0);animation:expand-arc;animation-iteration-count:infinite;animation-fill-mode:both;animation-duration:1333ms,5332ms;animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.four-color .circle{animation-name:expand-arc,four-color}.left .circle{rotate:135deg;inset:0 -100% 0 0}.right .circle{rotate:100deg;inset:0 0 0 -100%;animation-delay:-666.5ms,0ms}@media(forced-colors: active){.active-track{stroke:CanvasText}.circle{border-color:CanvasText CanvasText Canvas Canvas}}@keyframes expand-arc{0%{transform:rotate(265deg)}50%{transform:rotate(130deg)}100%{transform:rotate(265deg)}}@keyframes rotate-arc{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes linear-rotate{to{transform:rotate(360deg)}}@keyframes four-color{0%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}15%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}25%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}40%{border-top-color:var(--_four-color-active-indicator-two-color);border-right-color:var(--_four-color-active-indicator-two-color)}50%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}65%{border-top-color:var(--_four-color-active-indicator-three-color);border-right-color:var(--_four-color-active-indicator-three-color)}75%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}90%{border-top-color:var(--_four-color-active-indicator-four-color);border-right-color:var(--_four-color-active-indicator-four-color)}100%{border-top-color:var(--_four-color-active-indicator-one-color);border-right-color:var(--_four-color-active-indicator-one-color)}}/*# sourceMappingURL=circular-progress-styles.css.map */
`;class wr extends Us{}wr.styles=[Ps],customElements.define("ew-circular-progress",wr);class qe extends J{render(){return R`
      <div>
        <ew-circular-progress
          active
          ?indeterminate=${this.progress===void 0}
          .value=${this.progress!==void 0?this.progress/100:void 0}
        ></ew-circular-progress>
        ${this.progress!==void 0?R`<div>${this.progress}%</div>`:""}
      </div>
      ${this.label}
    `}}qe.styles=tt`
    :host {
      display: flex;
      flex-direction: column;
      text-align: center;
    }
    ew-circular-progress {
      margin-bottom: 16px;
    }
  `,v([E()],qe.prototype,"label",void 0),v([E()],qe.prototype,"progress",void 0),customElements.define("ewt-page-progress",qe);class We extends J{render(){return R`
      <div class="icon">${this.icon}</div>
      ${this.label}
    `}}We.styles=tt`
    :host {
      display: flex;
      flex-direction: column;
      text-align: center;
    }
    .icon {
      font-size: 50px;
      line-height: 80px;
      color: black;
    }
  `,v([E()],We.prototype,"icon",void 0),v([E()],We.prototype,"label",void 0),customElements.define("ewt-page-message",We);const Fs=Jt`
  <svg width="24" height="24" viewBox="0 0 24 24">
    <path
      fill="currentColor"
      d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"
    />
  </svg>
`,Ms=Jt`
  <svg viewBox="0 0 24 24">
    <path
      fill="currentColor"
      d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"
    />
  </svg>
`,Er=Jt`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
  </svg>
`,Ns=Jt`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="M12,21L15.6,16.2C14.6,15.45 13.35,15 12,15C10.65,15 9.4,15.45 8.4,16.2L12,21M12,3C7.95,3 4.21,4.34 1.2,6.6L3,9C5.5,7.12 8.62,6 12,6C15.38,6 18.5,7.12 21,9L22.8,6.6C19.79,4.34 16.05,3 12,3M12,9C9.3,9 6.81,9.89 4.8,11.4L6.6,13.8C8.1,12.67 9.97,12 12,12C14.03,12 15.9,12.67 17.4,13.8L19.2,11.4C17.19,9.89 14.7,9 12,9Z" />
  </svg>
`,kr=Jt`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="M20,19V7H4V19H20M20,3A2,2 0 0,1 22,5V19A2,2 0 0,1 20,21H4A2,2 0 0,1 2,19V5C2,3.89 2.9,3 4,3H20M13,17V15H18V17H13M9.58,13L5.57,9H8.4L11.7,12.3C12.09,12.69 12.09,13.33 11.7,13.72L8.42,17H5.59L9.58,13Z" />
  </svg>
`,Ar=Jt`
  <svg slot="start" viewBox="0 0 24 24">
  <path d="M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />
  </svg>
`,Sr=Jt`
  <svg slot="start" viewBox="0 0 24 24">
    <path d="m12.151 1.5882c-.3262 0-.6523.1291-.8996.3867l-8.3848 8.7354c-.0619.0644-.1223.1368-.1807.2154-.0588.0789-.1151.1638-.1688.2534-.2593.4325-.4552.9749-.5232 1.4555-.0026.018-.0076.0369-.0094.0548-.0121.0987-.0184.1944-.0184.2857v8.0124a1.2731 1.2731 0 001.2731 1.2731h7.8313l-3.4484-3.593a1.7399 1.7399 0 111.0803-1.125l2.6847 2.7972v-10.248a1.7399 1.7399 0 111.5276-0v7.187l2.6702-2.782a1.7399 1.7399 0 111.0566 1.1505l-3.7269 3.8831v2.7299h8.174a1.2471 1.2471 0 001.2471-1.2471v-8.0375c0-.0912-.0059-.1868-.0184-.2855-.0603-.4935-.2636-1.0617-.5326-1.5105-.0537-.0896-.1101-.1745-.1684-.253-.0588-.079-.1191-.1513-.181-.2158l-8.3848-8.7363c-.2473-.2577-.5735-.3866-.8995-.3864" />
  </svg>
`,Hs=[73,77,80,82,79,86,1];var se,Ut;(function(i){i[i.CURRENT_STATE=1]="CURRENT_STATE",i[i.ERROR_STATE=2]="ERROR_STATE",i[i.RPC=3]="RPC",i[i.RPC_RESULT=4]="RPC_RESULT"})(se||(se={})),function(i){i[i.READY=2]="READY",i[i.PROVISIONING=3]="PROVISIONING",i[i.PROVISIONED=4]="PROVISIONED"}(Ut||(Ut={}));const qs={0:"NO_ERROR",1:"INVALID_RPC_PACKET",2:"UNKNOWN_RPC_COMMAND",3:"UNABLE_TO_CONNECT",254:"TIMEOUT",255:"UNKNOWN_ERROR"};class ho extends Error{constructor(){super("Port is not ready")}}const Rr=i=>"["+i.map(e=>((t,r=2)=>{let o=t.toString(16).toUpperCase();return o.startsWith("-")?"-0x"+o.substring(1).padStart(r,"0"):"0x"+o.padStart(r,"0")})(e)).join(", ")+"]";class Ws extends EventTarget{constructor(e,t){if(super(),this.port=e,this.logger=t,this.error=0,e.readable===null)throw new Error("Port is not readable");if(e.writable===null)throw new Error("Port is not writable")}async initialize(e=1e3){var t;if(this.logger.log("Initializing Improv Serial"),this._processInput(),await(t=1e3,new Promise(r=>setTimeout(r,t))),this._reader===void 0)throw new ho;try{await new Promise(async(r,o)=>{setTimeout(()=>o(new Error("Improv Wi-Fi Serial not detected")),e),await this.requestCurrentState(),r(void 0)}),await this.requestInfo()}catch(r){throw await this.close(),r}return this.info}async close(){this._reader&&await new Promise(e=>{this._reader.cancel(),this.addEventListener("disconnect",e,{once:!0})})}async requestCurrentState(){let e;try{await new Promise(async(r,o)=>{this.addEventListener("state-changed",r,{once:!0}),e=this._sendRPCWithResponse(2,[]),e.catch(s=>{this.removeEventListener("state-changed",r),o(s)})})}catch(r){throw this._rpcFeedback=void 0,new Error(`Error fetching current state: ${r}`)}if(this.state!==Ut.PROVISIONED)return void(this._rpcFeedback=void 0);const t=await e;this.nextUrl=t[0]}async requestInfo(e){const t=await this._sendRPCWithResponse(3,[],e);this.info={firmware:t[0],version:t[1],name:t[3],chipFamily:t[2]}}async provision(e,t,r){const o=new TextEncoder,s=o.encode(e),n=o.encode(t),d=[s.length,...s,n.length,...n],f=await this._sendRPCWithResponse(1,d,r);this.nextUrl=f[0]}async scan(){const e=(await this._sendRPCWithMultipleResponses(4,[])).map(([t,r,o])=>({name:t,rssi:parseInt(r),secured:o==="YES"}));return e.sort((t,r)=>t.name.toLocaleLowerCase().localeCompare(r.name.toLocaleLowerCase())),e}_sendRPC(e,t){this.writePacketToStream(se.RPC,[e,t.length,...t])}async _sendRPCWithResponse(e,t,r){if(this._rpcFeedback)throw new Error("Only 1 RPC command that requires feedback can be active");return await this._awaitRPCResultWithTimeout(new Promise((o,s)=>{this._rpcFeedback={command:e,resolve:o,reject:s},this._sendRPC(e,t)}),r)}async _sendRPCWithMultipleResponses(e,t,r){if(this._rpcFeedback)throw new Error("Only 1 RPC command that requires feedback can be active");return await this._awaitRPCResultWithTimeout(new Promise((o,s)=>{this._rpcFeedback={command:e,resolve:o,reject:s,receivedData:[]},this._sendRPC(e,t)}),r)}async _awaitRPCResultWithTimeout(e,t){return t?await new Promise((r,o)=>{const s=setTimeout(()=>this._setError(254),t);e.finally(()=>clearTimeout(s)),e.then(r,o)}):await e}async _processInput(){this.logger.debug("Starting read loop"),this._reader=this.port.readable.getReader();try{let e,t=[],r=0;for(;;){const{value:o,done:s}=await this._reader.read();if(s)break;if(o&&o.length!==0)for(const n of o){if(e===!1){n===10&&(e=void 0);continue}if(e===!0){t.push(n),t.length===r&&(this._handleIncomingPacket(t),e=void 0,t=[]);continue}if(n===10){t=[];continue}if(t.push(n),t.length===9){if(e=String.fromCharCode(...t.slice(0,6))==="IMPROV",!e){t=[];continue}r=9+t[8]+1}}}}catch(e){this.logger.error("Error while reading serial port",e)}finally{this._reader.releaseLock(),this._reader=void 0}this.logger.debug("Finished read loop"),this.dispatchEvent(new Event("disconnect"))}_handleIncomingPacket(e){const t=e.slice(6),r=t[0],o=t[1],s=t[2],n=t.slice(3,3+s);if(this.logger.debug("PROCESS",{version:r,packetType:o,packetLength:s,data:Rr(n)}),r!==1)return void this.logger.error("Received unsupported version",r);let d=t[3+s],f=0;for(let h=0;h<e.length-1;h++)f+=e[h];if(f&=255,f===d)if(o===se.CURRENT_STATE)this.state=n[0],this.dispatchEvent(new CustomEvent("state-changed",{detail:this.state}));else if(o===se.ERROR_STATE)this._setError(n[0]);else if(o===se.RPC_RESULT){if(!this._rpcFeedback)return void this.logger.error("Received result while not waiting for one");const h=n[0];if(h!==this._rpcFeedback.command)return void this.logger.error(`Received result for command ${h} but expected ${this._rpcFeedback.command}`);const p=[],_=n[1];let b=2;for(;b<2+_;)p.push(String.fromCodePoint(...n.slice(b+1,b+n[b]+1))),b+=n[b]+1;"receivedData"in this._rpcFeedback?p.length>0?this._rpcFeedback.receivedData.push(p):(this._rpcFeedback.resolve(this._rpcFeedback.receivedData),this._rpcFeedback=void 0):(this._rpcFeedback.resolve(p),this._rpcFeedback=void 0)}else this.logger.error("Unable to handle packet",t);else this.logger.error(`Received invalid checksum ${d}. Expected ${f}`)}async writePacketToStream(e,t){const r=new Uint8Array([...Hs,e,t.length,...t,0,0]);r[r.length-2]=255&r.reduce((s,n)=>s+n,0),r[r.length-1]=10,this.logger.debug("Writing to stream:",Rr(new Array(...r)));const o=this.port.writable.getWriter();await o.write(r);try{o.releaseLock()}catch(s){console.error("Ignoring release lock error",s)}}_setError(e){this.error=e,e>0&&this._rpcFeedback&&(this._rpcFeedback.reject(qs[e]||`UNKNOWN_ERROR (${e})`),this._rpcFeedback=void 0),this.dispatchEvent(new CustomEvent("error-changed",{detail:this.error}))}}class ot extends Error{}function de(i){let e=i.length;for(;--e>=0;)i[e]=0}const Yi=256,po=286,be=30,_e=15,Ni=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Je=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Vs=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Tr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$t=new Array(576);de($t);const xe=new Array(60);de(xe);const Ie=new Array(512);de(Ie);const Ce=new Array(256);de(Ce);const Xi=new Array(29);de(Xi);const ii=new Array(be);function _i(i,e,t,r,o){this.static_tree=i,this.extra_bits=e,this.extra_base=t,this.elems=r,this.max_length=o,this.has_stree=i&&i.length}let Ir,Cr,$r;function xi(i,e){this.dyn_tree=i,this.max_code=0,this.stat_desc=e}de(ii);const fo=i=>i<256?Ie[i]:Ie[256+(i>>>7)],$e=(i,e)=>{i.pending_buf[i.pending++]=255&e,i.pending_buf[i.pending++]=e>>>8&255},nt=(i,e,t)=>{i.bi_valid>16-t?(i.bi_buf|=e<<i.bi_valid&65535,$e(i,i.bi_buf),i.bi_buf=e>>16-i.bi_valid,i.bi_valid+=t-16):(i.bi_buf|=e<<i.bi_valid&65535,i.bi_valid+=t)},Et=(i,e,t)=>{nt(i,t[2*e],t[2*e+1])},uo=(i,e)=>{let t=0;do t|=1&i,i>>>=1,t<<=1;while(--e>0);return t>>>1},mo=(i,e,t)=>{const r=new Array(16);let o,s,n=0;for(o=1;o<=_e;o++)n=n+t[o-1]<<1,r[o]=n;for(s=0;s<=e;s++){let d=i[2*s+1];d!==0&&(i[2*s]=uo(r[d]++,d))}},vo=i=>{let e;for(e=0;e<po;e++)i.dyn_ltree[2*e]=0;for(e=0;e<be;e++)i.dyn_dtree[2*e]=0;for(e=0;e<19;e++)i.bl_tree[2*e]=0;i.dyn_ltree[512]=1,i.opt_len=i.static_len=0,i.sym_next=i.matches=0},go=i=>{i.bi_valid>8?$e(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0},Br=(i,e,t,r)=>{const o=2*e,s=2*t;return i[o]<i[s]||i[o]===i[s]&&r[e]<=r[t]},wi=(i,e,t)=>{const r=i.heap[t];let o=t<<1;for(;o<=i.heap_len&&(o<i.heap_len&&Br(e,i.heap[o+1],i.heap[o],i.depth)&&o++,!Br(e,r,i.heap[o],i.depth));)i.heap[t]=i.heap[o],t=o,o<<=1;i.heap[t]=r},Lr=(i,e,t)=>{let r,o,s,n,d=0;if(i.sym_next!==0)do r=255&i.pending_buf[i.sym_buf+d++],r+=(255&i.pending_buf[i.sym_buf+d++])<<8,o=i.pending_buf[i.sym_buf+d++],r===0?Et(i,o,e):(s=Ce[o],Et(i,s+Yi+1,e),n=Ni[s],n!==0&&(o-=Xi[s],nt(i,o,n)),r--,s=fo(r),Et(i,s,t),n=Je[s],n!==0&&(r-=ii[s],nt(i,r,n)));while(d<i.sym_next);Et(i,256,e)},Ei=(i,e)=>{const t=e.dyn_tree,r=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.elems;let n,d,f,h=-1;for(i.heap_len=0,i.heap_max=573,n=0;n<s;n++)t[2*n]!==0?(i.heap[++i.heap_len]=h=n,i.depth[n]=0):t[2*n+1]=0;for(;i.heap_len<2;)f=i.heap[++i.heap_len]=h<2?++h:0,t[2*f]=1,i.depth[f]=0,i.opt_len--,o&&(i.static_len-=r[2*f+1]);for(e.max_code=h,n=i.heap_len>>1;n>=1;n--)wi(i,t,n);f=s;do n=i.heap[1],i.heap[1]=i.heap[i.heap_len--],wi(i,t,1),d=i.heap[1],i.heap[--i.heap_max]=n,i.heap[--i.heap_max]=d,t[2*f]=t[2*n]+t[2*d],i.depth[f]=(i.depth[n]>=i.depth[d]?i.depth[n]:i.depth[d])+1,t[2*n+1]=t[2*d+1]=f,i.heap[1]=f++,wi(i,t,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],((p,_)=>{const b=_.dyn_tree,g=_.max_code,B=_.stat_desc.static_tree,k=_.stat_desc.has_stree,x=_.stat_desc.extra_bits,I=_.stat_desc.extra_base,T=_.stat_desc.max_length;let w,C,z,S,P,O,$=0;for(S=0;S<=_e;S++)p.bl_count[S]=0;for(b[2*p.heap[p.heap_max]+1]=0,w=p.heap_max+1;w<573;w++)C=p.heap[w],S=b[2*b[2*C+1]+1]+1,S>T&&(S=T,$++),b[2*C+1]=S,C>g||(p.bl_count[S]++,P=0,C>=I&&(P=x[C-I]),O=b[2*C],p.opt_len+=O*(S+P),k&&(p.static_len+=O*(B[2*C+1]+P)));if($!==0){do{for(S=T-1;p.bl_count[S]===0;)S--;p.bl_count[S]--,p.bl_count[S+1]+=2,p.bl_count[T]--,$-=2}while($>0);for(S=T;S!==0;S--)for(C=p.bl_count[S];C!==0;)z=p.heap[--w],z>g||(b[2*z+1]!==S&&(p.opt_len+=(S-b[2*z+1])*b[2*z],b[2*z+1]=S),C--)}})(i,e),mo(t,h,i.bl_count)},Or=(i,e,t)=>{let r,o,s=-1,n=e[1],d=0,f=7,h=4;for(n===0&&(f=138,h=3),e[2*(t+1)+1]=65535,r=0;r<=t;r++)o=n,n=e[2*(r+1)+1],++d<f&&o===n||(d<h?i.bl_tree[2*o]+=d:o!==0?(o!==s&&i.bl_tree[2*o]++,i.bl_tree[32]++):d<=10?i.bl_tree[34]++:i.bl_tree[36]++,d=0,s=o,n===0?(f=138,h=3):o===n?(f=6,h=3):(f=7,h=4))},zr=(i,e,t)=>{let r,o,s=-1,n=e[1],d=0,f=7,h=4;for(n===0&&(f=138,h=3),r=0;r<=t;r++)if(o=n,n=e[2*(r+1)+1],!(++d<f&&o===n)){if(d<h)do Et(i,o,i.bl_tree);while(--d!=0);else o!==0?(o!==s&&(Et(i,o,i.bl_tree),d--),Et(i,16,i.bl_tree),nt(i,d-3,2)):d<=10?(Et(i,17,i.bl_tree),nt(i,d-3,3)):(Et(i,18,i.bl_tree),nt(i,d-11,7));d=0,s=o,n===0?(f=138,h=3):o===n?(f=6,h=3):(f=7,h=4)}};let Dr=!1;const yo=(i,e,t,r)=>{nt(i,0+(r?1:0),3),go(i),$e(i,t),$e(i,~t),t&&i.pending_buf.set(i.window.subarray(e,e+t),i.pending),i.pending+=t};var Zs=i=>{Dr||((()=>{let e,t,r,o,s;const n=new Array(16);for(r=0,o=0;o<28;o++)for(Xi[o]=r,e=0;e<1<<Ni[o];e++)Ce[r++]=o;for(Ce[r-1]=o,s=0,o=0;o<16;o++)for(ii[o]=s,e=0;e<1<<Je[o];e++)Ie[s++]=o;for(s>>=7;o<be;o++)for(ii[o]=s<<7,e=0;e<1<<Je[o]-7;e++)Ie[256+s++]=o;for(t=0;t<=_e;t++)n[t]=0;for(e=0;e<=143;)$t[2*e+1]=8,e++,n[8]++;for(;e<=255;)$t[2*e+1]=9,e++,n[9]++;for(;e<=279;)$t[2*e+1]=7,e++,n[7]++;for(;e<=287;)$t[2*e+1]=8,e++,n[8]++;for(mo($t,287,n),e=0;e<be;e++)xe[2*e+1]=5,xe[2*e]=uo(e,5);Ir=new _i($t,Ni,257,po,_e),Cr=new _i(xe,Je,0,be,_e),$r=new _i(new Array(0),Vs,0,19,7)})(),Dr=!0),i.l_desc=new xi(i.dyn_ltree,Ir),i.d_desc=new xi(i.dyn_dtree,Cr),i.bl_desc=new xi(i.bl_tree,$r),i.bi_buf=0,i.bi_valid=0,vo(i)},Gs=(i,e,t,r)=>{let o,s,n=0;i.level>0?(i.strm.data_type===2&&(i.strm.data_type=(d=>{let f,h=4093624447;for(f=0;f<=31;f++,h>>>=1)if(1&h&&d.dyn_ltree[2*f]!==0)return 0;if(d.dyn_ltree[18]!==0||d.dyn_ltree[20]!==0||d.dyn_ltree[26]!==0)return 1;for(f=32;f<Yi;f++)if(d.dyn_ltree[2*f]!==0)return 1;return 0})(i)),Ei(i,i.l_desc),Ei(i,i.d_desc),n=(d=>{let f;for(Or(d,d.dyn_ltree,d.l_desc.max_code),Or(d,d.dyn_dtree,d.d_desc.max_code),Ei(d,d.bl_desc),f=18;f>=3&&d.bl_tree[2*Tr[f]+1]===0;f--);return d.opt_len+=3*(f+1)+5+5+4,f})(i),o=i.opt_len+3+7>>>3,s=i.static_len+3+7>>>3,s<=o&&(o=s)):o=s=t+5,t+4<=o&&e!==-1?yo(i,e,t,r):i.strategy===4||s===o?(nt(i,2+(r?1:0),3),Lr(i,$t,xe)):(nt(i,4+(r?1:0),3),((d,f,h,p)=>{let _;for(nt(d,f-257,5),nt(d,h-1,5),nt(d,p-4,4),_=0;_<p;_++)nt(d,d.bl_tree[2*Tr[_]+1],3);zr(d,d.dyn_ltree,f-1),zr(d,d.dyn_dtree,h-1)})(i,i.l_desc.max_code+1,i.d_desc.max_code+1,n+1),Lr(i,i.dyn_ltree,i.dyn_dtree)),vo(i),r&&go(i)},Ks=(i,e,t)=>(i.pending_buf[i.sym_buf+i.sym_next++]=e,i.pending_buf[i.sym_buf+i.sym_next++]=e>>8,i.pending_buf[i.sym_buf+i.sym_next++]=t,e===0?i.dyn_ltree[2*t]++:(i.matches++,e--,i.dyn_ltree[2*(Ce[t]+Yi+1)]++,i.dyn_dtree[2*fo(e)]++),i.sym_next===i.sym_end),js=i=>{nt(i,2,3),Et(i,256,$t),(e=>{e.bi_valid===16?($e(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(i)},Ys={_tr_init:Zs,_tr_stored_block:yo,_tr_flush_block:Gs,_tr_tally:Ks,_tr_align:js},Be=(i,e,t,r)=>{let o=65535&i|0,s=i>>>16&65535|0,n=0;for(;t!==0;){n=t>2e3?2e3:t,t-=n;do o=o+e[r++]|0,s=s+o|0;while(--n);o%=65521,s%=65521}return o|s<<16|0};const Xs=new Uint32Array((()=>{let i,e=[];for(var t=0;t<256;t++){i=t;for(var r=0;r<8;r++)i=1&i?3988292384^i>>>1:i>>>1;e[t]=i}return e})());var et=(i,e,t,r)=>{const o=Xs,s=r+t;i^=-1;for(let n=r;n<s;n++)i=i>>>8^o[255&(i^e[n])];return-1^i},Yt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ce={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Js,_tr_stored_block:Hi,_tr_flush_block:Qs,_tr_tally:Mt,_tr_align:ta}=Ys,{Z_NO_FLUSH:Nt,Z_PARTIAL_FLUSH:ea,Z_FULL_FLUSH:ia,Z_FINISH:vt,Z_BLOCK:Ur,Z_OK:it,Z_STREAM_END:Pr,Z_STREAM_ERROR:kt,Z_DATA_ERROR:ra,Z_BUF_ERROR:ki,Z_DEFAULT_COMPRESSION:oa,Z_FILTERED:sa,Z_HUFFMAN_ONLY:Ve,Z_RLE:aa,Z_FIXED:na,Z_DEFAULT_STRATEGY:la,Z_UNKNOWN:da,Z_DEFLATED:li}=ce,Vt=258,At=262,ne=42,Zt=113,ve=666,Gt=(i,e)=>(i.msg=Yt[e],e),Fr=i=>2*i-(i>4?9:0),Pt=i=>{let e=i.length;for(;--e>=0;)i[e]=0},ca=i=>{let e,t,r,o=i.w_size;e=i.hash_size,r=e;do t=i.head[--r],i.head[r]=t>=o?t-o:0;while(--e);e=o,r=e;do t=i.prev[--r],i.prev[r]=t>=o?t-o:0;while(--e)};let Ht=(i,e,t)=>(e<<i.hash_shift^t)&i.hash_mask;const dt=i=>{const e=i.state;let t=e.pending;t>i.avail_out&&(t=i.avail_out),t!==0&&(i.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),i.next_out),i.next_out+=t,e.pending_out+=t,i.total_out+=t,i.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},ct=(i,e)=>{Qs(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,e),i.block_start=i.strstart,dt(i.strm)},N=(i,e)=>{i.pending_buf[i.pending++]=e},fe=(i,e)=>{i.pending_buf[i.pending++]=e>>>8&255,i.pending_buf[i.pending++]=255&e},qi=(i,e,t,r)=>{let o=i.avail_in;return o>r&&(o=r),o===0?0:(i.avail_in-=o,e.set(i.input.subarray(i.next_in,i.next_in+o),t),i.state.wrap===1?i.adler=Be(i.adler,e,o,t):i.state.wrap===2&&(i.adler=et(i.adler,e,o,t)),i.next_in+=o,i.total_in+=o,o)},bo=(i,e)=>{let t,r,o=i.max_chain_length,s=i.strstart,n=i.prev_length,d=i.nice_match;const f=i.strstart>i.w_size-At?i.strstart-(i.w_size-At):0,h=i.window,p=i.w_mask,_=i.prev,b=i.strstart+Vt;let g=h[s+n-1],B=h[s+n];i.prev_length>=i.good_match&&(o>>=2),d>i.lookahead&&(d=i.lookahead);do if(t=e,h[t+n]===B&&h[t+n-1]===g&&h[t]===h[s]&&h[++t]===h[s+1]){s+=2,t++;do;while(h[++s]===h[++t]&&h[++s]===h[++t]&&h[++s]===h[++t]&&h[++s]===h[++t]&&h[++s]===h[++t]&&h[++s]===h[++t]&&h[++s]===h[++t]&&h[++s]===h[++t]&&s<b);if(r=Vt-(b-s),s=b-Vt,r>n){if(i.match_start=e,n=r,r>=d)break;g=h[s+n-1],B=h[s+n]}}while((e=_[e&p])>f&&--o!=0);return n<=i.lookahead?n:i.lookahead},le=i=>{const e=i.w_size;let t,r,o;do{if(r=i.window_size-i.lookahead-i.strstart,i.strstart>=e+(e-At)&&(i.window.set(i.window.subarray(e,e+e-r),0),i.match_start-=e,i.strstart-=e,i.block_start-=e,i.insert>i.strstart&&(i.insert=i.strstart),ca(i),r+=e),i.strm.avail_in===0)break;if(t=qi(i.strm,i.window,i.strstart+i.lookahead,r),i.lookahead+=t,i.lookahead+i.insert>=3)for(o=i.strstart-i.insert,i.ins_h=i.window[o],i.ins_h=Ht(i,i.ins_h,i.window[o+1]);i.insert&&(i.ins_h=Ht(i,i.ins_h,i.window[o+3-1]),i.prev[o&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=o,o++,i.insert--,!(i.lookahead+i.insert<3)););}while(i.lookahead<At&&i.strm.avail_in!==0)},_o=(i,e)=>{let t,r,o,s=i.pending_buf_size-5>i.w_size?i.w_size:i.pending_buf_size-5,n=0,d=i.strm.avail_in;do{if(t=65535,o=i.bi_valid+42>>3,i.strm.avail_out<o||(o=i.strm.avail_out-o,r=i.strstart-i.block_start,t>r+i.strm.avail_in&&(t=r+i.strm.avail_in),t>o&&(t=o),t<s&&(t===0&&e!==vt||e===Nt||t!==r+i.strm.avail_in)))break;n=e===vt&&t===r+i.strm.avail_in?1:0,Hi(i,0,0,n),i.pending_buf[i.pending-4]=t,i.pending_buf[i.pending-3]=t>>8,i.pending_buf[i.pending-2]=~t,i.pending_buf[i.pending-1]=~t>>8,dt(i.strm),r&&(r>t&&(r=t),i.strm.output.set(i.window.subarray(i.block_start,i.block_start+r),i.strm.next_out),i.strm.next_out+=r,i.strm.avail_out-=r,i.strm.total_out+=r,i.block_start+=r,t-=r),t&&(qi(i.strm,i.strm.output,i.strm.next_out,t),i.strm.next_out+=t,i.strm.avail_out-=t,i.strm.total_out+=t)}while(n===0);return d-=i.strm.avail_in,d&&(d>=i.w_size?(i.matches=2,i.window.set(i.strm.input.subarray(i.strm.next_in-i.w_size,i.strm.next_in),0),i.strstart=i.w_size,i.insert=i.strstart):(i.window_size-i.strstart<=d&&(i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,i.insert>i.strstart&&(i.insert=i.strstart)),i.window.set(i.strm.input.subarray(i.strm.next_in-d,i.strm.next_in),i.strstart),i.strstart+=d,i.insert+=d>i.w_size-i.insert?i.w_size-i.insert:d),i.block_start=i.strstart),i.high_water<i.strstart&&(i.high_water=i.strstart),n?4:e!==Nt&&e!==vt&&i.strm.avail_in===0&&i.strstart===i.block_start?2:(o=i.window_size-i.strstart,i.strm.avail_in>o&&i.block_start>=i.w_size&&(i.block_start-=i.w_size,i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,o+=i.w_size,i.insert>i.strstart&&(i.insert=i.strstart)),o>i.strm.avail_in&&(o=i.strm.avail_in),o&&(qi(i.strm,i.window,i.strstart,o),i.strstart+=o,i.insert+=o>i.w_size-i.insert?i.w_size-i.insert:o),i.high_water<i.strstart&&(i.high_water=i.strstart),o=i.bi_valid+42>>3,o=i.pending_buf_size-o>65535?65535:i.pending_buf_size-o,s=o>i.w_size?i.w_size:o,r=i.strstart-i.block_start,(r>=s||(r||e===vt)&&e!==Nt&&i.strm.avail_in===0&&r<=o)&&(t=r>o?o:r,n=e===vt&&i.strm.avail_in===0&&t===r?1:0,Hi(i,i.block_start,t,n),i.block_start+=t,dt(i.strm)),n?3:1)},Ai=(i,e)=>{let t,r;for(;;){if(i.lookahead<At){if(le(i),i.lookahead<At&&e===Nt)return 1;if(i.lookahead===0)break}if(t=0,i.lookahead>=3&&(i.ins_h=Ht(i,i.ins_h,i.window[i.strstart+3-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),t!==0&&i.strstart-t<=i.w_size-At&&(i.match_length=bo(i,t)),i.match_length>=3)if(r=Mt(i,i.strstart-i.match_start,i.match_length-3),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=3){i.match_length--;do i.strstart++,i.ins_h=Ht(i,i.ins_h,i.window[i.strstart+3-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!=0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=Ht(i,i.ins_h,i.window[i.strstart+1]);else r=Mt(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(r&&(ct(i,!1),i.strm.avail_out===0))return 1}return i.insert=i.strstart<2?i.strstart:2,e===vt?(ct(i,!0),i.strm.avail_out===0?3:4):i.sym_next&&(ct(i,!1),i.strm.avail_out===0)?1:2},ee=(i,e)=>{let t,r,o;for(;;){if(i.lookahead<At){if(le(i),i.lookahead<At&&e===Nt)return 1;if(i.lookahead===0)break}if(t=0,i.lookahead>=3&&(i.ins_h=Ht(i,i.ins_h,i.window[i.strstart+3-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=2,t!==0&&i.prev_length<i.max_lazy_match&&i.strstart-t<=i.w_size-At&&(i.match_length=bo(i,t),i.match_length<=5&&(i.strategy===sa||i.match_length===3&&i.strstart-i.match_start>4096)&&(i.match_length=2)),i.prev_length>=3&&i.match_length<=i.prev_length){o=i.strstart+i.lookahead-3,r=Mt(i,i.strstart-1-i.prev_match,i.prev_length-3),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=o&&(i.ins_h=Ht(i,i.ins_h,i.window[i.strstart+3-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!=0);if(i.match_available=0,i.match_length=2,i.strstart++,r&&(ct(i,!1),i.strm.avail_out===0))return 1}else if(i.match_available){if(r=Mt(i,0,i.window[i.strstart-1]),r&&ct(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return 1}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(r=Mt(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<2?i.strstart:2,e===vt?(ct(i,!0),i.strm.avail_out===0?3:4):i.sym_next&&(ct(i,!1),i.strm.avail_out===0)?1:2};function xt(i,e,t,r,o){this.good_length=i,this.max_lazy=e,this.nice_length=t,this.max_chain=r,this.func=o}const ge=[new xt(0,0,0,0,_o),new xt(4,4,8,4,Ai),new xt(4,5,16,8,Ai),new xt(4,6,32,32,Ai),new xt(4,4,16,16,ee),new xt(8,16,32,32,ee),new xt(8,16,128,128,ee),new xt(8,32,128,256,ee),new xt(32,128,258,1024,ee),new xt(32,258,258,4096,ee)];function ha(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=li,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Pt(this.dyn_ltree),Pt(this.dyn_dtree),Pt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Pt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Pt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Le=i=>{if(!i)return 1;const e=i.state;return!e||e.strm!==i||e.status!==ne&&e.status!==57&&e.status!==69&&e.status!==73&&e.status!==91&&e.status!==103&&e.status!==Zt&&e.status!==ve?1:0},xo=i=>{if(Le(i))return Gt(i,kt);i.total_in=i.total_out=0,i.data_type=da;const e=i.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?57:e.wrap?ne:Zt,i.adler=e.wrap===2?0:1,e.last_flush=-2,Js(e),it},wo=i=>{const e=xo(i);return e===it&&(t=>{t.window_size=2*t.w_size,Pt(t.head),t.max_lazy_match=ge[t.level].max_lazy,t.good_match=ge[t.level].good_length,t.nice_match=ge[t.level].nice_length,t.max_chain_length=ge[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0})(i.state),e},Mr=(i,e,t,r,o,s)=>{if(!i)return kt;let n=1;if(e===oa&&(e=6),r<0?(n=0,r=-r):r>15&&(n=2,r-=16),o<1||o>9||t!==li||r<8||r>15||e<0||e>9||s<0||s>na||r===8&&n!==1)return Gt(i,kt);r===8&&(r=9);const d=new ha;return i.state=d,d.strm=i,d.status=ne,d.wrap=n,d.gzhead=null,d.w_bits=r,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=o+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+3-1)/3),d.window=new Uint8Array(2*d.w_size),d.head=new Uint16Array(d.hash_size),d.prev=new Uint16Array(d.w_size),d.lit_bufsize=1<<o+6,d.pending_buf_size=4*d.lit_bufsize,d.pending_buf=new Uint8Array(d.pending_buf_size),d.sym_buf=d.lit_bufsize,d.sym_end=3*(d.lit_bufsize-1),d.level=e,d.strategy=s,d.method=t,wo(i)};var pa=(i,e)=>{if(Le(i)||e>Ur||e<0)return i?Gt(i,kt):kt;const t=i.state;if(!i.output||i.avail_in!==0&&!i.input||t.status===ve&&e!==vt)return Gt(i,i.avail_out===0?ki:kt);const r=t.last_flush;if(t.last_flush=e,t.pending!==0){if(dt(i),i.avail_out===0)return t.last_flush=-1,it}else if(i.avail_in===0&&Fr(e)<=Fr(r)&&e!==vt)return Gt(i,ki);if(t.status===ve&&i.avail_in!==0)return Gt(i,ki);if(t.status===ne&&t.wrap===0&&(t.status=Zt),t.status===ne){let o=li+(t.w_bits-8<<4)<<8,s=-1;if(s=t.strategy>=Ve||t.level<2?0:t.level<6?1:t.level===6?2:3,o|=s<<6,t.strstart!==0&&(o|=32),o+=31-o%31,fe(t,o),t.strstart!==0&&(fe(t,i.adler>>>16),fe(t,65535&i.adler)),i.adler=1,t.status=Zt,dt(i),t.pending!==0)return t.last_flush=-1,it}if(t.status===57){if(i.adler=0,N(t,31),N(t,139),N(t,8),t.gzhead)N(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),N(t,255&t.gzhead.time),N(t,t.gzhead.time>>8&255),N(t,t.gzhead.time>>16&255),N(t,t.gzhead.time>>24&255),N(t,t.level===9?2:t.strategy>=Ve||t.level<2?4:0),N(t,255&t.gzhead.os),t.gzhead.extra&&t.gzhead.extra.length&&(N(t,255&t.gzhead.extra.length),N(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(i.adler=et(i.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=69;else if(N(t,0),N(t,0),N(t,0),N(t,0),N(t,0),N(t,t.level===9?2:t.strategy>=Ve||t.level<2?4:0),N(t,3),t.status=Zt,dt(i),t.pending!==0)return t.last_flush=-1,it}if(t.status===69){if(t.gzhead.extra){let o=t.pending,s=(65535&t.gzhead.extra.length)-t.gzindex;for(;t.pending+s>t.pending_buf_size;){let d=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+d),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>o&&(i.adler=et(i.adler,t.pending_buf,t.pending-o,o)),t.gzindex+=d,dt(i),t.pending!==0)return t.last_flush=-1,it;o=0,s-=d}let n=new Uint8Array(t.gzhead.extra);t.pending_buf.set(n.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending+=s,t.gzhead.hcrc&&t.pending>o&&(i.adler=et(i.adler,t.pending_buf,t.pending-o,o)),t.gzindex=0}t.status=73}if(t.status===73){if(t.gzhead.name){let o,s=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>s&&(i.adler=et(i.adler,t.pending_buf,t.pending-s,s)),dt(i),t.pending!==0)return t.last_flush=-1,it;s=0}o=t.gzindex<t.gzhead.name.length?255&t.gzhead.name.charCodeAt(t.gzindex++):0,N(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>s&&(i.adler=et(i.adler,t.pending_buf,t.pending-s,s)),t.gzindex=0}t.status=91}if(t.status===91){if(t.gzhead.comment){let o,s=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>s&&(i.adler=et(i.adler,t.pending_buf,t.pending-s,s)),dt(i),t.pending!==0)return t.last_flush=-1,it;s=0}o=t.gzindex<t.gzhead.comment.length?255&t.gzhead.comment.charCodeAt(t.gzindex++):0,N(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>s&&(i.adler=et(i.adler,t.pending_buf,t.pending-s,s))}t.status=103}if(t.status===103){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(dt(i),t.pending!==0))return t.last_flush=-1,it;N(t,255&i.adler),N(t,i.adler>>8&255),i.adler=0}if(t.status=Zt,dt(i),t.pending!==0)return t.last_flush=-1,it}if(i.avail_in!==0||t.lookahead!==0||e!==Nt&&t.status!==ve){let o=t.level===0?_o(t,e):t.strategy===Ve?((s,n)=>{let d;for(;;){if(s.lookahead===0&&(le(s),s.lookahead===0)){if(n===Nt)return 1;break}if(s.match_length=0,d=Mt(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++,d&&(ct(s,!1),s.strm.avail_out===0))return 1}return s.insert=0,n===vt?(ct(s,!0),s.strm.avail_out===0?3:4):s.sym_next&&(ct(s,!1),s.strm.avail_out===0)?1:2})(t,e):t.strategy===aa?((s,n)=>{let d,f,h,p;const _=s.window;for(;;){if(s.lookahead<=Vt){if(le(s),s.lookahead<=Vt&&n===Nt)return 1;if(s.lookahead===0)break}if(s.match_length=0,s.lookahead>=3&&s.strstart>0&&(h=s.strstart-1,f=_[h],f===_[++h]&&f===_[++h]&&f===_[++h])){p=s.strstart+Vt;do;while(f===_[++h]&&f===_[++h]&&f===_[++h]&&f===_[++h]&&f===_[++h]&&f===_[++h]&&f===_[++h]&&f===_[++h]&&h<p);s.match_length=Vt-(p-h),s.match_length>s.lookahead&&(s.match_length=s.lookahead)}if(s.match_length>=3?(d=Mt(s,1,s.match_length-3),s.lookahead-=s.match_length,s.strstart+=s.match_length,s.match_length=0):(d=Mt(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++),d&&(ct(s,!1),s.strm.avail_out===0))return 1}return s.insert=0,n===vt?(ct(s,!0),s.strm.avail_out===0?3:4):s.sym_next&&(ct(s,!1),s.strm.avail_out===0)?1:2})(t,e):ge[t.level].func(t,e);if(o!==3&&o!==4||(t.status=ve),o===1||o===3)return i.avail_out===0&&(t.last_flush=-1),it;if(o===2&&(e===ea?ta(t):e!==Ur&&(Hi(t,0,0,!1),e===ia&&(Pt(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),dt(i),i.avail_out===0))return t.last_flush=-1,it}return e!==vt?it:t.wrap<=0?Pr:(t.wrap===2?(N(t,255&i.adler),N(t,i.adler>>8&255),N(t,i.adler>>16&255),N(t,i.adler>>24&255),N(t,255&i.total_in),N(t,i.total_in>>8&255),N(t,i.total_in>>16&255),N(t,i.total_in>>24&255)):(fe(t,i.adler>>>16),fe(t,65535&i.adler)),dt(i),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?it:Pr)},fa=(i,e)=>{let t=e.length;if(Le(i))return kt;const r=i.state,o=r.wrap;if(o===2||o===1&&r.status!==ne||r.lookahead)return kt;if(o===1&&(i.adler=Be(i.adler,e,t,0)),r.wrap=0,t>=r.w_size){o===0&&(Pt(r.head),r.strstart=0,r.block_start=0,r.insert=0);let f=new Uint8Array(r.w_size);f.set(e.subarray(t-r.w_size,t),0),e=f,t=r.w_size}const s=i.avail_in,n=i.next_in,d=i.input;for(i.avail_in=t,i.next_in=0,i.input=e,le(r);r.lookahead>=3;){let f=r.strstart,h=r.lookahead-2;do r.ins_h=Ht(r,r.ins_h,r.window[f+3-1]),r.prev[f&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=f,f++;while(--h);r.strstart=f,r.lookahead=2,le(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,i.next_in=n,i.input=d,i.avail_in=s,r.wrap=o,it},we={deflateInit:(i,e)=>Mr(i,e,li,15,8,la),deflateInit2:Mr,deflateReset:wo,deflateResetKeep:xo,deflateSetHeader:(i,e)=>Le(i)||i.state.wrap!==2?kt:(i.state.gzhead=e,it),deflate:pa,deflateEnd:i=>{if(Le(i))return kt;const e=i.state.status;return i.state=null,e===Zt?Gt(i,ra):it},deflateSetDictionary:fa,deflateInfo:"pako deflate (from Nodeca project)"};const ua=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var di={assign:function(i){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)ua(t,r)&&(i[r]=t[r])}}return i},flattenChunks:i=>{let e=0;for(let r=0,o=i.length;r<o;r++)e+=i[r].length;const t=new Uint8Array(e);for(let r=0,o=0,s=i.length;r<s;r++){let n=i[r];t.set(n,o),o+=n.length}return t}};let Eo=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Eo=!1}const Oe=new Uint8Array(256);for(let i=0;i<256;i++)Oe[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;Oe[254]=Oe[254]=1;var ze={string2buf:i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let e,t,r,o,s,n=i.length,d=0;for(o=0;o<n;o++)t=i.charCodeAt(o),(64512&t)==55296&&o+1<n&&(r=i.charCodeAt(o+1),(64512&r)==56320&&(t=65536+(t-55296<<10)+(r-56320),o++)),d+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(d),s=0,o=0;s<d;o++)t=i.charCodeAt(o),(64512&t)==55296&&o+1<n&&(r=i.charCodeAt(o+1),(64512&r)==56320&&(t=65536+(t-55296<<10)+(r-56320),o++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|63&t):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|63&t):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|63&t);return e},buf2string:(i,e)=>{const t=e||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,e));let r,o;const s=new Array(2*t);for(o=0,r=0;r<t;){let n=i[r++];if(n<128){s[o++]=n;continue}let d=Oe[n];if(d>4)s[o++]=65533,r+=d-1;else{for(n&=d===2?31:d===3?15:7;d>1&&r<t;)n=n<<6|63&i[r++],d--;d>1?s[o++]=65533:n<65536?s[o++]=n:(n-=65536,s[o++]=55296|n>>10&1023,s[o++]=56320|1023&n)}}return((n,d)=>{if(d<65534&&n.subarray&&Eo)return String.fromCharCode.apply(null,n.length===d?n:n.subarray(0,d));let f="";for(let h=0;h<d;h++)f+=String.fromCharCode(n[h]);return f})(s,o)},utf8border:(i,e)=>{(e=e||i.length)>i.length&&(e=i.length);let t=e-1;for(;t>=0&&(192&i[t])==128;)t--;return t<0||t===0?e:t+Oe[i[t]]>e?t:e}},ko=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ao=Object.prototype.toString,{Z_NO_FLUSH:ma,Z_SYNC_FLUSH:va,Z_FULL_FLUSH:ga,Z_FINISH:ya,Z_OK:ri,Z_STREAM_END:ba,Z_DEFAULT_COMPRESSION:_a,Z_DEFAULT_STRATEGY:xa,Z_DEFLATED:wa}=ce;function Ee(i){this.options=di.assign({level:_a,method:wa,chunkSize:16384,windowBits:15,memLevel:8,strategy:xa},i||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ko,this.strm.avail_out=0;let t=we.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==ri)throw new Error(Yt[t]);if(e.header&&we.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(r=typeof e.dictionary=="string"?ze.string2buf(e.dictionary):Ao.call(e.dictionary)==="[object ArrayBuffer]"?new Uint8Array(e.dictionary):e.dictionary,t=we.deflateSetDictionary(this.strm,r),t!==ri)throw new Error(Yt[t]);this._dict_set=!0}}function Si(i,e){const t=new Ee(e);if(t.push(i,!0),t.err)throw t.msg||Yt[t.err];return t.result}Ee.prototype.push=function(i,e){const t=this.strm,r=this.options.chunkSize;let o,s;if(this.ended)return!1;for(s=e===~~e?e:e===!0?ya:ma,typeof i=="string"?t.input=ze.string2buf(i):Ao.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;)if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(s===va||s===ga)&&t.avail_out<=6)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else{if(o=we.deflate(t,s),o===ba)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),o=we.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===ri;if(t.avail_out!==0){if(s>0&&t.next_out>0)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else if(t.avail_in===0)break}else this.onData(t.output)}return!0},Ee.prototype.onData=function(i){this.chunks.push(i)},Ee.prototype.onEnd=function(i){i===ri&&(this.result=di.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};var Ea={Deflate:Ee,deflate:Si,deflateRaw:function(i,e){return(e=e||{}).raw=!0,Si(i,e)},gzip:function(i,e){return(e=e||{}).gzip=!0,Si(i,e)},constants:ce};const Ze=16209;var ka=function(i,e){let t,r,o,s,n,d,f,h,p,_,b,g,B,k,x,I,T,w,C,z,S,P,O,$;const D=i.state;t=i.next_in,O=i.input,r=t+(i.avail_in-5),o=i.next_out,$=i.output,s=o-(e-i.avail_out),n=o+(i.avail_out-257),d=D.dmax,f=D.wsize,h=D.whave,p=D.wnext,_=D.window,b=D.hold,g=D.bits,B=D.lencode,k=D.distcode,x=(1<<D.lenbits)-1,I=(1<<D.distbits)-1;t:do{g<15&&(b+=O[t++]<<g,g+=8,b+=O[t++]<<g,g+=8),T=B[b&x];e:for(;;){if(w=T>>>24,b>>>=w,g-=w,w=T>>>16&255,w===0)$[o++]=65535&T;else{if(!(16&w)){if(!(64&w)){T=B[(65535&T)+(b&(1<<w)-1)];continue e}if(32&w){D.mode=16191;break t}i.msg="invalid literal/length code",D.mode=Ze;break t}C=65535&T,w&=15,w&&(g<w&&(b+=O[t++]<<g,g+=8),C+=b&(1<<w)-1,b>>>=w,g-=w),g<15&&(b+=O[t++]<<g,g+=8,b+=O[t++]<<g,g+=8),T=k[b&I];i:for(;;){if(w=T>>>24,b>>>=w,g-=w,w=T>>>16&255,!(16&w)){if(!(64&w)){T=k[(65535&T)+(b&(1<<w)-1)];continue i}i.msg="invalid distance code",D.mode=Ze;break t}if(z=65535&T,w&=15,g<w&&(b+=O[t++]<<g,g+=8,g<w&&(b+=O[t++]<<g,g+=8)),z+=b&(1<<w)-1,z>d){i.msg="invalid distance too far back",D.mode=Ze;break t}if(b>>>=w,g-=w,w=o-s,z>w){if(w=z-w,w>h&&D.sane){i.msg="invalid distance too far back",D.mode=Ze;break t}if(S=0,P=_,p===0){if(S+=f-w,w<C){C-=w;do $[o++]=_[S++];while(--w);S=o-z,P=$}}else if(p<w){if(S+=f+p-w,w-=p,w<C){C-=w;do $[o++]=_[S++];while(--w);if(S=0,p<C){w=p,C-=w;do $[o++]=_[S++];while(--w);S=o-z,P=$}}}else if(S+=p-w,w<C){C-=w;do $[o++]=_[S++];while(--w);S=o-z,P=$}for(;C>2;)$[o++]=P[S++],$[o++]=P[S++],$[o++]=P[S++],C-=3;C&&($[o++]=P[S++],C>1&&($[o++]=P[S++]))}else{S=o-z;do $[o++]=$[S++],$[o++]=$[S++],$[o++]=$[S++],C-=3;while(C>2);C&&($[o++]=$[S++],C>1&&($[o++]=$[S++]))}break}}break}}while(t<r&&o<n);C=g>>3,t-=C,g-=C<<3,b&=(1<<g)-1,i.next_in=t,i.next_out=o,i.avail_in=t<r?r-t+5:5-(t-r),i.avail_out=o<n?n-o+257:257-(o-n),D.hold=b,D.bits=g};const Ge=15,Aa=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Sa=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ra=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ta=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ke=(i,e,t,r,o,s,n,d)=>{const f=d.bits;let h,p,_,b,g,B,k=0,x=0,I=0,T=0,w=0,C=0,z=0,S=0,P=0,O=0,$=null;const D=new Uint16Array(16),K=new Uint16Array(16);let at,St,q,G=null;for(k=0;k<=Ge;k++)D[k]=0;for(x=0;x<r;x++)D[e[t+x]]++;for(w=f,T=Ge;T>=1&&D[T]===0;T--);if(w>T&&(w=T),T===0)return o[s++]=20971520,o[s++]=20971520,d.bits=1,0;for(I=1;I<T&&D[I]===0;I++);for(w<I&&(w=I),S=1,k=1;k<=Ge;k++)if(S<<=1,S-=D[k],S<0)return-1;if(S>0&&(i===0||T!==1))return-1;for(K[1]=0,k=1;k<Ge;k++)K[k+1]=K[k]+D[k];for(x=0;x<r;x++)e[t+x]!==0&&(n[K[e[t+x]]++]=x);if(i===0?($=G=n,B=20):i===1?($=Aa,G=Sa,B=257):($=Ra,G=Ta,B=0),O=0,x=0,k=I,g=s,C=w,z=0,_=-1,P=1<<w,b=P-1,i===1&&P>852||i===2&&P>592)return 1;for(;;){at=k-z,n[x]+1<B?(St=0,q=n[x]):n[x]>=B?(St=G[n[x]-B],q=$[n[x]-B]):(St=96,q=0),h=1<<k-z,p=1<<C,I=p;do p-=h,o[g+(O>>z)+p]=at<<24|St<<16|q|0;while(p!==0);for(h=1<<k-1;O&h;)h>>=1;if(h!==0?(O&=h-1,O+=h):O=0,x++,--D[k]==0){if(k===T)break;k=e[t+n[x]]}if(k>w&&(O&b)!==_){for(z===0&&(z=w),g+=I,C=k-z,S=1<<C;C+z<T&&(S-=D[C+z],!(S<=0));)C++,S<<=1;if(P+=1<<C,i===1&&P>852||i===2&&P>592)return 1;_=O&b,o[_]=w<<24|C<<16|g-s|0}}return O!==0&&(o[g+O]=k-z<<24|64<<16|0),d.bits=w,0};const{Z_FINISH:Nr,Z_BLOCK:Ia,Z_TREES:Ke,Z_OK:Kt,Z_STREAM_END:Ca,Z_NEED_DICT:$a,Z_STREAM_ERROR:gt,Z_DATA_ERROR:So,Z_MEM_ERROR:Ro,Z_BUF_ERROR:Ba,Z_DEFLATED:Hr}=ce,ci=16180,oi=16190,Tt=16191,Ri=16192,Ti=16194,je=16199,Ye=16200,Ii=16206,Z=16209,qr=i=>(i>>>24&255)+(i>>>8&65280)+((65280&i)<<8)+((255&i)<<24);function La(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const jt=i=>{if(!i)return 1;const e=i.state;return!e||e.strm!==i||e.mode<ci||e.mode>16211?1:0},To=i=>{if(jt(i))return gt;const e=i.state;return i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=1&e.wrap),e.mode=ci,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,Kt},Io=i=>{if(jt(i))return gt;const e=i.state;return e.wsize=0,e.whave=0,e.wnext=0,To(i)},Co=(i,e)=>{let t;if(jt(i))return gt;const r=i.state;return e<0?(t=0,e=-e):(t=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?gt:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,Io(i))},Wr=(i,e)=>{if(!i)return gt;const t=new La;i.state=t,t.strm=i,t.window=null,t.mode=ci;const r=Co(i,e);return r!==Kt&&(i.state=null),r};let Ci,$i,Vr=!0;const Oa=i=>{if(Vr){Ci=new Int32Array(512),$i=new Int32Array(32);let e=0;for(;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(ke(1,i.lens,0,288,Ci,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;ke(2,i.lens,0,32,$i,0,i.work,{bits:5}),Vr=!1}i.lencode=Ci,i.lenbits=9,i.distcode=$i,i.distbits=5},$o=(i,e,t,r)=>{let o;const s=i.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(o=s.wsize-s.wnext,o>r&&(o=r),s.window.set(e.subarray(t-r,t-r+o),s.wnext),(r-=o)?(s.window.set(e.subarray(t-r,t),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0};var za=(i,e)=>{let t,r,o,s,n,d,f,h,p,_,b,g,B,k,x,I,T,w,C,z,S,P,O=0;const $=new Uint8Array(4);let D,K;const at=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(jt(i)||!i.output||!i.input&&i.avail_in!==0)return gt;t=i.state,t.mode===Tt&&(t.mode=Ri),n=i.next_out,o=i.output,f=i.avail_out,s=i.next_in,r=i.input,d=i.avail_in,h=t.hold,p=t.bits,_=d,b=f,P=Kt;t:for(;;)switch(t.mode){case ci:if(t.wrap===0){t.mode=Ri;break}for(;p<16;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}if(2&t.wrap&&h===35615){t.wbits===0&&(t.wbits=15),t.check=0,$[0]=255&h,$[1]=h>>>8&255,t.check=et(t.check,$,2,0),h=0,p=0,t.mode=16181;break}if(t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&h)<<8)+(h>>8))%31){i.msg="incorrect header check",t.mode=Z;break}if((15&h)!==Hr){i.msg="unknown compression method",t.mode=Z;break}if(h>>>=4,p-=4,S=8+(15&h),t.wbits===0&&(t.wbits=S),S>15||S>t.wbits){i.msg="invalid window size",t.mode=Z;break}t.dmax=1<<t.wbits,t.flags=0,i.adler=t.check=1,t.mode=512&h?16189:Tt,h=0,p=0;break;case 16181:for(;p<16;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}if(t.flags=h,(255&t.flags)!==Hr){i.msg="unknown compression method",t.mode=Z;break}if(57344&t.flags){i.msg="unknown header flags set",t.mode=Z;break}t.head&&(t.head.text=h>>8&1),512&t.flags&&4&t.wrap&&($[0]=255&h,$[1]=h>>>8&255,t.check=et(t.check,$,2,0)),h=0,p=0,t.mode=16182;case 16182:for(;p<32;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}t.head&&(t.head.time=h),512&t.flags&&4&t.wrap&&($[0]=255&h,$[1]=h>>>8&255,$[2]=h>>>16&255,$[3]=h>>>24&255,t.check=et(t.check,$,4,0)),h=0,p=0,t.mode=16183;case 16183:for(;p<16;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}t.head&&(t.head.xflags=255&h,t.head.os=h>>8),512&t.flags&&4&t.wrap&&($[0]=255&h,$[1]=h>>>8&255,t.check=et(t.check,$,2,0)),h=0,p=0,t.mode=16184;case 16184:if(1024&t.flags){for(;p<16;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}t.length=h,t.head&&(t.head.extra_len=h),512&t.flags&&4&t.wrap&&($[0]=255&h,$[1]=h>>>8&255,t.check=et(t.check,$,2,0)),h=0,p=0}else t.head&&(t.head.extra=null);t.mode=16185;case 16185:if(1024&t.flags&&(g=t.length,g>d&&(g=d),g&&(t.head&&(S=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(s,s+g),S)),512&t.flags&&4&t.wrap&&(t.check=et(t.check,r,g,s)),d-=g,s+=g,t.length-=g),t.length))break t;t.length=0,t.mode=16186;case 16186:if(2048&t.flags){if(d===0)break t;g=0;do S=r[s+g++],t.head&&S&&t.length<65536&&(t.head.name+=String.fromCharCode(S));while(S&&g<d);if(512&t.flags&&4&t.wrap&&(t.check=et(t.check,r,g,s)),d-=g,s+=g,S)break t}else t.head&&(t.head.name=null);t.length=0,t.mode=16187;case 16187:if(4096&t.flags){if(d===0)break t;g=0;do S=r[s+g++],t.head&&S&&t.length<65536&&(t.head.comment+=String.fromCharCode(S));while(S&&g<d);if(512&t.flags&&4&t.wrap&&(t.check=et(t.check,r,g,s)),d-=g,s+=g,S)break t}else t.head&&(t.head.comment=null);t.mode=16188;case 16188:if(512&t.flags){for(;p<16;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}if(4&t.wrap&&h!==(65535&t.check)){i.msg="header crc mismatch",t.mode=Z;break}h=0,p=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=Tt;break;case 16189:for(;p<32;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}i.adler=t.check=qr(h),h=0,p=0,t.mode=oi;case oi:if(t.havedict===0)return i.next_out=n,i.avail_out=f,i.next_in=s,i.avail_in=d,t.hold=h,t.bits=p,$a;i.adler=t.check=1,t.mode=Tt;case Tt:if(e===Ia||e===Ke)break t;case Ri:if(t.last){h>>>=7&p,p-=7&p,t.mode=Ii;break}for(;p<3;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}switch(t.last=1&h,h>>>=1,p-=1,3&h){case 0:t.mode=16193;break;case 1:if(Oa(t),t.mode=je,e===Ke){h>>>=2,p-=2;break t}break;case 2:t.mode=16196;break;case 3:i.msg="invalid block type",t.mode=Z}h>>>=2,p-=2;break;case 16193:for(h>>>=7&p,p-=7&p;p<32;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}if((65535&h)!=(h>>>16^65535)){i.msg="invalid stored block lengths",t.mode=Z;break}if(t.length=65535&h,h=0,p=0,t.mode=Ti,e===Ke)break t;case Ti:t.mode=16195;case 16195:if(g=t.length,g){if(g>d&&(g=d),g>f&&(g=f),g===0)break t;o.set(r.subarray(s,s+g),n),d-=g,s+=g,f-=g,n+=g,t.length-=g;break}t.mode=Tt;break;case 16196:for(;p<14;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}if(t.nlen=257+(31&h),h>>>=5,p-=5,t.ndist=1+(31&h),h>>>=5,p-=5,t.ncode=4+(15&h),h>>>=4,p-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=Z;break}t.have=0,t.mode=16197;case 16197:for(;t.have<t.ncode;){for(;p<3;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}t.lens[at[t.have++]]=7&h,h>>>=3,p-=3}for(;t.have<19;)t.lens[at[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,D={bits:t.lenbits},P=ke(0,t.lens,0,19,t.lencode,0,t.work,D),t.lenbits=D.bits,P){i.msg="invalid code lengths set",t.mode=Z;break}t.have=0,t.mode=16198;case 16198:for(;t.have<t.nlen+t.ndist;){for(;O=t.lencode[h&(1<<t.lenbits)-1],x=O>>>24,I=O>>>16&255,T=65535&O,!(x<=p);){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}if(T<16)h>>>=x,p-=x,t.lens[t.have++]=T;else{if(T===16){for(K=x+2;p<K;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}if(h>>>=x,p-=x,t.have===0){i.msg="invalid bit length repeat",t.mode=Z;break}S=t.lens[t.have-1],g=3+(3&h),h>>>=2,p-=2}else if(T===17){for(K=x+3;p<K;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}h>>>=x,p-=x,S=0,g=3+(7&h),h>>>=3,p-=3}else{for(K=x+7;p<K;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}h>>>=x,p-=x,S=0,g=11+(127&h),h>>>=7,p-=7}if(t.have+g>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=Z;break}for(;g--;)t.lens[t.have++]=S}}if(t.mode===Z)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=Z;break}if(t.lenbits=9,D={bits:t.lenbits},P=ke(1,t.lens,0,t.nlen,t.lencode,0,t.work,D),t.lenbits=D.bits,P){i.msg="invalid literal/lengths set",t.mode=Z;break}if(t.distbits=6,t.distcode=t.distdyn,D={bits:t.distbits},P=ke(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,D),t.distbits=D.bits,P){i.msg="invalid distances set",t.mode=Z;break}if(t.mode=je,e===Ke)break t;case je:t.mode=Ye;case Ye:if(d>=6&&f>=258){i.next_out=n,i.avail_out=f,i.next_in=s,i.avail_in=d,t.hold=h,t.bits=p,ka(i,b),n=i.next_out,o=i.output,f=i.avail_out,s=i.next_in,r=i.input,d=i.avail_in,h=t.hold,p=t.bits,t.mode===Tt&&(t.back=-1);break}for(t.back=0;O=t.lencode[h&(1<<t.lenbits)-1],x=O>>>24,I=O>>>16&255,T=65535&O,!(x<=p);){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}if(I&&!(240&I)){for(w=x,C=I,z=T;O=t.lencode[z+((h&(1<<w+C)-1)>>w)],x=O>>>24,I=O>>>16&255,T=65535&O,!(w+x<=p);){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}h>>>=w,p-=w,t.back+=w}if(h>>>=x,p-=x,t.back+=x,t.length=T,I===0){t.mode=16205;break}if(32&I){t.back=-1,t.mode=Tt;break}if(64&I){i.msg="invalid literal/length code",t.mode=Z;break}t.extra=15&I,t.mode=16201;case 16201:if(t.extra){for(K=t.extra;p<K;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}t.length+=h&(1<<t.extra)-1,h>>>=t.extra,p-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=16202;case 16202:for(;O=t.distcode[h&(1<<t.distbits)-1],x=O>>>24,I=O>>>16&255,T=65535&O,!(x<=p);){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}if(!(240&I)){for(w=x,C=I,z=T;O=t.distcode[z+((h&(1<<w+C)-1)>>w)],x=O>>>24,I=O>>>16&255,T=65535&O,!(w+x<=p);){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}h>>>=w,p-=w,t.back+=w}if(h>>>=x,p-=x,t.back+=x,64&I){i.msg="invalid distance code",t.mode=Z;break}t.offset=T,t.extra=15&I,t.mode=16203;case 16203:if(t.extra){for(K=t.extra;p<K;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}t.offset+=h&(1<<t.extra)-1,h>>>=t.extra,p-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=Z;break}t.mode=16204;case 16204:if(f===0)break t;if(g=b-f,t.offset>g){if(g=t.offset-g,g>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=Z;break}g>t.wnext?(g-=t.wnext,B=t.wsize-g):B=t.wnext-g,g>t.length&&(g=t.length),k=t.window}else k=o,B=n-t.offset,g=t.length;g>f&&(g=f),f-=g,t.length-=g;do o[n++]=k[B++];while(--g);t.length===0&&(t.mode=Ye);break;case 16205:if(f===0)break t;o[n++]=t.length,f--,t.mode=Ye;break;case Ii:if(t.wrap){for(;p<32;){if(d===0)break t;d--,h|=r[s++]<<p,p+=8}if(b-=f,i.total_out+=b,t.total+=b,4&t.wrap&&b&&(i.adler=t.check=t.flags?et(t.check,o,b,n-b):Be(t.check,o,b,n-b)),b=f,4&t.wrap&&(t.flags?h:qr(h))!==t.check){i.msg="incorrect data check",t.mode=Z;break}h=0,p=0}t.mode=16207;case 16207:if(t.wrap&&t.flags){for(;p<32;){if(d===0)break t;d--,h+=r[s++]<<p,p+=8}if(4&t.wrap&&h!==(4294967295&t.total)){i.msg="incorrect length check",t.mode=Z;break}h=0,p=0}t.mode=16208;case 16208:P=Ca;break t;case Z:P=So;break t;case 16210:return Ro;default:return gt}return i.next_out=n,i.avail_out=f,i.next_in=s,i.avail_in=d,t.hold=h,t.bits=p,(t.wsize||b!==i.avail_out&&t.mode<Z&&(t.mode<Ii||e!==Nr))&&$o(i,i.output,i.next_out,b-i.avail_out),_-=i.avail_in,b-=i.avail_out,i.total_in+=_,i.total_out+=b,t.total+=b,4&t.wrap&&b&&(i.adler=t.check=t.flags?et(t.check,o,b,i.next_out-b):Be(t.check,o,b,i.next_out-b)),i.data_type=t.bits+(t.last?64:0)+(t.mode===Tt?128:0)+(t.mode===je||t.mode===Ti?256:0),(_===0&&b===0||e===Nr)&&P===Kt&&(P=Ba),P},Bt={inflateReset:Io,inflateReset2:Co,inflateResetKeep:To,inflateInit:i=>Wr(i,15),inflateInit2:Wr,inflate:za,inflateEnd:i=>{if(jt(i))return gt;let e=i.state;return e.window&&(e.window=null),i.state=null,Kt},inflateGetHeader:(i,e)=>{if(jt(i))return gt;const t=i.state;return 2&t.wrap?(t.head=e,e.done=!1,Kt):gt},inflateSetDictionary:(i,e)=>{const t=e.length;let r,o,s;return jt(i)?gt:(r=i.state,r.wrap!==0&&r.mode!==oi?gt:r.mode===oi&&(o=1,o=Be(o,e,t,0),o!==r.check)?So:(s=$o(i,e,t,t),s?(r.mode=16210,Ro):(r.havedict=1,Kt)))},inflateInfo:"pako inflate (from Nodeca project)"},Da=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Bo=Object.prototype.toString,{Z_NO_FLUSH:Ua,Z_FINISH:Pa,Z_OK:Ae,Z_STREAM_END:Bi,Z_NEED_DICT:Li,Z_STREAM_ERROR:Fa,Z_DATA_ERROR:Zr,Z_MEM_ERROR:Ma}=ce;function Se(i){this.options=di.assign({chunkSize:65536,windowBits:15,to:""},i||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||i&&i.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&!(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ko,this.strm.avail_out=0;let t=Bt.inflateInit2(this.strm,e.windowBits);if(t!==Ae)throw new Error(Yt[t]);if(this.header=new Da,Bt.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=ze.string2buf(e.dictionary):Bo.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Bt.inflateSetDictionary(this.strm,e.dictionary),t!==Ae)))throw new Error(Yt[t])}function Oi(i,e){const t=new Se(e);if(t.push(i),t.err)throw t.msg||Yt[t.err];return t.result}Se.prototype.push=function(i,e){const t=this.strm,r=this.options.chunkSize,o=this.options.dictionary;let s,n,d;if(this.ended)return!1;for(n=e===~~e?e:e===!0?Pa:Ua,Bo.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),s=Bt.inflate(t,n),s===Li&&o&&(s=Bt.inflateSetDictionary(t,o),s===Ae?s=Bt.inflate(t,n):s===Zr&&(s=Li));t.avail_in>0&&s===Bi&&t.state.wrap>0&&i[t.next_in]!==0;)Bt.inflateReset(t),s=Bt.inflate(t,n);switch(s){case Fa:case Zr:case Li:case Ma:return this.onEnd(s),this.ended=!0,!1}if(d=t.avail_out,t.next_out&&(t.avail_out===0||s===Bi))if(this.options.to==="string"){let f=ze.utf8border(t.output,t.next_out),h=t.next_out-f,p=ze.buf2string(t.output,f);t.next_out=h,t.avail_out=r-h,h&&t.output.set(t.output.subarray(f,f+h),0),this.onData(p)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(s!==Ae||d!==0){if(s===Bi)return s=Bt.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0},Se.prototype.onData=function(i){this.chunks.push(i)},Se.prototype.onEnd=function(i){i===Ae&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=di.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};var Na={Inflate:Se,inflate:Oi,inflateRaw:function(i,e){return(e=e||{}).raw=!0,Oi(i,e)},ungzip:Oi,constants:ce};const{Deflate:tn,deflate:Ha,deflateRaw:en,gzip:rn}=Ea,{Inflate:qa,inflate:on,inflateRaw:sn,ungzip:an}=Na;var Wa=Ha,Va=qa;class Lo{constructor(e,t=!1,r=!0){this.device=e,this.tracing=t,this.slipReaderEnabled=!1,this.leftOver=new Uint8Array(0),this.baudrate=0,this.traceLog="",this.lastTraceTime=Date.now(),this._DTR_state=!1,this.slipReaderEnabled=r}getInfo(){const e=this.device.getInfo();return e.usbVendorId&&e.usbProductId?`WebSerial VendorID 0x${e.usbVendorId.toString(16)} ProductID 0x${e.usbProductId.toString(16)}`:""}getPid(){return this.device.getInfo().usbProductId}trace(e){const t=`${`TRACE ${(Date.now()-this.lastTraceTime).toFixed(3)}`} ${e}`;console.log(t),this.traceLog+=t+`
`}async returnTrace(){try{await navigator.clipboard.writeText(this.traceLog),console.log("Text copied to clipboard!")}catch(e){console.error("Failed to copy text:",e)}}hexify(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("").padEnd(16," ")}hexConvert(e,t=!0){if(t&&e.length>16){let r="",o=e;for(;o.length>0;){const s=o.slice(0,16),n=String.fromCharCode(...s).split("").map(d=>d===" "||d>=" "&&d<="~"&&d!=="  "?d:".").join("");o=o.slice(16),r+=`
    ${this.hexify(s.slice(0,8))} ${this.hexify(s.slice(8))} | ${n}`}return r}return this.hexify(e)}slipWriter(e){const t=[];t.push(192);for(let r=0;r<e.length;r++)e[r]===219?t.push(219,221):e[r]===192?t.push(219,220):t.push(e[r]);return t.push(192),new Uint8Array(t)}async write(e){const t=this.slipWriter(e);if(this.device.writable){const r=this.device.writable.getWriter();this.tracing&&(console.log("Write bytes"),this.trace(`Write ${t.length} bytes: ${this.hexConvert(t)}`)),await r.write(t),r.releaseLock()}}_appendBuffer(e,t){const r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r.buffer}slipReader(e){let t=0,r=0,o=0,s="init";for(;t<e.length;)if(s!=="init"||e[t]!=192){if(s==="valid_data"&&e[t]==192){o=t-1,s="packet_complete";break}t++}else r=t+1,s="valid_data",t++;if(s!=="packet_complete")return this.leftOver=e,new Uint8Array(0);this.leftOver=e.slice(o+2);const n=new Uint8Array(o-r+1);let d=0;for(t=r;t<=o;t++,d++)e[t]!==219||e[t+1]!==220?e[t]!==219||e[t+1]!==221?n[d]=e[t]:(n[d]=219,t++):(n[d]=192,t++);return n.slice(0,d)}async read(e=0,t=12){let r,o=this.leftOver;if(this.leftOver=new Uint8Array(0),this.slipReaderEnabled){const n=this.slipReader(o);if(n.length>0)return n;o=this.leftOver,this.leftOver=new Uint8Array(0)}if(this.device.readable==null)return this.leftOver;const s=this.device.readable.getReader();try{e>0&&(r=setTimeout(function(){s.cancel()},e));do{const{value:n,done:d}=await s.read();if(d)throw this.leftOver=o,new Error("Timeout");o=new Uint8Array(this._appendBuffer(o.buffer,n.buffer))}while(o.length<t)}finally{e>0&&clearTimeout(r),s.releaseLock()}if(this.tracing&&(console.log("Read bytes"),this.trace(`Read ${o.length} bytes: ${this.hexConvert(o)}`)),this.slipReaderEnabled){const n=this.slipReader(o);return this.tracing&&(console.log("Slip reader results"),this.trace(`Read ${n.length} bytes: ${this.hexConvert(n)}`)),n}return o}async rawRead(e=0){if(this.leftOver.length!=0){const o=this.leftOver;return this.leftOver=new Uint8Array(0),o}if(!this.device.readable)return this.leftOver;const t=this.device.readable.getReader();let r;try{e>0&&(r=setTimeout(function(){t.cancel()},e));const{value:o,done:s}=await t.read();if(s)throw new Error("Timeout");return this.tracing&&(console.log("Raw Read bytes"),this.trace(`Read ${o.length} bytes: ${this.hexConvert(o)}`)),o}finally{e>0&&clearTimeout(r),t.releaseLock()}}async setRTS(e){await this.device.setSignals({requestToSend:e}),await this.setDTR(this._DTR_state)}async setDTR(e){this._DTR_state=e,await this.device.setSignals({dataTerminalReady:e})}async connect(e=115200,t={}){await this.device.open({baudRate:e,dataBits:t==null?void 0:t.dataBits,stopBits:t==null?void 0:t.stopBits,bufferSize:t==null?void 0:t.bufferSize,parity:t==null?void 0:t.parity,flowControl:t==null?void 0:t.flowControl}),this.baudrate=e,this.leftOver=new Uint8Array(0)}async sleep(e){return new Promise(t=>setTimeout(t,e))}async waitForUnlock(e){for(;this.device.readable&&this.device.readable.locked||this.device.writable&&this.device.writable.locked;)await this.sleep(e)}async disconnect(){await this.waitForUnlock(400),await this.device.close()}}function Qe(i){return new Promise(e=>setTimeout(e,i))}async function Za(i,e){const t={D:async r=>await i.setDTR(r),R:async r=>await i.setRTS(r),W:async r=>await Qe(r)};try{if(!function(s){const n=["D","R","W"],d=s.split("|");for(const f of d){const h=f[0],p=f.slice(1);if(!n.includes(h))return!1;if(h==="D"||h==="R"){if(p!=="0"&&p!=="1")return!1}else if(h==="W"){const _=parseInt(p);if(isNaN(_)||_<=0)return!1}}return!0}(e))return;const o=e.split("|");for(const s of o){const n=s[0],d=s.slice(1);n==="W"?await t.W(Number(d)):n!=="D"&&n!=="R"||await t[n](d==="1")}}catch{throw new Error("Invalid custom reset sequence")}}for(var Wi={},Ga={byteLength:function(i){var e=Kr(i),t=e[0],r=e[1];return 3*(t+r)/4-r},toByteArray:function(i){var e,t,r=Kr(i),o=r[0],s=r[1],n=new Ka(function(h,p,_){return 3*(p+_)/4-_}(0,o,s)),d=0,f=s>0?o-4:o;for(t=0;t<f;t+=4)e=ut[i.charCodeAt(t)]<<18|ut[i.charCodeAt(t+1)]<<12|ut[i.charCodeAt(t+2)]<<6|ut[i.charCodeAt(t+3)],n[d++]=e>>16&255,n[d++]=e>>8&255,n[d++]=255&e;return s===2&&(e=ut[i.charCodeAt(t)]<<2|ut[i.charCodeAt(t+1)]>>4,n[d++]=255&e),s===1&&(e=ut[i.charCodeAt(t)]<<10|ut[i.charCodeAt(t+1)]<<4|ut[i.charCodeAt(t+2)]>>2,n[d++]=e>>8&255,n[d++]=255&e),n},fromByteArray:function(i){for(var e,t=i.length,r=t%3,o=[],s=16383,n=0,d=t-r;n<d;n+=s)o.push(ja(i,n,n+s>d?d:n+s));return r===1?(e=i[t-1],o.push(wt[e>>2]+wt[e<<4&63]+"==")):r===2&&(e=(i[t-2]<<8)+i[t-1],o.push(wt[e>>10]+wt[e>>4&63]+wt[e<<2&63]+"=")),o.join("")}},wt=[],ut=[],Ka=typeof Uint8Array<"u"?Uint8Array:Array,Gr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ie=0;ie<64;++ie)wt[ie]=Gr[ie],ut[Gr.charCodeAt(ie)]=ie;function Kr(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");return t===-1&&(t=e),[t,t===e?0:4-t%4]}function ja(i,e,t){for(var r,o,s=[],n=e;n<t;n+=3)r=(i[n]<<16&16711680)+(i[n+1]<<8&65280)+(255&i[n+2]),s.push(wt[(o=r)>>18&63]+wt[o>>12&63]+wt[o>>6&63]+wt[63&o]);return s.join("")}ut[45]=62,ut[95]=63;var zi={};zi.read=function(i,e,t,r,o){var s,n,d=8*o-r-1,f=(1<<d)-1,h=f>>1,p=-7,_=t?o-1:0,b=t?-1:1,g=i[e+_];for(_+=b,s=g&(1<<-p)-1,g>>=-p,p+=d;p>0;s=256*s+i[e+_],_+=b,p-=8);for(n=s&(1<<-p)-1,s>>=-p,p+=r;p>0;n=256*n+i[e+_],_+=b,p-=8);if(s===0)s=1-h;else{if(s===f)return n?NaN:1/0*(g?-1:1);n+=Math.pow(2,r),s-=h}return(g?-1:1)*n*Math.pow(2,s-r)},zi.write=function(i,e,t,r,o,s){var n,d,f,h=8*s-o-1,p=(1<<h)-1,_=p>>1,b=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:s-1,B=r?1:-1,k=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(d=isNaN(e)?1:0,n=p):(n=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-n))<1&&(n--,f*=2),(e+=n+_>=1?b/f:b*Math.pow(2,1-_))*f>=2&&(n++,f/=2),n+_>=p?(d=0,n=p):n+_>=1?(d=(e*f-1)*Math.pow(2,o),n+=_):(d=e*Math.pow(2,_-1)*Math.pow(2,o),n=0));o>=8;i[t+g]=255&d,g+=B,d/=256,o-=8);for(n=n<<o|d,h+=o;h>0;i[t+g]=255&n,g+=B,n/=256,h-=8);i[t+g-B]|=128*k},function(i){const e=Ga,t=zi,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=n,i.SlowBuffer=function(a){return+a!=a&&(a=0),n.alloc(+a)},i.INSPECT_MAX_BYTES=50;const o=2147483647;function s(a){if(a>o)throw new RangeError('The value "'+a+'" is invalid for option "size"');const l=new Uint8Array(a);return Object.setPrototypeOf(l,n.prototype),l}function n(a,l,c){if(typeof a=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(a)}return d(a,l,c)}function d(a,l,c){if(typeof a=="string")return function(y,A){if(typeof A=="string"&&A!==""||(A="utf8"),!n.isEncoding(A))throw new TypeError("Unknown encoding: "+A);const U=0|g(y,A);let M=s(U);const j=M.write(y,A);return j!==U&&(M=M.slice(0,j)),M}(a,l);if(ArrayBuffer.isView(a))return function(y){if(_t(y,Uint8Array)){const A=new Uint8Array(y);return _(A.buffer,A.byteOffset,A.byteLength)}return p(y)}(a);if(a==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(_t(a,ArrayBuffer)||a&&_t(a.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_t(a,SharedArrayBuffer)||a&&_t(a.buffer,SharedArrayBuffer)))return _(a,l,c);if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const u=a.valueOf&&a.valueOf();if(u!=null&&u!==a)return n.from(u,l,c);const m=function(y){if(n.isBuffer(y)){const A=0|b(y.length),U=s(A);return U.length===0||y.copy(U,0,0,A),U}if(y.length!==void 0)return typeof y.length!="number"||fi(y.length)?s(0):p(y);if(y.type==="Buffer"&&Array.isArray(y.data))return p(y.data)}(a);if(m)return m;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof a[Symbol.toPrimitive]=="function")return n.from(a[Symbol.toPrimitive]("string"),l,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function f(a){if(typeof a!="number")throw new TypeError('"size" argument must be of type number');if(a<0)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function h(a){return f(a),s(a<0?0:0|b(a))}function p(a){const l=a.length<0?0:0|b(a.length),c=s(l);for(let u=0;u<l;u+=1)c[u]=255&a[u];return c}function _(a,l,c){if(l<0||a.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<l+(c||0))throw new RangeError('"length" is outside of buffer bounds');let u;return u=l===void 0&&c===void 0?new Uint8Array(a):c===void 0?new Uint8Array(a,l):new Uint8Array(a,l,c),Object.setPrototypeOf(u,n.prototype),u}function b(a){if(a>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|a}function g(a,l){if(n.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||_t(a,ArrayBuffer))return a.byteLength;if(typeof a!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);const c=a.length,u=arguments.length>2&&arguments[2]===!0;if(!u&&c===0)return 0;let m=!1;for(;;)switch(l){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return pi(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return or(a).length;default:if(m)return u?-1:pi(a).length;l=(""+l).toLowerCase(),m=!0}}function B(a,l,c){let u=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0)<=(l>>>=0))return"";for(a||(a="utf8");;)switch(a){case"hex":return at(this,l,c);case"utf8":case"utf-8":return O(this,l,c);case"ascii":return D(this,l,c);case"latin1":case"binary":return K(this,l,c);case"base64":return P(this,l,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return St(this,l,c);default:if(u)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),u=!0}}function k(a,l,c){const u=a[l];a[l]=a[c],a[c]=u}function x(a,l,c,u,m){if(a.length===0)return-1;if(typeof c=="string"?(u=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),fi(c=+c)&&(c=m?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(m)return-1;c=a.length-1}else if(c<0){if(!m)return-1;c=0}if(typeof l=="string"&&(l=n.from(l,u)),n.isBuffer(l))return l.length===0?-1:I(a,l,c,u,m);if(typeof l=="number")return l&=255,typeof Uint8Array.prototype.indexOf=="function"?m?Uint8Array.prototype.indexOf.call(a,l,c):Uint8Array.prototype.lastIndexOf.call(a,l,c):I(a,[l],c,u,m);throw new TypeError("val must be string, number or Buffer")}function I(a,l,c,u,m){let y,A=1,U=a.length,M=l.length;if(u!==void 0&&((u=String(u).toLowerCase())==="ucs2"||u==="ucs-2"||u==="utf16le"||u==="utf-16le")){if(a.length<2||l.length<2)return-1;A=2,U/=2,M/=2,c/=2}function j(H,X){return A===1?H[X]:H.readUInt16BE(X*A)}if(m){let H=-1;for(y=c;y<U;y++)if(j(a,y)===j(l,H===-1?0:y-H)){if(H===-1&&(H=y),y-H+1===M)return H*A}else H!==-1&&(y-=y-H),H=-1}else for(c+M>U&&(c=U-M),y=c;y>=0;y--){let H=!0;for(let X=0;X<M;X++)if(j(a,y+X)!==j(l,X)){H=!1;break}if(H)return y}return-1}function T(a,l,c,u){c=Number(c)||0;const m=a.length-c;u?(u=Number(u))>m&&(u=m):u=m;const y=l.length;let A;for(u>y/2&&(u=y/2),A=0;A<u;++A){const U=parseInt(l.substr(2*A,2),16);if(fi(U))return A;a[c+A]=U}return A}function w(a,l,c,u){return De(pi(l,a.length-c),a,c,u)}function C(a,l,c,u){return De(function(m){const y=[];for(let A=0;A<m.length;++A)y.push(255&m.charCodeAt(A));return y}(l),a,c,u)}function z(a,l,c,u){return De(or(l),a,c,u)}function S(a,l,c,u){return De(function(m,y){let A,U,M;const j=[];for(let H=0;H<m.length&&!((y-=2)<0);++H)A=m.charCodeAt(H),U=A>>8,M=A%256,j.push(M),j.push(U);return j}(l,a.length-c),a,c,u)}function P(a,l,c){return l===0&&c===a.length?e.fromByteArray(a):e.fromByteArray(a.slice(l,c))}function O(a,l,c){c=Math.min(a.length,c);const u=[];let m=l;for(;m<c;){const y=a[m];let A=null,U=y>239?4:y>223?3:y>191?2:1;if(m+U<=c){let M,j,H,X;switch(U){case 1:y<128&&(A=y);break;case 2:M=a[m+1],(192&M)==128&&(X=(31&y)<<6|63&M,X>127&&(A=X));break;case 3:M=a[m+1],j=a[m+2],(192&M)==128&&(192&j)==128&&(X=(15&y)<<12|(63&M)<<6|63&j,X>2047&&(X<55296||X>57343)&&(A=X));break;case 4:M=a[m+1],j=a[m+2],H=a[m+3],(192&M)==128&&(192&j)==128&&(192&H)==128&&(X=(15&y)<<18|(63&M)<<12|(63&j)<<6|63&H,X>65535&&X<1114112&&(A=X))}}A===null?(A=65533,U=1):A>65535&&(A-=65536,u.push(A>>>10&1023|55296),A=56320|1023&A),u.push(A),m+=U}return function(y){const A=y.length;if(A<=$)return String.fromCharCode.apply(String,y);let U="",M=0;for(;M<A;)U+=String.fromCharCode.apply(String,y.slice(M,M+=$));return U}(u)}i.kMaxLength=o,n.TYPED_ARRAY_SUPPORT=function(){try{const a=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(a,l),a.foo()===42}catch{return!1}}(),n.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),n.poolSize=8192,n.from=function(a,l,c){return d(a,l,c)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array),n.alloc=function(a,l,c){return function(u,m,y){return f(u),u<=0?s(u):m!==void 0?typeof y=="string"?s(u).fill(m,y):s(u).fill(m):s(u)}(a,l,c)},n.allocUnsafe=function(a){return h(a)},n.allocUnsafeSlow=function(a){return h(a)},n.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==n.prototype},n.compare=function(a,l){if(_t(a,Uint8Array)&&(a=n.from(a,a.offset,a.byteLength)),_t(l,Uint8Array)&&(l=n.from(l,l.offset,l.byteLength)),!n.isBuffer(a)||!n.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===l)return 0;let c=a.length,u=l.length;for(let m=0,y=Math.min(c,u);m<y;++m)if(a[m]!==l[m]){c=a[m],u=l[m];break}return c<u?-1:u<c?1:0},n.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(a,l){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return n.alloc(0);let c;if(l===void 0)for(l=0,c=0;c<a.length;++c)l+=a[c].length;const u=n.allocUnsafe(l);let m=0;for(c=0;c<a.length;++c){let y=a[c];if(_t(y,Uint8Array))m+y.length>u.length?(n.isBuffer(y)||(y=n.from(y)),y.copy(u,m)):Uint8Array.prototype.set.call(u,y,m);else{if(!n.isBuffer(y))throw new TypeError('"list" argument must be an Array of Buffers');y.copy(u,m)}m+=y.length}return u},n.byteLength=g,n.prototype._isBuffer=!0,n.prototype.swap16=function(){const a=this.length;if(a%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<a;l+=2)k(this,l,l+1);return this},n.prototype.swap32=function(){const a=this.length;if(a%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<a;l+=4)k(this,l,l+3),k(this,l+1,l+2);return this},n.prototype.swap64=function(){const a=this.length;if(a%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<a;l+=8)k(this,l,l+7),k(this,l+1,l+6),k(this,l+2,l+5),k(this,l+3,l+4);return this},n.prototype.toString=function(){const a=this.length;return a===0?"":arguments.length===0?O(this,0,a):B.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(a){if(!n.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||n.compare(this,a)===0},n.prototype.inspect=function(){let a="";const l=i.INSPECT_MAX_BYTES;return a=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(a+=" ... "),"<Buffer "+a+">"},r&&(n.prototype[r]=n.prototype.inspect),n.prototype.compare=function(a,l,c,u,m){if(_t(a,Uint8Array)&&(a=n.from(a,a.offset,a.byteLength)),!n.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(l===void 0&&(l=0),c===void 0&&(c=a?a.length:0),u===void 0&&(u=0),m===void 0&&(m=this.length),l<0||c>a.length||u<0||m>this.length)throw new RangeError("out of range index");if(u>=m&&l>=c)return 0;if(u>=m)return-1;if(l>=c)return 1;if(this===a)return 0;let y=(m>>>=0)-(u>>>=0),A=(c>>>=0)-(l>>>=0);const U=Math.min(y,A),M=this.slice(u,m),j=a.slice(l,c);for(let H=0;H<U;++H)if(M[H]!==j[H]){y=M[H],A=j[H];break}return y<A?-1:A<y?1:0},n.prototype.includes=function(a,l,c){return this.indexOf(a,l,c)!==-1},n.prototype.indexOf=function(a,l,c){return x(this,a,l,c,!0)},n.prototype.lastIndexOf=function(a,l,c){return x(this,a,l,c,!1)},n.prototype.write=function(a,l,c,u){if(l===void 0)u="utf8",c=this.length,l=0;else if(c===void 0&&typeof l=="string")u=l,c=this.length,l=0;else{if(!isFinite(l))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");l>>>=0,isFinite(c)?(c>>>=0,u===void 0&&(u="utf8")):(u=c,c=void 0)}const m=this.length-l;if((c===void 0||c>m)&&(c=m),a.length>0&&(c<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");u||(u="utf8");let y=!1;for(;;)switch(u){case"hex":return T(this,a,l,c);case"utf8":case"utf-8":return w(this,a,l,c);case"ascii":case"latin1":case"binary":return C(this,a,l,c);case"base64":return z(this,a,l,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,a,l,c);default:if(y)throw new TypeError("Unknown encoding: "+u);u=(""+u).toLowerCase(),y=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const $=4096;function D(a,l,c){let u="";c=Math.min(a.length,c);for(let m=l;m<c;++m)u+=String.fromCharCode(127&a[m]);return u}function K(a,l,c){let u="";c=Math.min(a.length,c);for(let m=l;m<c;++m)u+=String.fromCharCode(a[m]);return u}function at(a,l,c){const u=a.length;(!l||l<0)&&(l=0),(!c||c<0||c>u)&&(c=u);let m="";for(let y=l;y<c;++y)m+=zo[a[y]];return m}function St(a,l,c){const u=a.slice(l,c);let m="";for(let y=0;y<u.length-1;y+=2)m+=String.fromCharCode(u[y]+256*u[y+1]);return m}function q(a,l,c){if(a%1!=0||a<0)throw new RangeError("offset is not uint");if(a+l>c)throw new RangeError("Trying to access beyond buffer length")}function G(a,l,c,u,m,y){if(!n.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>m||l<y)throw new RangeError('"value" argument is out of bounds');if(c+u>a.length)throw new RangeError("Index out of range")}function pt(a,l,c,u,m){rr(l,u,m,a,c,7);let y=Number(l&BigInt(4294967295));a[c++]=y,y>>=8,a[c++]=y,y>>=8,a[c++]=y,y>>=8,a[c++]=y;let A=Number(l>>BigInt(32)&BigInt(4294967295));return a[c++]=A,A>>=8,a[c++]=A,A>>=8,a[c++]=A,A>>=8,a[c++]=A,c}function Ji(a,l,c,u,m){rr(l,u,m,a,c,7);let y=Number(l&BigInt(4294967295));a[c+7]=y,y>>=8,a[c+6]=y,y>>=8,a[c+5]=y,y>>=8,a[c+4]=y;let A=Number(l>>BigInt(32)&BigInt(4294967295));return a[c+3]=A,A>>=8,a[c+2]=A,A>>=8,a[c+1]=A,A>>=8,a[c]=A,c+8}function Qi(a,l,c,u,m,y){if(c+u>a.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function tr(a,l,c,u,m){return l=+l,c>>>=0,m||Qi(a,0,c,4),t.write(a,l,c,u,23,4),c+4}function er(a,l,c,u,m){return l=+l,c>>>=0,m||Qi(a,0,c,8),t.write(a,l,c,u,52,8),c+8}n.prototype.slice=function(a,l){const c=this.length;(a=~~a)<0?(a+=c)<0&&(a=0):a>c&&(a=c),(l=l===void 0?c:~~l)<0?(l+=c)<0&&(l=0):l>c&&(l=c),l<a&&(l=a);const u=this.subarray(a,l);return Object.setPrototypeOf(u,n.prototype),u},n.prototype.readUintLE=n.prototype.readUIntLE=function(a,l,c){a>>>=0,l>>>=0,c||q(a,l,this.length);let u=this[a],m=1,y=0;for(;++y<l&&(m*=256);)u+=this[a+y]*m;return u},n.prototype.readUintBE=n.prototype.readUIntBE=function(a,l,c){a>>>=0,l>>>=0,c||q(a,l,this.length);let u=this[a+--l],m=1;for(;l>0&&(m*=256);)u+=this[a+--l]*m;return u},n.prototype.readUint8=n.prototype.readUInt8=function(a,l){return a>>>=0,l||q(a,1,this.length),this[a]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(a,l){return a>>>=0,l||q(a,2,this.length),this[a]|this[a+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(a,l){return a>>>=0,l||q(a,2,this.length),this[a]<<8|this[a+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(a,l){return a>>>=0,l||q(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(a,l){return a>>>=0,l||q(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},n.prototype.readBigUInt64LE=zt(function(a){te(a>>>=0,"offset");const l=this[a],c=this[a+7];l!==void 0&&c!==void 0||he(a,this.length-8);const u=l+256*this[++a]+65536*this[++a]+this[++a]*2**24,m=this[++a]+256*this[++a]+65536*this[++a]+c*2**24;return BigInt(u)+(BigInt(m)<<BigInt(32))}),n.prototype.readBigUInt64BE=zt(function(a){te(a>>>=0,"offset");const l=this[a],c=this[a+7];l!==void 0&&c!==void 0||he(a,this.length-8);const u=l*2**24+65536*this[++a]+256*this[++a]+this[++a],m=this[++a]*2**24+65536*this[++a]+256*this[++a]+c;return(BigInt(u)<<BigInt(32))+BigInt(m)}),n.prototype.readIntLE=function(a,l,c){a>>>=0,l>>>=0,c||q(a,l,this.length);let u=this[a],m=1,y=0;for(;++y<l&&(m*=256);)u+=this[a+y]*m;return m*=128,u>=m&&(u-=Math.pow(2,8*l)),u},n.prototype.readIntBE=function(a,l,c){a>>>=0,l>>>=0,c||q(a,l,this.length);let u=l,m=1,y=this[a+--u];for(;u>0&&(m*=256);)y+=this[a+--u]*m;return m*=128,y>=m&&(y-=Math.pow(2,8*l)),y},n.prototype.readInt8=function(a,l){return a>>>=0,l||q(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},n.prototype.readInt16LE=function(a,l){a>>>=0,l||q(a,2,this.length);const c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},n.prototype.readInt16BE=function(a,l){a>>>=0,l||q(a,2,this.length);const c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},n.prototype.readInt32LE=function(a,l){return a>>>=0,l||q(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},n.prototype.readInt32BE=function(a,l){return a>>>=0,l||q(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},n.prototype.readBigInt64LE=zt(function(a){te(a>>>=0,"offset");const l=this[a],c=this[a+7];l!==void 0&&c!==void 0||he(a,this.length-8);const u=this[a+4]+256*this[a+5]+65536*this[a+6]+(c<<24);return(BigInt(u)<<BigInt(32))+BigInt(l+256*this[++a]+65536*this[++a]+this[++a]*2**24)}),n.prototype.readBigInt64BE=zt(function(a){te(a>>>=0,"offset");const l=this[a],c=this[a+7];l!==void 0&&c!==void 0||he(a,this.length-8);const u=(l<<24)+65536*this[++a]+256*this[++a]+this[++a];return(BigInt(u)<<BigInt(32))+BigInt(this[++a]*2**24+65536*this[++a]+256*this[++a]+c)}),n.prototype.readFloatLE=function(a,l){return a>>>=0,l||q(a,4,this.length),t.read(this,a,!0,23,4)},n.prototype.readFloatBE=function(a,l){return a>>>=0,l||q(a,4,this.length),t.read(this,a,!1,23,4)},n.prototype.readDoubleLE=function(a,l){return a>>>=0,l||q(a,8,this.length),t.read(this,a,!0,52,8)},n.prototype.readDoubleBE=function(a,l){return a>>>=0,l||q(a,8,this.length),t.read(this,a,!1,52,8)},n.prototype.writeUintLE=n.prototype.writeUIntLE=function(a,l,c,u){a=+a,l>>>=0,c>>>=0,!u&&G(this,a,l,c,Math.pow(2,8*c)-1,0);let m=1,y=0;for(this[l]=255&a;++y<c&&(m*=256);)this[l+y]=a/m&255;return l+c},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(a,l,c,u){a=+a,l>>>=0,c>>>=0,!u&&G(this,a,l,c,Math.pow(2,8*c)-1,0);let m=c-1,y=1;for(this[l+m]=255&a;--m>=0&&(y*=256);)this[l+m]=a/y&255;return l+c},n.prototype.writeUint8=n.prototype.writeUInt8=function(a,l,c){return a=+a,l>>>=0,c||G(this,a,l,1,255,0),this[l]=255&a,l+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(a,l,c){return a=+a,l>>>=0,c||G(this,a,l,2,65535,0),this[l]=255&a,this[l+1]=a>>>8,l+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(a,l,c){return a=+a,l>>>=0,c||G(this,a,l,2,65535,0),this[l]=a>>>8,this[l+1]=255&a,l+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(a,l,c){return a=+a,l>>>=0,c||G(this,a,l,4,4294967295,0),this[l+3]=a>>>24,this[l+2]=a>>>16,this[l+1]=a>>>8,this[l]=255&a,l+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(a,l,c){return a=+a,l>>>=0,c||G(this,a,l,4,4294967295,0),this[l]=a>>>24,this[l+1]=a>>>16,this[l+2]=a>>>8,this[l+3]=255&a,l+4},n.prototype.writeBigUInt64LE=zt(function(a,l=0){return pt(this,a,l,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeBigUInt64BE=zt(function(a,l=0){return Ji(this,a,l,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeIntLE=function(a,l,c,u){if(a=+a,l>>>=0,!u){const U=Math.pow(2,8*c-1);G(this,a,l,c,U-1,-U)}let m=0,y=1,A=0;for(this[l]=255&a;++m<c&&(y*=256);)a<0&&A===0&&this[l+m-1]!==0&&(A=1),this[l+m]=(a/y>>0)-A&255;return l+c},n.prototype.writeIntBE=function(a,l,c,u){if(a=+a,l>>>=0,!u){const U=Math.pow(2,8*c-1);G(this,a,l,c,U-1,-U)}let m=c-1,y=1,A=0;for(this[l+m]=255&a;--m>=0&&(y*=256);)a<0&&A===0&&this[l+m+1]!==0&&(A=1),this[l+m]=(a/y>>0)-A&255;return l+c},n.prototype.writeInt8=function(a,l,c){return a=+a,l>>>=0,c||G(this,a,l,1,127,-128),a<0&&(a=255+a+1),this[l]=255&a,l+1},n.prototype.writeInt16LE=function(a,l,c){return a=+a,l>>>=0,c||G(this,a,l,2,32767,-32768),this[l]=255&a,this[l+1]=a>>>8,l+2},n.prototype.writeInt16BE=function(a,l,c){return a=+a,l>>>=0,c||G(this,a,l,2,32767,-32768),this[l]=a>>>8,this[l+1]=255&a,l+2},n.prototype.writeInt32LE=function(a,l,c){return a=+a,l>>>=0,c||G(this,a,l,4,2147483647,-2147483648),this[l]=255&a,this[l+1]=a>>>8,this[l+2]=a>>>16,this[l+3]=a>>>24,l+4},n.prototype.writeInt32BE=function(a,l,c){return a=+a,l>>>=0,c||G(this,a,l,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[l]=a>>>24,this[l+1]=a>>>16,this[l+2]=a>>>8,this[l+3]=255&a,l+4},n.prototype.writeBigInt64LE=zt(function(a,l=0){return pt(this,a,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeBigInt64BE=zt(function(a,l=0){return Ji(this,a,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeFloatLE=function(a,l,c){return tr(this,a,l,!0,c)},n.prototype.writeFloatBE=function(a,l,c){return tr(this,a,l,!1,c)},n.prototype.writeDoubleLE=function(a,l,c){return er(this,a,l,!0,c)},n.prototype.writeDoubleBE=function(a,l,c){return er(this,a,l,!1,c)},n.prototype.copy=function(a,l,c,u){if(!n.isBuffer(a))throw new TypeError("argument should be a Buffer");if(c||(c=0),u||u===0||(u=this.length),l>=a.length&&(l=a.length),l||(l=0),u>0&&u<c&&(u=c),u===c||a.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("sourceEnd out of bounds");u>this.length&&(u=this.length),a.length-l<u-c&&(u=a.length-l+c);const m=u-c;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,c,u):Uint8Array.prototype.set.call(a,this.subarray(c,u),l),m},n.prototype.fill=function(a,l,c,u){if(typeof a=="string"){if(typeof l=="string"?(u=l,l=0,c=this.length):typeof c=="string"&&(u=c,c=this.length),u!==void 0&&typeof u!="string")throw new TypeError("encoding must be a string");if(typeof u=="string"&&!n.isEncoding(u))throw new TypeError("Unknown encoding: "+u);if(a.length===1){const y=a.charCodeAt(0);(u==="utf8"&&y<128||u==="latin1")&&(a=y)}}else typeof a=="number"?a&=255:typeof a=="boolean"&&(a=Number(a));if(l<0||this.length<l||this.length<c)throw new RangeError("Out of range index");if(c<=l)return this;let m;if(l>>>=0,c=c===void 0?this.length:c>>>0,a||(a=0),typeof a=="number")for(m=l;m<c;++m)this[m]=a;else{const y=n.isBuffer(a)?a:n.from(a,u),A=y.length;if(A===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(m=0;m<c-l;++m)this[m+l]=y[m%A]}return this};const Qt={};function hi(a,l,c){Qt[a]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:l.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(u){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:u,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}function ir(a){let l="",c=a.length;const u=a[0]==="-"?1:0;for(;c>=u+4;c-=3)l=`_${a.slice(c-3,c)}${l}`;return`${a.slice(0,c)}${l}`}function rr(a,l,c,u,m,y){if(a>c||a<l){const A=typeof l=="bigint"?"n":"";let U;throw U=l===0||l===BigInt(0)?`>= 0${A} and < 2${A} ** ${8*(y+1)}${A}`:`>= -(2${A} ** ${8*(y+1)-1}${A}) and < 2 ** ${8*(y+1)-1}${A}`,new Qt.ERR_OUT_OF_RANGE("value",U,a)}(function(A,U,M){te(U,"offset"),A[U]!==void 0&&A[U+M]!==void 0||he(U,A.length-(M+1))})(u,m,y)}function te(a,l){if(typeof a!="number")throw new Qt.ERR_INVALID_ARG_TYPE(l,"number",a)}function he(a,l,c){throw Math.floor(a)!==a?(te(a,c),new Qt.ERR_OUT_OF_RANGE("offset","an integer",a)):l<0?new Qt.ERR_BUFFER_OUT_OF_BOUNDS:new Qt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${l}`,a)}hi("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),hi("ERR_INVALID_ARG_TYPE",function(a,l){return`The "${a}" argument must be of type number. Received type ${typeof l}`},TypeError),hi("ERR_OUT_OF_RANGE",function(a,l,c){let u=`The value of "${a}" is out of range.`,m=c;return Number.isInteger(c)&&Math.abs(c)>2**32?m=ir(String(c)):typeof c=="bigint"&&(m=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(m=ir(m)),m+="n"),u+=` It must be ${l}. Received ${m}`,u},RangeError);const Oo=/[^+/0-9A-Za-z-_]/g;function pi(a,l){let c;l=l||1/0;const u=a.length;let m=null;const y=[];for(let A=0;A<u;++A){if(c=a.charCodeAt(A),c>55295&&c<57344){if(!m){if(c>56319){(l-=3)>-1&&y.push(239,191,189);continue}if(A+1===u){(l-=3)>-1&&y.push(239,191,189);continue}m=c;continue}if(c<56320){(l-=3)>-1&&y.push(239,191,189),m=c;continue}c=65536+(m-55296<<10|c-56320)}else m&&(l-=3)>-1&&y.push(239,191,189);if(m=null,c<128){if((l-=1)<0)break;y.push(c)}else if(c<2048){if((l-=2)<0)break;y.push(c>>6|192,63&c|128)}else if(c<65536){if((l-=3)<0)break;y.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((l-=4)<0)break;y.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return y}function or(a){return e.toByteArray(function(l){if((l=(l=l.split("=")[0]).trim().replace(Oo,"")).length<2)return"";for(;l.length%4!=0;)l+="=";return l}(a))}function De(a,l,c,u){let m;for(m=0;m<u&&!(m+c>=l.length||m>=a.length);++m)l[m+c]=a[m];return m}function _t(a,l){return a instanceof l||a!=null&&a.constructor!=null&&a.constructor.name!=null&&a.constructor.name===l.name}function fi(a){return a!=a}const zo=function(){const a="0123456789abcdef",l=new Array(256);for(let c=0;c<16;++c){const u=16*c;for(let m=0;m<16;++m)l[u+m]=a[c]+a[m]}return l}();function zt(a){return typeof BigInt>"u"?Do:a}function Do(){throw new Error("BigInt not supported")}}(Wi);class Ya{constructor(e){this.ESP_RAM_BLOCK=6144,this.ESP_FLASH_BEGIN=2,this.ESP_FLASH_DATA=3,this.ESP_FLASH_END=4,this.ESP_MEM_BEGIN=5,this.ESP_MEM_END=6,this.ESP_MEM_DATA=7,this.ESP_WRITE_REG=9,this.ESP_READ_REG=10,this.ESP_SPI_ATTACH=13,this.ESP_CHANGE_BAUDRATE=15,this.ESP_FLASH_DEFL_BEGIN=16,this.ESP_FLASH_DEFL_DATA=17,this.ESP_FLASH_DEFL_END=18,this.ESP_SPI_FLASH_MD5=19,this.ESP_ERASE_FLASH=208,this.ESP_ERASE_REGION=209,this.ESP_READ_FLASH=210,this.ESP_RUN_USER_CODE=211,this.ESP_IMAGE_MAGIC=233,this.ESP_CHECKSUM_MAGIC=239,this.ROM_INVALID_RECV_MSG=5,this.ERASE_REGION_TIMEOUT_PER_MB=3e4,this.ERASE_WRITE_TIMEOUT_PER_MB=4e4,this.MD5_TIMEOUT_PER_MB=8e3,this.CHIP_ERASE_TIMEOUT=12e4,this.FLASH_READ_TIMEOUT=1e5,this.MAX_TIMEOUT=2*this.CHIP_ERASE_TIMEOUT,this.CHIP_DETECT_MAGIC_REG_ADDR=1073745920,this.DETECTED_FLASH_SIZES={18:"256KB",19:"512KB",20:"1MB",21:"2MB",22:"4MB",23:"8MB",24:"16MB"},this.DETECTED_FLASH_SIZES_NUM={18:256,19:512,20:1024,21:2048,22:4096,23:8192,24:16384},this.USB_JTAG_SERIAL_PID=4097,this.romBaudrate=115200,this.debugLogging=!1,this.checksum=function(t){let r,o=239;for(r=0;r<t.length;r++)o^=t[r];return o},this.timeoutPerMb=function(t,r){const o=t*(r/1e6);return o<3e3?3e3:o},this.flashSizeBytes=function(t){let r=-1;return t.indexOf("KB")!==-1?r=1024*parseInt(t.slice(0,t.indexOf("KB"))):t.indexOf("MB")!==-1&&(r=1024*parseInt(t.slice(0,t.indexOf("MB")))*1024),r},this.IS_STUB=!1,this.FLASH_WRITE_SIZE=16384,this.transport=e.transport,this.baudrate=e.baudrate,e.serialOptions&&(this.serialOptions=e.serialOptions),e.romBaudrate&&(this.romBaudrate=e.romBaudrate),e.terminal&&(this.terminal=e.terminal,this.terminal.clean()),e.debugLogging!==void 0&&(this.debugLogging=e.debugLogging),e.port&&(this.transport=new Lo(e.port)),e.enableTracing!==void 0&&(this.transport.tracing=e.enableTracing),this.info("esptool.js"),this.info("Serial port "+this.transport.getInfo())}_sleep(e){return new Promise(t=>setTimeout(t,e))}write(e,t=!0){this.terminal?t?this.terminal.writeLine(e):this.terminal.write(e):console.log(e)}error(e,t=!0){this.write(`Error: ${e}`,t)}info(e,t=!0){this.write(e,t)}debug(e,t=!0){this.debugLogging&&this.write(`Debug: ${e}`,t)}_shortToBytearray(e){return new Uint8Array([255&e,e>>8&255])}_intToByteArray(e){return new Uint8Array([255&e,e>>8&255,e>>16&255,e>>24&255])}_byteArrayToShort(e,t){return e|t>>8}_byteArrayToInt(e,t,r,o){return e|t<<8|r<<16|o<<24}_appendBuffer(e,t){const r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e),0),r.set(new Uint8Array(t),e.byteLength),r.buffer}_appendArray(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e,0),r.set(t,e.length),r}ui8ToBstr(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}bstrToUi8(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}async flushInput(){try{await this.transport.rawRead(200)}catch(e){this.error(e.message)}}async readPacket(e=null,t=3e3){for(let r=0;r<100;r++){const o=await this.transport.read(t),s=o[0],n=o[1],d=this._byteArrayToInt(o[4],o[5],o[6],o[7]),f=o.slice(8);if(s==1){if(e==null||n==e)return[d,f];if(f[0]!=0&&f[1]==this.ROM_INVALID_RECV_MSG)throw await this.flushInput(),new ot("unsupported command error")}}throw new ot("invalid response")}async command(e=null,t=new Uint8Array(0),r=0,o=!0,s=3e3){if(e!=null){this.transport.tracing&&this.transport.trace(`command op:0x${e.toString(16).padStart(2,"0")} data len=${t.length} wait_response=${o?1:0} timeout=${(s/1e3).toFixed(3)} data=${this.transport.hexConvert(t)}`);const n=new Uint8Array(8+t.length);let d;for(n[0]=0,n[1]=e,n[2]=this._shortToBytearray(t.length)[0],n[3]=this._shortToBytearray(t.length)[1],n[4]=this._intToByteArray(r)[0],n[5]=this._intToByteArray(r)[1],n[6]=this._intToByteArray(r)[2],n[7]=this._intToByteArray(r)[3],d=0;d<t.length;d++)n[8+d]=t[d];await this.transport.write(n)}return o?this.readPacket(e,s):[0,new Uint8Array(0)]}async readReg(e,t=3e3){const r=this._intToByteArray(e);return(await this.command(this.ESP_READ_REG,r,void 0,void 0,t))[0]}async writeReg(e,t,r=4294967295,o=0,s=0){let n=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));n=this._appendArray(n,this._intToByteArray(r)),n=this._appendArray(n,this._intToByteArray(o)),s>0&&(n=this._appendArray(n,this._intToByteArray(this.chip.UART_DATE_REG_ADDR)),n=this._appendArray(n,this._intToByteArray(0)),n=this._appendArray(n,this._intToByteArray(0)),n=this._appendArray(n,this._intToByteArray(s))),await this.checkCommand("write target memory",this.ESP_WRITE_REG,n)}async sync(){this.debug("Sync");const e=new Uint8Array(36);let t;for(e[0]=7,e[1]=7,e[2]=18,e[3]=32,t=0;t<32;t++)e[4+t]=85;try{return await this.command(8,e,void 0,void 0,100)}catch(r){throw this.debug("Sync err "+r),r}}async _connectAttempt(e="default_reset",t=!1){if(this.debug("_connect_attempt "+e+" "+t),e!=="no_reset")if(this.transport.getPid()===this.USB_JTAG_SERIAL_PID)await async function(s){await s.setRTS(!1),await s.setDTR(!1),await Qe(100),await s.setDTR(!0),await s.setRTS(!1),await Qe(100),await s.setRTS(!0),await s.setDTR(!1),await s.setRTS(!0),await Qe(100),await s.setRTS(!1),await s.setDTR(!1)}(this.transport);else{const s=t?"D0|R1|W100|W2000|D1|R0|W50|D0":"D0|R1|W100|D1|R0|W50|D0";await Za(this.transport,s)}let r=0,o=!0;for(;o;){try{r+=(await this.transport.read(1e3)).length}catch(s){if(this.debug(s.message),s instanceof Error){o=!1;break}}await this._sleep(50)}for(this.transport.slipReaderEnabled=!0,r=7;r--;){try{const s=await this.sync();return this.debug(s[0].toString()),"success"}catch(s){s instanceof Error&&(t?this.info("_",!1):this.info(".",!1))}await this._sleep(50)}return"error"}async connect(e="default_reset",t=7,r=!1){let o,s;for(this.info("Connecting...",!1),await this.transport.connect(this.romBaudrate,this.serialOptions),o=0;o<t&&(s=await this._connectAttempt(e,!1),s!=="success")&&(s=await this._connectAttempt(e,!0),s!=="success");o++);if(s!=="success")throw new ot("Failed to connect with the device");if(this.info(`
\r`,!1),!r){const n=await this.readReg(1073745920)>>>0;this.debug("Chip Magic "+n.toString(16));const d=await async function(f){switch(f){case 15736195:{const{ESP32ROM:h}=await Dt(()=>import("./esp32-D9Bry5AK-C5_7PDVi.js"),__vite__mapDeps([0,1]));return new h}case 1867591791:case 2084675695:{const{ESP32C2ROM:h}=await Dt(()=>import("./esp32c2-C0aHw_np-CofyzCRi.js"),__vite__mapDeps([2,3,1]));return new h}case 1763790959:case 456216687:case 1216438383:case 1130455151:{const{ESP32C3ROM:h}=await Dt(()=>import("./esp32c3-1QKN64_Z-BdZBgzxv.js"),__vite__mapDeps([3,1]));return new h}case 752910447:{const{ESP32C6ROM:h}=await Dt(()=>import("./esp32c6-CgjBrh_Q-D0IyoC3H.js"),__vite__mapDeps([4,1]));return new h}case 3619110528:{const{ESP32H2ROM:h}=await Dt(()=>import("./esp32h2-Bm3EZXXU-DY6-bP1c.js"),__vite__mapDeps([5,1]));return new h}case 9:{const{ESP32S3ROM:h}=await Dt(()=>import("./esp32s3-DkYcGTTD-VnulWZjA.js"),__vite__mapDeps([6,1]));return new h}case 1990:{const{ESP32S2ROM:h}=await Dt(()=>import("./esp32s2-DxMNCsFV-CA_Y1HwR.js"),__vite__mapDeps([7,1]));return new h}case 4293968129:{const{ESP8266ROM:h}=await Dt(()=>import("./esp8266-DEFNY3lv-BiL7g1T8.js"),__vite__mapDeps([8,1]));return new h}default:return null}}(n);if(this.chip===null)throw new ot(`Unexpected CHIP magic value ${n}. Failed to autodetect chip type.`);this.chip=d}}async detectChip(e="default_reset"){await this.connect(e),this.info("Detecting chip type... ",!1),this.chip!=null?this.info(this.chip.CHIP_NAME):this.info("unknown!")}async checkCommand(e="",t=null,r=new Uint8Array(0),o=0,s=3e3){this.debug("check_command "+e);const n=await this.command(t,r,o,void 0,s);return n[1].length>4?n[1]:n[0]}async memBegin(e,t,r,o){this.debug("mem_begin "+e+" "+t+" "+r+" "+o.toString(16));let s=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));s=this._appendArray(s,this._intToByteArray(r)),s=this._appendArray(s,this._intToByteArray(o)),await this.checkCommand("enter RAM download mode",this.ESP_MEM_BEGIN,s)}async memBlock(e,t){let r=this._appendArray(this._intToByteArray(e.length),this._intToByteArray(t));r=this._appendArray(r,this._intToByteArray(0)),r=this._appendArray(r,this._intToByteArray(0)),r=this._appendArray(r,e);const o=this.checksum(e);await this.checkCommand("write to target RAM",this.ESP_MEM_DATA,r,o)}async memFinish(e){const t=e===0?1:0,r=this._appendArray(this._intToByteArray(t),this._intToByteArray(e));await this.checkCommand("leave RAM download mode",this.ESP_MEM_END,r,void 0,50)}async flashSpiAttach(e){const t=this._intToByteArray(e);await this.checkCommand("configure SPI flash pins",this.ESP_SPI_ATTACH,t)}async flashBegin(e,t){const r=Math.floor((e+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),o=this.chip.getEraseSize(t,e),s=new Date,n=s.getTime();let d=3e3;this.IS_STUB==0&&(d=this.timeoutPerMb(this.ERASE_REGION_TIMEOUT_PER_MB,e)),this.debug("flash begin "+o+" "+r+" "+this.FLASH_WRITE_SIZE+" "+t+" "+e);let f=this._appendArray(this._intToByteArray(o),this._intToByteArray(r));f=this._appendArray(f,this._intToByteArray(this.FLASH_WRITE_SIZE)),f=this._appendArray(f,this._intToByteArray(t)),this.IS_STUB==0&&(f=this._appendArray(f,this._intToByteArray(0))),await this.checkCommand("enter Flash download mode",this.ESP_FLASH_BEGIN,f,void 0,d);const h=s.getTime();return e!=0&&this.IS_STUB==0&&this.info("Took "+(h-n)/1e3+"."+(h-n)%1e3+"s to erase flash block"),r}async flashDeflBegin(e,t,r){const o=Math.floor((t+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),s=Math.floor((e+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),n=new Date,d=n.getTime();let f,h;this.IS_STUB?(f=e,h=3e3):(f=s*this.FLASH_WRITE_SIZE,h=this.timeoutPerMb(this.ERASE_REGION_TIMEOUT_PER_MB,f)),this.info("Compressed "+e+" bytes to "+t+"...");let p=this._appendArray(this._intToByteArray(f),this._intToByteArray(o));p=this._appendArray(p,this._intToByteArray(this.FLASH_WRITE_SIZE)),p=this._appendArray(p,this._intToByteArray(r)),this.chip.CHIP_NAME!=="ESP32-S2"&&this.chip.CHIP_NAME!=="ESP32-S3"&&this.chip.CHIP_NAME!=="ESP32-C3"&&this.chip.CHIP_NAME!=="ESP32-C2"||this.IS_STUB!==!1||(p=this._appendArray(p,this._intToByteArray(0))),await this.checkCommand("enter compressed flash mode",this.ESP_FLASH_DEFL_BEGIN,p,void 0,h);const _=n.getTime();return e!=0&&this.IS_STUB===!1&&this.info("Took "+(_-d)/1e3+"."+(_-d)%1e3+"s to erase flash block"),o}async flashBlock(e,t,r){let o=this._appendArray(this._intToByteArray(e.length),this._intToByteArray(t));o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,e);const s=this.checksum(e);await this.checkCommand("write to target Flash after seq "+t,this.ESP_FLASH_DATA,o,s,r)}async flashDeflBlock(e,t,r){let o=this._appendArray(this._intToByteArray(e.length),this._intToByteArray(t));o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,e);const s=this.checksum(e);this.debug("flash_defl_block "+e[0].toString(16)+" "+e[1].toString(16)),await this.checkCommand("write compressed data to flash after seq "+t,this.ESP_FLASH_DEFL_DATA,o,s,r)}async flashFinish(e=!1){const t=e?0:1,r=this._intToByteArray(t);await this.checkCommand("leave Flash mode",this.ESP_FLASH_END,r)}async flashDeflFinish(e=!1){const t=e?0:1,r=this._intToByteArray(t);await this.checkCommand("leave compressed flash mode",this.ESP_FLASH_DEFL_END,r)}async runSpiflashCommand(e,t,r){const o=this.chip.SPI_REG_BASE,s=o+0,n=o+this.chip.SPI_USR_OFFS,d=o+this.chip.SPI_USR1_OFFS,f=o+this.chip.SPI_USR2_OFFS,h=o+this.chip.SPI_W0_OFFS;let p;p=this.chip.SPI_MOSI_DLEN_OFFS!=null?async(w,C)=>{const z=o+this.chip.SPI_MOSI_DLEN_OFFS,S=o+this.chip.SPI_MISO_DLEN_OFFS;w>0&&await this.writeReg(z,w-1),C>0&&await this.writeReg(S,C-1)}:async(w,C)=>{const z=d,S=(C===0?0:C-1)<<8|(w===0?0:w-1)<<17;await this.writeReg(z,S)};const _=1<<18;if(r>32)throw new ot("Reading more than 32 bits back from a SPI flash operation is unsupported");if(t.length>64)throw new ot("Writing more than 64 bytes of data with one SPI command is unsupported");const b=8*t.length,g=await this.readReg(n),B=await this.readReg(f);let k,x=1<<31;r>0&&(x|=268435456),b>0&&(x|=134217728),await p(b,r),await this.writeReg(n,x);let I=7<<28|e;if(await this.writeReg(f,I),b==0)await this.writeReg(h,0);else{if(t.length%4!=0){const C=new Uint8Array(t.length%4);t=this._appendArray(t,C)}let w=h;for(k=0;k<t.length-4;k+=4)I=this._byteArrayToInt(t[k],t[k+1],t[k+2],t[k+3]),await this.writeReg(w,I),w+=4}for(await this.writeReg(s,_),k=0;k<10&&(I=await this.readReg(s)&_,I!=0);k++);if(k===10)throw new ot("SPI command did not complete in time");const T=await this.readReg(h);return await this.writeReg(n,g),await this.writeReg(f,B),T}async readFlashId(){const e=new Uint8Array(0);return await this.runSpiflashCommand(159,e,24)}async eraseFlash(){this.info("Erasing flash (this may take a while)...");let e=new Date;const t=e.getTime(),r=await this.checkCommand("erase flash",this.ESP_ERASE_FLASH,void 0,void 0,this.CHIP_ERASE_TIMEOUT);e=new Date;const o=e.getTime();return this.info("Chip erase completed successfully in "+(o-t)/1e3+"s"),r}toHex(e){return Array.prototype.map.call(e,t=>("00"+t.toString(16)).slice(-2)).join("")}async flashMd5sum(e,t){const r=this.timeoutPerMb(this.MD5_TIMEOUT_PER_MB,t);let o=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));o=this._appendArray(o,this._intToByteArray(0)),o=this._appendArray(o,this._intToByteArray(0));let s=await this.checkCommand("calculate md5sum",this.ESP_SPI_FLASH_MD5,o,void 0,r);return s instanceof Uint8Array&&s.length>16&&(s=s.slice(0,16)),this.toHex(s)}async readFlash(e,t,r=null){let o=this._appendArray(this._intToByteArray(e),this._intToByteArray(t));o=this._appendArray(o,this._intToByteArray(4096)),o=this._appendArray(o,this._intToByteArray(1024));const s=await this.checkCommand("read flash",this.ESP_READ_FLASH,o);if(s!=0)throw new ot("Failed to read memory: "+s);let n=new Uint8Array(0);for(;n.length<t;){const d=await this.transport.read(this.FLASH_READ_TIMEOUT);if(!(d instanceof Uint8Array))throw new ot("Failed to read memory: "+d);d.length>0&&(n=this._appendArray(n,d),await this.transport.write(this._intToByteArray(n.length)),r&&r(d,n.length,t))}return n}async runStub(){this.info("Uploading stub...");let e=Wi.Buffer.from(this.chip.ROM_TEXT,"base64").toString("binary"),t=e.split("").map(function(d){return d.charCodeAt(0)});const r=new Uint8Array(t);e=Wi.Buffer.from(this.chip.ROM_DATA,"base64").toString("binary"),t=e.split("").map(function(d){return d.charCodeAt(0)});const o=new Uint8Array(t);let s,n=Math.floor((r.length+this.ESP_RAM_BLOCK-1)/this.ESP_RAM_BLOCK);for(await this.memBegin(r.length,n,this.ESP_RAM_BLOCK,this.chip.TEXT_START),s=0;s<n;s++){const d=s*this.ESP_RAM_BLOCK,f=d+this.ESP_RAM_BLOCK;await this.memBlock(r.slice(d,f),s)}for(n=Math.floor((o.length+this.ESP_RAM_BLOCK-1)/this.ESP_RAM_BLOCK),await this.memBegin(o.length,n,this.ESP_RAM_BLOCK,this.chip.DATA_START),s=0;s<n;s++){const d=s*this.ESP_RAM_BLOCK,f=d+this.ESP_RAM_BLOCK;await this.memBlock(o.slice(d,f),s)}this.info("Running stub..."),await this.memFinish(this.chip.ENTRY);for(let d=0;d<100;d++){const f=await this.transport.read(1e3,6);if(f[0]===79&&f[1]===72&&f[2]===65&&f[3]===73)return this.info("Stub running..."),this.IS_STUB=!0,this.FLASH_WRITE_SIZE=16384,this.chip}throw new ot("Failed to start stub. Unexpected response")}async changeBaud(){this.info("Changing baudrate to "+this.baudrate);const e=this.IS_STUB?this.transport.baudrate:0,t=this._appendArray(this._intToByteArray(this.baudrate),this._intToByteArray(e)),r=await this.command(this.ESP_CHANGE_BAUDRATE,t);this.debug(r[0].toString()),this.info("Changed"),await this.transport.disconnect(),await this._sleep(50),await this.transport.connect(this.baudrate,this.serialOptions);try{let o=64;for(;o--;){try{await this.sync();break}catch(s){this.debug(s.message)}await this._sleep(10)}}catch(o){this.debug(o.message)}}async main(e="default_reset"){await this.detectChip(e);const t=await this.chip.getChipDescription(this);return this.info("Chip is "+t),this.info("Features: "+await this.chip.getChipFeatures(this)),this.info("Crystal is "+await this.chip.getCrystalFreq(this)+"MHz"),this.info("MAC: "+await this.chip.readMac(this)),await this.chip.readMac(this),this.chip.postConnect!==void 0&&await this.chip.postConnect(this),await this.runStub(),this.romBaudrate!==this.baudrate&&await this.changeBaud(),t}parseFlashSizeArg(e){if(this.chip.FLASH_SIZES[e]===void 0)throw new ot("Flash size "+e+" is not supported by this chip type. Supported sizes: "+this.chip.FLASH_SIZES);return this.chip.FLASH_SIZES[e]}_updateImageFlashParams(e,t,r,o,s){if(this.debug("_update_image_flash_params "+r+" "+o+" "+s),e.length<8||t!=this.chip.BOOTLOADER_FLASH_OFFSET)return e;if(r==="keep"&&o==="keep"&&s==="keep")return this.info("Not changing the image"),e;const n=parseInt(e[0]);let d=parseInt(e[2]);const f=parseInt(e[3]);if(n!==this.ESP_IMAGE_MAGIC)return this.info("Warning: Image file at 0x"+t.toString(16)+" doesn't look like an image file, so not changing any flash settings."),e;o!=="keep"&&(d={qio:0,qout:1,dio:2,dout:3}[o]);let h=15&f;s!=="keep"&&(h={"40m":0,"26m":1,"20m":2,"80m":15}[s]);let p=240&f;r!=="keep"&&(p=this.parseFlashSizeArg(r));const _=d<<8|h+p;return this.info("Flash params set to "+_.toString(16)),parseInt(e[2])!==d<<8&&(e=e.substring(0,2)+(d<<8).toString()+e.substring(3)),parseInt(e[3])!==h+p&&(e=e.substring(0,3)+(h+p).toString()+e.substring(4)),e}async writeFlash(e){if(this.debug("EspLoader program"),e.flashSize!=="keep"){const o=this.flashSizeBytes(e.flashSize);for(let s=0;s<e.fileArray.length;s++)if(e.fileArray[s].data.length+e.fileArray[s].address>o)throw new ot(`File ${s+1} doesn't fit in the available flash`)}let t,r;this.IS_STUB===!0&&e.eraseAll===!0&&await this.eraseFlash();for(let o=0;o<e.fileArray.length;o++){this.debug("Data Length "+e.fileArray[o].data.length),t=e.fileArray[o].data;const s=e.fileArray[o].data.length%4;if(s>0&&(t+="ÿÿÿÿ".substring(4-s)),r=e.fileArray[o].address,this.debug("Image Length "+t.length),t.length===0){this.debug("Warning: File is empty");continue}t=this._updateImageFlashParams(t,r,e.flashSize,e.flashMode,e.flashFreq);let n=null;e.calculateMD5Hash&&(n=e.calculateMD5Hash(t),this.debug("Image MD5 "+n));const d=t.length;let f;if(e.compress){const T=this.bstrToUi8(t);t=this.ui8ToBstr(Wa(T,{level:9})),f=await this.flashDeflBegin(d,t.length,r)}else f=await this.flashBegin(d,r);let h=0,p=0;const _=t.length;e.reportProgress&&e.reportProgress(o,0,_);let b=new Date;const g=b.getTime();let B=5e3;const k=new Va({chunkSize:1});let x=0;for(k.onData=function(T){x+=T.byteLength};t.length>0;){this.debug("Write loop "+r+" "+h+" "+f),this.info("Writing at 0x"+(r+x).toString(16)+"... ("+Math.floor(100*(h+1)/f)+"%)");const T=this.bstrToUi8(t.slice(0,this.FLASH_WRITE_SIZE));if(!e.compress)throw new ot("Yet to handle Non Compressed writes");{const w=x;k.push(T,!1);const C=x-w;let z=3e3;this.timeoutPerMb(this.ERASE_WRITE_TIMEOUT_PER_MB,C)>3e3&&(z=this.timeoutPerMb(this.ERASE_WRITE_TIMEOUT_PER_MB,C)),this.IS_STUB===!1&&(B=z),await this.flashDeflBlock(T,h,B),this.IS_STUB&&(B=z)}p+=T.length,t=t.slice(this.FLASH_WRITE_SIZE,t.length),h++,e.reportProgress&&e.reportProgress(o,p,_)}this.IS_STUB&&await this.readReg(this.CHIP_DETECT_MAGIC_REG_ADDR,B),b=new Date;const I=b.getTime()-g;if(e.compress&&this.info("Wrote "+d+" bytes ("+p+" compressed) at 0x"+r.toString(16)+" in "+I/1e3+" seconds."),n){const T=await this.flashMd5sum(r,d);if(new String(T).valueOf()!=new String(n).valueOf())throw this.info("File  md5: "+n),this.info("Flash md5: "+T),new ot("MD5 of file does not match data in flash!");this.info("Hash of data verified.")}}this.info("Leaving..."),this.IS_STUB&&(await this.flashBegin(0,0),e.compress?await this.flashDeflFinish():await this.flashFinish())}async flashId(){this.debug("flash_id");const e=await this.readFlashId();this.info("Manufacturer: "+(255&e).toString(16));const t=e>>16&255;this.info("Device: "+(e>>8&255).toString(16)+t.toString(16)),this.info("Detected flash size: "+this.DETECTED_FLASH_SIZES[t])}async getFlashSize(){this.debug("flash_id");const e=await this.readFlashId()>>16&255;return this.DETECTED_FLASH_SIZES_NUM[e]}async hardReset(){await this.transport.setRTS(!0),await this._sleep(100),await this.transport.setRTS(!1)}async softReset(){if(this.IS_STUB){if(this.chip.CHIP_NAME!="ESP8266")throw new ot("Soft resetting is currently only supported on ESP8266");await this.command(this.ESP_RUN_USER_CODE,void 0,void 0,!1)}else await this.flashBegin(0,0),await this.flashFinish(!1)}}const re=async i=>{await i.device.setSignals({dataTerminalReady:!1,requestToSend:!0}),await Lt(250),await i.device.setSignals({dataTerminalReady:!1,requestToSend:!1}),await Lt(250)},Xa=(i,e="")=>{const t=new Blob([i],{type:"text/plain"}),r=URL.createObjectURL(t);((o,s="")=>{const n=document.createElement("a");n.target="_blank",n.href=o,n.download=s,document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click")),document.body.removeChild(n)})(r,e),setTimeout(()=>URL.revokeObjectURL(r),0)};console.log("ESP Web Tools 10.0.1 by Nabu Casa; https://esphome.github.io/esp-web-tools/");class ft extends J{constructor(){super(...arguments),this.logger=console,this._state="DASHBOARD",this._installErase=!1,this._installConfirmed=!1,this._provisionForce=!1,this._wasProvisioned=!1,this._busy=!1,this._selectedSsid=null,this._bodyOverflow=null,this._handleDisconnect=()=>{this._state="ERROR",this._error="Disconnected"}}render(){if(!this.port)return R``;let e,t,r=!1;return this._client===void 0&&this._state!=="INSTALL"&&this._state!=="LOGS"?this._error?[e,t]=this._renderError(this._error):t=this._renderProgress("Connecting"):this._state==="INSTALL"?[e,t,r]=this._renderInstall():this._state==="ASK_ERASE"?[e,t]=this._renderAskErase():this._state==="ERROR"?[e,t]=this._renderError(this._error):this._state==="DASHBOARD"?[e,t,r]=this._client?this._renderDashboard():this._renderDashboardNoImprov():this._state==="PROVISION"?[e,t]=this._renderProvision():this._state==="LOGS"&&([e,t]=this._renderLogs()),R`
      <ew-dialog
        open
        .heading=${e}
        @cancel=${this._preventDefault}
        @closed=${this._handleClose}
      >
        ${e?R`<div slot="headline">${e}</div>`:""}
        ${r?R`
              <ew-icon-button slot="headline" @click=${this._closeDialog}>
                ${Fs}
              </ew-icon-button>
            `:""}
        ${t}
      </ew-dialog>
    `}_renderProgress(e,t){return R`
      <ewt-page-progress
        slot="content"
        .label=${e}
        .progress=${t}
      ></ewt-page-progress>
    `}_renderError(e){return["Error",R`
      <ewt-page-message
        slot="content"
        .icon=${"⚠️"}
        .label=${e}
      ></ewt-page-message>
      <div slot="actions">
        <ew-text-button @click=${this._closeDialog}>Close</ew-text-button>
      </div>
    `]}_renderDashboard(){const e=this._manifest.name;let t;return t=R`
      <div slot="content">
        <ew-list>
          <ew-list-item>
            <div slot="headline">Connected to ${this._info.name}</div>
            <div slot="supporting-text">
              ${this._info.firmware}&nbsp;${this._info.version}
              (${this._info.chipFamily})
            </div>
          </ew-list-item>
          ${this._isSameVersion?"":R`
                <ew-list-item
                  type="button"
                  @click=${()=>{this._isSameFirmware?this._startInstall(!1):this._manifest.new_install_prompt_erase?this._state="ASK_ERASE":this._startInstall(!0)}}
                >
                  ${Er}
                  <div slot="headline">
                    ${this._isSameFirmware?`Update ${this._manifest.name}`:`Install ${this._manifest.name}`}
                  </div>
                </ew-list-item>
              `}
          ${this._client.nextUrl===void 0?"":R`
                <ew-list-item
                  type="link"
                  href=${this._client.nextUrl}
                  target="_blank"
                >
                  ${Ar}
                  <div slot="headline">Visit Device</div>
                </ew-list-item>
              `}
          ${this._manifest.home_assistant_domain&&this._client.state===Ut.PROVISIONED?R`
                <ew-list-item
                  type="link"
                  href=${`https://my.home-assistant.io/redirect/config_flow_start/?domain=${this._manifest.home_assistant_domain}`}
                  target="_blank"
                >
                  ${Sr}
                  <div slot="headline">Add to Home Assistant</div>
                </ew-list-item>
              `:""}
          <ew-list-item
            type="button"
            @click=${()=>{this._state="PROVISION",this._client.state===Ut.PROVISIONED&&(this._provisionForce=!0)}}
          >
            ${Ns}
            <div slot="headline">
              ${this._client.state===Ut.READY?"Connect to Wi-Fi":"Change Wi-Fi"}
            </div>
          </ew-list-item>
          <ew-list-item
            type="button"
            @click=${async()=>{const r=this._client;r&&(await this._closeClientWithoutEvents(r),await Lt(100)),this._client=void 0,this._state="LOGS"}}
          >
            ${kr}
            <div slot="headline">Logs & Console</div>
          </ew-list-item>
          ${this._isSameFirmware&&this._manifest.funding_url?R`
                <ew-list-item
                  type="link"
                  href=${this._manifest.funding_url}
                  target="_blank"
                >
                  <div slot="headline">Fund Development</div>
                </ew-list-item>
              `:""}
          ${this._isSameVersion?R`
                <ew-list-item
                  type="button"
                  class="danger"
                  @click=${()=>this._startInstall(!0)}
                >
                  <div slot="headline">Erase User Data</div>
                </ew-list-item>
              `:""}
        </ew-list>
      </div>
    `,[e,t,!0]}_renderDashboardNoImprov(){const e=this._manifest.name;let t;return t=R`
      <div slot="content">
        <ew-list>
          <ew-list-item
            type="button"
            @click=${()=>{this._manifest.new_install_prompt_erase?this._state="ASK_ERASE":this._startInstall(!0)}}
          >
            ${Er}
            <div slot="headline">${`Install ${this._manifest.name}`}</div>
          </ew-list-item>
          <ew-list-item
            type="button"
            @click=${async()=>{this._client=void 0,this._state="LOGS"}}
          >
            ${kr}
            <div slot="headline">Logs & Console</div>
          </ew-list-item>
        </ew-list>
      </div>
    `,[e,t,!0]}_renderProvision(){var e;let t,r="Configure Wi-Fi";if(this._busy)return[r,this._renderProgress(this._ssids===void 0?"Scanning for networks":"Trying to connect")];if(this._provisionForce||this._client.state!==Ut.PROVISIONED){let o;switch(this._client.error){case 3:o="Unable to connect";break;case 254:o="Timeout";break;case 0:case 2:break;default:o=`Unknown error (${this._client.error})`}const s=(e=this._ssids)===null||e===void 0?void 0:e.find(n=>n.name===this._selectedSsid);t=R`
        <ew-icon-button slot="headline" @click=${this._updateSsids}>
          ${Ms}
        </ew-icon-button>
        <div slot="content">
          <div>Connect your device to the network to start using it.</div>
          ${o?R`<p class="error">${o}</p>`:""}
          ${this._ssids!==null?R`
                <ew-filled-select
                  menu-positioning="fixed"
                  label="Network"
                  @change=${n=>{const d=n.target.selectedIndex;this._selectedSsid=d===this._ssids.length?null:this._ssids[d].name}}
                >
                  ${this._ssids.map(n=>R`
                      <ew-select-option
                        .selected=${s===n}
                        .value=${n.name}
                      >
                        ${n.name}
                      </ew-select-option>
                    `)}
                  <ew-divider></ew-divider>
                  <ew-select-option .selected=${!s}>
                    Join other…
                  </ew-select-option>
                </ew-filled-select>
              `:""}
          ${s?"":R`
                  <ew-filled-text-field
                    label="Network Name"
                    name="ssid"
                  ></ew-filled-text-field>
                `}
          ${!s||s.secured?R`
                <ew-filled-text-field
                  label="Password"
                  name="password"
                  type="password"
                ></ew-filled-text-field>
              `:""}
        </div>
        <div slot="actions">
          <ew-text-button
            @click=${()=>{this._state="DASHBOARD"}}
          >
            ${this._installState&&this._installErase?"Skip":"Back"}
          </ew-text-button>
          <ew-text-button @click=${this._doProvision}>Connect</ew-text-button>
        </div>
      `}else{r=void 0;const o=!this._wasProvisioned&&(this._client.nextUrl!==void 0||"home_assistant_domain"in this._manifest);t=R`
        <div slot="content">
          <ewt-page-message
            .icon=${"🎉"}
            label="Device connected to the network!"
          ></ewt-page-message>
          ${o?R`
                <ew-list>
                  ${this._client.nextUrl===void 0?"":R`
                        <ew-list-item
                          type="link"
                          href=${this._client.nextUrl}
                          target="_blank"
                          @click=${()=>{this._state="DASHBOARD"}}
                        >
                          ${Ar}
                          <div slot="headline">Visit Device</div>
                        </ew-list-item>
                      `}
                  ${this._manifest.home_assistant_domain?R`
                        <ew-list-item
                          type="link"
                          href=${`https://my.home-assistant.io/redirect/config_flow_start/?domain=${this._manifest.home_assistant_domain}`}
                          target="_blank"
                          @click=${()=>{this._state="DASHBOARD"}}
                        >
                          ${Sr}
                          <div slot="headline">Add to Home Assistant</div>
                        </ew-list-item>
                      `:""}
                  <ew-list-item
                    type="button"
                    @click=${()=>{this._state="DASHBOARD"}}
                  >
                    <div slot="start" class="fake-icon"></div>
                    <div slot="headline">Skip</div>
                  </ew-list-item>
                </ew-list>
              `:""}
        </div>

        ${o?"":R`
              <div slot="actions">
                <ew-text-button
                  @click=${()=>{this._state="DASHBOARD"}}
                >
                  Continue
                </ew-text-button>
              </div>
            `}
      `}return[r,t]}_renderAskErase(){return["Erase device",R`
      <div slot="content">
        <div>
          Do you want to erase the device before installing
          ${this._manifest.name}? All data on the device will be lost.
        </div>
        <label class="formfield">
          <ew-checkbox touch-target="wrapper" class="danger"></ew-checkbox>
          Erase device
        </label>
      </div>
      <div slot="actions">
        <ew-text-button
          @click=${()=>{this._state="DASHBOARD"}}
        >
          Back
        </ew-text-button>
        <ew-text-button
          @click=${()=>{const e=this.shadowRoot.querySelector("ew-checkbox");this._startInstall(e.checked)}}
        >
          Next
        </ew-text-button>
      </div>
    `]}_renderInstall(){let e,t;const r=!this._installErase&&this._isSameFirmware;if(!this._installConfirmed&&this._isSameVersion)e="Erase User Data",t=R`
        <div slot="content">
          Do you want to reset your device and erase all user data from your
          device?
        </div>
        <div slot="actions">
          <ew-text-button class="danger" @click=${this._confirmInstall}>
            Erase User Data
          </ew-text-button>
        </div>
      `;else if(this._installConfirmed)if(this._installState&&this._installState.state!=="initializing"&&this._installState.state!=="preparing")if(this._installState.state==="erasing")e="Installing",t=this._renderProgress("Erasing");else if(this._installState.state==="writing"||this._installState.state==="finished"&&this._client===void 0){let o,s;e="Installing",this._installState.state==="finished"?s="Wrapping up":this._installState.details.percentage<4?s="Installing":o=this._installState.details.percentage,t=this._renderProgress(R`
          ${s?R`${s}<br />`:""}
          <br />
          This will take
          ${this._installState.chipFamily==="ESP8266"?"a minute":"2 minutes"}.<br />
          Keep this page visible to prevent slow down
        `,o)}else if(this._installState.state==="finished"){e=void 0;const o=this._client!==null;t=R`
        <ewt-page-message
          slot="content"
          .icon=${"🎉"}
          label="Installation complete!"
        ></ewt-page-message>

        <div slot="actions">
          <ew-text-button
            @click=${()=>{this._state=o&&this._installErase?"PROVISION":"DASHBOARD"}}
          >
            Next
          </ew-text-button>
        </div>
      `}else this._installState.state==="error"&&(e="Installation failed",t=R`
        <ewt-page-message
          slot="content"
          .icon=${"⚠️"}
          .label=${this._installState.message}
        ></ewt-page-message>
        <div slot="actions">
          <ew-text-button
            @click=${async()=>{this._initialize(),this._state="DASHBOARD"}}
          >
            Back
          </ew-text-button>
        </div>
      `);else e="Installing",t=this._renderProgress("Preparing installation");else{e="Confirm Installation";const o=r?"update to":"install";t=R`
        <div slot="content">
          ${r?R`Your device is running
                ${this._info.firmware}&nbsp;${this._info.version}.<br /><br />`:""}
          Do you want to ${o}
          ${this._manifest.name}&nbsp;${this._manifest.version}?
          ${this._installErase?R`<br /><br />All data on the device will be erased.`:""}
        </div>
        <div slot="actions">
          <ew-text-button
            @click=${()=>{this._state="DASHBOARD"}}
          >
            Back
          </ew-text-button>
          <ew-text-button @click=${this._confirmInstall}>
            Install
          </ew-text-button>
        </div>
      `}return[e,t,!1]}_renderLogs(){let e;return e=R`
      <div slot="content">
        <ewt-console .port=${this.port} .logger=${this.logger}></ewt-console>
      </div>
      <div slot="actions">
        <ew-text-button
          @click=${async()=>{await this.shadowRoot.querySelector("ewt-console").reset()}}
        >
          Reset Device
        </ew-text-button>
        <ew-text-button
          @click=${()=>{Xa(this.shadowRoot.querySelector("ewt-console").logs(),"esp-web-tools-logs.txt"),this.shadowRoot.querySelector("ewt-console").reset()}}
        >
          Download Logs
        </ew-text-button>
        <ew-text-button
          @click=${async()=>{await this.shadowRoot.querySelector("ewt-console").disconnect(),this._state="DASHBOARD",this._initialize()}}
        >
          Back
        </ew-text-button>
      </div>
    `,["Logs",e]}willUpdate(e){e.has("_state")&&(this._state!=="ERROR"&&(this._error=void 0),this._state==="PROVISION"?this._updateSsids():this._provisionForce=!1,this._state==="INSTALL"&&(this._installConfirmed=!1,this._installState=void 0))}async _updateSsids(e=0){const t=this._ssids;let r;this._ssids=void 0,this._busy=!0;try{r=await this._client.scan()}catch{return this._ssids===void 0&&(this._ssids=null,this._selectedSsid=null),void(this._busy=!1)}if(r.length===0&&e<3)return console.log("SCHEDULE RETRY",e),void setTimeout(()=>this._updateSsids(e+1),1e3);t?this._selectedSsid&&!r.find(o=>o.name===this._selectedSsid)&&(this._selectedSsid=r[0].name):this._selectedSsid=r.length?r[0].name:null,this._ssids=r,this._busy=!1}firstUpdated(e){super.firstUpdated(e),this._bodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden",this._initialize()}updated(e){super.updated(e),e.has("_state")&&this.setAttribute("state",this._state),this._state==="PROVISION"&&(e.has("_selectedSsid")&&this._selectedSsid===null?this._focusFormElement("ew-filled-text-field[name=ssid]"):e.has("_ssids")&&this._focusFormElement())}_focusFormElement(e="ew-filled-text-field, ew-filled-select"){const t=this.shadowRoot.querySelector(e);t&&t.updateComplete.then(()=>setTimeout(()=>t.focus(),100))}async _initialize(e=!1){if(this.port.readable===null||this.port.writable===null)return this._state="ERROR",void(this._error="Serial port is not readable/writable. Close any other application using it and try again.");try{this._manifest=await(async r=>{const o=new URL(r,location.toString()).toString(),s=await fetch(o),n=await s.json();return"new_install_skip_erase"in n&&(console.warn('Manifest option "new_install_skip_erase" is deprecated. Use "new_install_prompt_erase" instead.'),n.new_install_skip_erase&&(n.new_install_prompt_erase=!0)),n})(this.manifestPath)}catch{return this._state="ERROR",void(this._error="Failed to download manifest")}if(this._manifest.new_install_improv_wait_time===0)return void(this._client=null);const t=new Ws(this.port,this.logger);t.addEventListener("state-changed",()=>{this.requestUpdate()}),t.addEventListener("error-changed",()=>this.requestUpdate());try{const r=e?this._manifest.new_install_improv_wait_time!==void 0?1e3*this._manifest.new_install_improv_wait_time:1e4:1e3;this._info=await t.initialize(r),this._client=t,t.addEventListener("disconnect",this._handleDisconnect)}catch(r){this._info=void 0,r instanceof ho?(this._state="ERROR",this._error="Serial port is not ready. Close any other application using it and try again."):(this._client=null,this.logger.error("Improv initialization failed.",r))}}_startInstall(e){this._state="INSTALL",this._installErase=e,this._installConfirmed=!1}async _confirmInstall(){this._installConfirmed=!0,this._installState=void 0,this._client&&await this._closeClientWithoutEvents(this._client),this._client=void 0,await this.port.close(),(async(e,t,r,o,s)=>{let n,d;const f=x=>e({...x,manifest:o,build:n,chipFamily:d}),h=new Lo(t),p=new Ya({transport:h,baudrate:115200,romBaudrate:115200,enableTracing:!1});window.esploader=p,f({state:"initializing",message:"Initializing...",details:{done:!1}});try{await p.main(),await p.flashId()}catch(x){return console.error(x),f({state:"error",message:"Failed to initialize. Try resetting your device or holding the BOOT button while clicking INSTALL.",details:{error:"failed_initialize",details:x}}),await re(h),void await h.disconnect()}if(d=p.chip.CHIP_NAME,!p.chip.ROM_TEXT)return f({state:"error",message:`Chip ${d} is not supported`,details:{error:"not_supported",details:`Chip ${d} is not supported`}}),await re(h),void await h.disconnect();if(f({state:"initializing",message:`Initialized. Found ${d}`,details:{done:!0}}),n=o.builds.find(x=>x.chipFamily===d),!n)return f({state:"error",message:`Your ${d} board is not supported.`,details:{error:"not_supported",details:d}}),await re(h),void await h.disconnect();f({state:"preparing",message:"Preparing installation...",details:{done:!1}});const _=new URL(r,location.toString()).toString(),b=n.parts.map(async x=>{const I=new URL(x.path,_).toString(),T=await fetch(I);if(!T.ok)throw new Error(`Downlading firmware ${x.path} failed: ${T.status}`);const w=new FileReader,C=await T.blob();return new Promise(z=>{w.addEventListener("load",()=>z(w.result)),w.readAsBinaryString(C)})}),g=[];let B=0;for(let x=0;x<b.length;x++)try{const I=await b[x];g.push({data:I,address:n.parts[x].offset}),B+=I.length}catch(I){return f({state:"error",message:I.message,details:{error:"failed_firmware_download",details:I.message}}),await re(h),void await h.disconnect()}f({state:"preparing",message:"Installation prepared",details:{done:!0}}),s&&(f({state:"erasing",message:"Erasing device...",details:{done:!1}}),await p.eraseFlash(),f({state:"erasing",message:"Device erased",details:{done:!0}})),f({state:"writing",message:"Writing progress: 0%",details:{bytesTotal:B,bytesWritten:0,percentage:0}});let k=0;try{await p.writeFlash({fileArray:g,flashSize:"keep",flashMode:"keep",flashFreq:"keep",eraseAll:!1,compress:!0,reportProgress:(x,I,T)=>{const w=I/T*g[x].data.length,C=Math.floor((k+w)/B*100);I!==T?f({state:"writing",message:`Writing progress: ${C}%`,details:{bytesTotal:B,bytesWritten:k+I,percentage:C}}):k+=w}})}catch(x){return f({state:"error",message:x.message,details:{error:"write_failed",details:x}}),await re(h),void await h.disconnect()}f({state:"writing",message:"Writing complete",details:{bytesTotal:B,bytesWritten:k,percentage:100}}),await Lt(100),console.log("HARD RESET"),await re(h),console.log("DISCONNECT"),await h.disconnect(),f({state:"finished",message:"All done!"})})(e=>{this._installState=e,e.state==="finished"?Lt(100).then(()=>this.port.open({baudRate:115200})).then(()=>this._initialize(!0)).then(()=>this.requestUpdate()):e.state==="error"&&Lt(100).then(()=>this.port.open({baudRate:115200}))},this.port,this.manifestPath,this._manifest,this._installErase)}async _doProvision(){var e;this._busy=!0,this._wasProvisioned=this._client.state===Ut.PROVISIONED;const t=this._selectedSsid===null?this.shadowRoot.querySelector("ew-filled-text-field[name=ssid]").value:this._selectedSsid,r=((e=this.shadowRoot.querySelector("ew-filled-text-field[name=password]"))===null||e===void 0?void 0:e.value)||"";try{await this._client.provision(t,r,3e4)}catch{return}finally{this._busy=!1,this._provisionForce=!1}}_closeDialog(){this.shadowRoot.querySelector("ew-dialog").close()}async _handleClose(){this._client&&await this._closeClientWithoutEvents(this._client),((e,t,r,o)=>{o=o||{};const s=new CustomEvent(t,{bubbles:o.bubbles===void 0||o.bubbles,cancelable:!!o.cancelable,composed:o.composed===void 0||o.composed,detail:r});e.dispatchEvent(s)})(this,"closed"),document.body.style.overflow=this._bodyOverflow,this.parentNode.removeChild(this)}get _isSameFirmware(){var e;return!!this._info&&(!((e=this.overrides)===null||e===void 0)&&e.checkSameFirmware?this.overrides.checkSameFirmware(this._manifest,this._info):this._info.firmware===this._manifest.name)}get _isSameVersion(){return this._isSameFirmware&&this._info.version===this._manifest.version}async _closeClientWithoutEvents(e){e.removeEventListener("disconnect",this._handleDisconnect),await e.close()}_preventDefault(e){e.preventDefault()}}ft.styles=[Fo,tt`
      :host {
        --mdc-dialog-max-width: 390px;
      }
      div[slot="headline"] {
        padding-right: 48px;
      }
      ew-icon-button[slot="headline"] {
        position: absolute;
        right: 4px;
        top: 8px;
      }
      ew-icon-button[slot="headline"] svg {
        padding: 8px;
        color: var(--text-color);
      }
      .dialog-nav svg {
        color: var(--text-color);
      }
      .table-row {
        display: flex;
      }
      .table-row.last {
        margin-bottom: 16px;
      }
      .table-row svg {
        width: 20px;
        margin-right: 8px;
      }
      ew-filled-text-field,
      ew-filled-select {
        display: block;
        margin-top: 16px;
      }
      label.formfield {
        display: inline-flex;
        align-items: center;
        padding-right: 8px;
      }
      ew-list {
        margin: 0 -24px;
        padding: 0;
      }
      ew-list-item svg {
        height: 24px;
      }
      ewt-page-message + ew-list {
        padding-top: 16px;
      }
      .fake-icon {
        width: 24px;
      }
      .error {
        color: var(--danger-color);
      }
      .danger {
        --mdc-theme-primary: var(--danger-color);
        --mdc-theme-secondary: var(--danger-color);
        --md-sys-color-primary: var(--danger-color);
        --md-sys-color-on-surface: var(--danger-color);
      }
      button.link {
        background: none;
        color: inherit;
        border: none;
        padding: 0;
        font: inherit;
        text-align: left;
        text-decoration: underline;
        cursor: pointer;
      }
      :host([state="LOGS"]) ew-dialog {
        max-width: 90vw;
        max-height: 90vh;
      }
      ewt-console {
        width: calc(80vw - 48px);
        height: calc(90vh - 168px);
      }
    `],v([W()],ft.prototype,"_client",void 0),v([W()],ft.prototype,"_state",void 0),v([W()],ft.prototype,"_installErase",void 0),v([W()],ft.prototype,"_installConfirmed",void 0),v([W()],ft.prototype,"_installState",void 0),v([W()],ft.prototype,"_provisionForce",void 0),v([W()],ft.prototype,"_error",void 0),v([W()],ft.prototype,"_busy",void 0),v([W()],ft.prototype,"_ssids",void 0),v([W()],ft.prototype,"_selectedSsid",void 0),customElements.define("ewt-install-dialog",ft);export{ft as EwtInstallDialog};
